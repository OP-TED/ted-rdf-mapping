@prefix rr: <http://www.w3.org/ns/r2rml#> .
@prefix rml: <http://semweb.mmlab.be/ns/rml#> .
@prefix rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#> .
@prefix rdfs: <http://www.w3.org/2000/01/rdf-schema#> .
@prefix ql: <http://semweb.mmlab.be/ns/ql#> .
@prefix xsd: <https://www.w3.org/2001/XMLSchema#> .
@prefix epo: <http://data.europa.eu/a4g/ontology#> .
@prefix epd: <http://data.europa.eu/a4g/resource/> .
@prefix locn: <http://locn/ontology#> .
@prefix dct: <http://purl.org/dc/terms> .
@base <http://example.com/ns#> .



<#Buyer> a rr:TripleMap ;
    rml:logicalSource
        [
            rml:source "source.xml" ;
            rml:iterator "/TED_EXPORT/FORM_SECTION/F03_2014/CONTRACTING_BODY/CA_ACTIVITY" ;
            rml:referenceFormulation ql:XPath
        ] ;
    rr:subjectMap
        [
            rr:template
                "http://data.europa.eu/a4g/resource/Buyer/{replace(replace(/TED_EXPORT/CODED_DATA_SECTION/NOTICE_DATA/NO_DOC_OJS, ' ', '-' ), '/' , '-')}/{substring-before(substring-after(unparsed-text('https://www.uuidtools.com/api/generate/v3/namespace/ns:url/name/' || count(preceding::*)+1),'[\"'),'\"]')}" ;
            rr:class epo:Buyer

        ] ;
    rr:predicateObjectMap
        [
            rr:predicate epo:hasBuyerWebsite ;
            rr:objectMap
                [
                    rr:parentTriplesMap <#BuyerProfile>
                ] ;
        ] ;
    rr:predicateObjectMap
        [
            rr:predicate epo:isRoleOf ;
            rr:objectMap
                [
                    rr:parentTriplesMap <#OrganisationMapping>
                ] ;
        ] ;
    rr:predicateObjectMap
        [
            rr:predicate epo:hasMainActivityType ;
            rr:objectMap
                [
                    rr:parentTriplesMap <#MainActivity>;
                    rr:joinCondition [
                        rr:child "./@VALUE";
                        rr:parent "xmlElement";
                    ];
                ] ;
        ] ;
    rr:predicateObjectMap
        [
            rr:predicate epo:hasMainActivityType ;
            rr:objectMap
                [
                    rr:parentTriplesMap <#MainActivity>;
                    rr:joinCondition [
                        rr:child "./@VALUE";
                        rr:parent "xmlElement";
                    ];
                ] ;
        ] ;
    rr:predicateObjectMap
        [
            rr:predicate epo:hasMainActivityType ;
            rr:objectMap
                [
                        rml:reference "if(not(exists(./@VALUE))) then 'http://publications.europa.eu/resource/authority/main-activity/OP_DATPRO' else null"
                ] ;
        ] ;
    rr:predicateObjectMap
        [
            rr:predicate epo:hasBuyerType ;
            rr:objectMap
                [
                    rr:parentTriplesMap <#BuyerType>;
                    rr:joinCondition [
                        rr:child "/TED_EXPORT/FORM_SECTION/F03_2014/CONTRACTING_BODY/CA_TYPE/@VALUE";
                        rr:parent "xmlElement";
                    ];
                ] ;
        ] .
<#BuyerType> a rr:TriplesMap ;
    rml:logicalSource
        [
            rml:source "buyer_legal_type.csv" ;
            rml:referenceFormulation ql:CSV
        ] ;
    rr:subjectMap
        [
            rml:reference
                "conceptURI" ;
        ] .
<#MainActivity> a rr:TriplesMap ;
    rml:logicalSource
        [
            rml:source "main_activity.csv" ;
            rml:referenceFormulation ql:CSV
        ] ;
    rr:subjectMap
        [
            rml:reference
                "conceptURI" ;
        ] .
<#BuyerProfile> a rr:TripleMap ;
    rml:logicalSource
        [
            rml:source "source.xml" ;
            rml:iterator "/TED_EXPORT/FORM_SECTION/F03_2014/CONTRACTING_BODY/ADDRESS_CONTRACTING_BODY/URL_BUYER";
            rml:referenceFormulation ql:XPath
        ];
    rr:subjectMap
        [
            rr:template "http://data.europa.eu/a4g/resource/BuyerProfile/{replace(replace(/TED_EXPORT/CODED_DATA_SECTION/NOTICE_DATA/NO_DOC_OJS, ' ', '-' ), '/' , '-')}/{substring-before(substring-after(unparsed-text('https://www.uuidtools.com/api/generate/v3/namespace/ns:url/name/' || count(preceding::*)+1),'[\"'),'\"]')}" ;
            rr:class epo:BuyerProfile
        ] ;
    rr:predicateObjectMap
        [
            rr:predicate epo:hasURL;
            rr:objectMap
                [
                    rml:reference "."
                ]
        ] .
<#OrganisationMapping> a rr:TriplesMap ;
    rml:logicalSource
        [
            rml:source "source.xml" ;
            rml:iterator "/TED_EXPORT/FORM_SECTION/F03_2014/CONTRACTING_BODY/ADDRESS_CONTRACTING_BODY" ;
            rml:referenceFormulation ql:XPath
        ] ;
    rr:subjectMap
        [
            rr:template
                "http://data.europa.eu/a4g/resource/Organisation/{replace(replace(/TED_EXPORT/CODED_DATA_SECTION/NOTICE_DATA/NO_DOC_OJS, ' ', '-' ), '/' , '-')}/{substring-before(substring-after(unparsed-text('https://www.uuidtools.com/api/generate/v3/namespace/ns:url/name/' || count(preceding::*)+1),'[\"'),'\"]')}" ;
            rr:class epo:Organisation

        ] ;
    rr:predicateObjectMap
        [
            rr:predicate epo:hasDefaultContactPoint ;
            rr:objectMap
                [
                    rr:parentTriplesMap <#ContactPoint>
                ] ;
        ] ;
    rr:predicateObjectMap
        [
        rr:predicate epo:hasName ;
        rr:objectMap
                [
                    rml:reference "OFFICIALNAME"
                ]
        ] ;
    rr:predicateObjectMap
        [
            rr:predicate epo:hasRegisteredAddress ;
            rr:objectMap
                [
                    rr:parentTriplesMap <#OrganisationAddress>
                ]
        ] ;


    rr:predicateObjectMap
        [
            rr:predicate epo:hasID;
            rr:objectMap
                [
                    rr:parentTriplesMap <#OrganisationIdentifier>
                ]
        ] .
<#OrganisationIdentifier> a rr:TripleMap ;
    rml:logicalSource
        [
            rml:source "source.xml" ;
            rml:iterator "/TED_EXPORT/FORM_SECTION/F03_2014/CONTRACTING_BODY/ADDRESS_CONTRACTING_BODY";
            rml:referenceFormulation ql:XPath
        ];
    rr:subjectMap
        [
            rr:template "http://data.europa.eu/a4g/resource/OrganisationIdentifier/{replace(replace(/TED_EXPORT/CODED_DATA_SECTION/NOTICE_DATA/NO_DOC_OJS, ' ', '-' ), '/' , '-')}/{substring-before(substring-after(unparsed-text('https://www.uuidtools.com/api/generate/v3/namespace/ns:url/name/' || count(preceding::*)+1),'[\"'),'\"]')}" ;
            rr:class epo:Identifier
        ] ;
    rr:predicateObjectMap
        [
            rr:predicate epo:hasIdentifierValue;
            rr:objectMap
                [
                    rml:reference "NATIONALID"
                ]
        ] .
<#ContactPoint> a rr:TriplesMap ;
    rml:logicalSource
        [
            rml:source "source.xml" ;
            rml:iterator "/TED_EXPORT/FORM_SECTION/F03_2014/CONTRACTING_BODY/ADDRESS_CONTRACTING_BODY" ;
            rml:referenceFormulation ql:XPath
        ] ;
    rr:subjectMap
        [
            rr:template
                "http://data.europa.eu/a4g/resource/ContactPoint/{replace(replace(/TED_EXPORT/CODED_DATA_SECTION/NOTICE_DATA/NO_DOC_OJS, ' ', '-' ), '/' , '-')}/{substring-before(substring-after(unparsed-text('https://www.uuidtools.com/api/generate/v3/namespace/ns:url/name/' || count(preceding::*)+1),'[\"'),'\"]')}" ;
            rr:class epo:ContactPoint

        ] ;
    rr:predicateObjectMap
        [
            rr:predicate epo:hasEmail ;
            rr:objectMap
                [
                    rml:reference "E_MAIL"
                ] ;
        ] ;
    rr:predicateObjectMap
        [
            rr:predicate epo:hasFax ;
            rr:objectMap
                [
                    rml:reference "FAX"
                ]
        ] ;
    rr:predicateObjectMap
        [
            rr:predicate epo:hasChannel ;
            rr:objectMap
                [
                    rr:parentTriplesMap <#OrganisationChannel>
                ]
        ] ;

    rr:predicateObjectMap
        [
            rr:predicate epo:hasTelephone ;
            rr:objectMap
                [
                    rml:reference "PHONE"
                ]
        ] ;
    rr:predicateObjectMap
        [
            rr:predicate epo:hasDescription ;
            rr:objectMap
                [
                    rml:reference "CONTACT_POINT"
                ]
        ] .
<#OrganisationAddress> a rr:TriplesMap ;
    rml:logicalSource
        [
            rml:source "source.xml" ;
            rml:iterator "/TED_EXPORT/FORM_SECTION/F03_2014/CONTRACTING_BODY/ADDRESS_CONTRACTING_BODY" ;
            rml:referenceFormulation ql:XPath
        ] ;
    rr:subjectMap
        [
            rr:template
                "http://locn/ontology#Address/{replace(replace(/TED_EXPORT/CODED_DATA_SECTION/NOTICE_DATA/NO_DOC_OJS, ' ', '-' ), '/' , '-')}/{substring-before(substring-after(unparsed-text('https://www.uuidtools.com/api/generate/v3/namespace/ns:url/name/' || count(preceding::*)+1),'[\"'),'\"]')}" ;
            rr:class locn:Address

        ] ;
    rr:predicateObjectMap
        [
            rr:predicate epo:postName ;
            rr:objectMap
                [
                    rml:reference "TOWN"
                ] ;
        ] ;
    rr:predicateObjectMap
        [
            rr:predicate epo:thoroughfare ;
            rr:objectMap
                [
                    rml:reference "ADDRESS"
                ] ;
        ] ;
    rr:predicateObjectMap
        [
            rr:predicate epo:postCode ;
            rr:objectMap
                [
                    rml:reference "POSTAL_CODE"
                ] ;
        ] ;
    rr:predicateObjectMap
        [
            rr:predicate locn:adminUnitL1 ;
            rr:objectMap
                [
                    rr:parentTriplesMap <#nuts>;
                    rr:joinCondition [
                        rr:child "*:NUTS/@CODE";
                        rr:parent "code.value";
                    ];
                ] ;
        ] ;
    rr:predicateObjectMap
        [
            rr:predicate locn:adminUnitL2 ;
            rr:objectMap
                [
                    rr:parentTriplesMap <#countries>;
                    rr:joinCondition [
                        rr:child "COUNTRY/@VALUE";
                        rr:parent "code.value";
                    ];
                ] ;
        ] .
<#nuts> a rr:TriplesMap ;
    rml:logicalSource
        [
            rml:source "nuts.json" ;
            rml:iterator "$.results.bindings[*]" ;
            rml:referenceFormulation ql:JSONPath
        ] ;
    rr:subjectMap
        [
            rml:reference
                "conceptURI.value" ;
        ] .
<#countries> a rr:TriplesMap ;
    rml:logicalSource
        [
            rml:source "country.json" ;
            rml:iterator "$.results.bindings[*]" ;
            rml:referenceFormulation ql:JSONPath
        ] ;
    rr:subjectMap
        [
            rml:reference
                "conceptURI.value" ;
        ] .
<#OrganisationChannel> a rr:TriplesMap ;
    rml:logicalSource
        [
            rml:source "source.xml" ;
            rml:iterator "/TED_EXPORT/FORM_SECTION/F03_2014/CONTRACTING_BODY/ADDRESS_CONTRACTING_BODY" ;
            rml:referenceFormulation ql:XPath
        ] ;
    rr:subjectMap
        [
            rr:template
                "http://data.europa.eu/a4g/resource/Channel/{replace(replace(/TED_EXPORT/CODED_DATA_SECTION/NOTICE_DATA/NO_DOC_OJS, ' ', '-' ), '/' , '-')}/{substring-before(substring-after(unparsed-text('https://www.uuidtools.com/api/generate/v3/namespace/ns:url/name/' || count(preceding::*)+1),'[\"'),'\"]')}" ;
            rr:class epo:Channel

        ] ;
    rr:predicateObjectMap
        [
            rr:predicate epo:hasUrl ;
            rr:objectMap
                [
                    rml:reference "URL_GENERAL"
                ] ;
        ] .

<#ResultNotice> a rr:TriplesMap ;
    rml:logicalSource
        [
            rml:source "source.xml" ;
            rml:iterator "/TED_EXPORT/FORM_SECTION/F03_2014/OBJECT_CONTRACT" ;
            rml:referenceFormulation ql:XPath
        ] ;
    rr:subjectMap
        [
            rr:template
                "http://data.europa.eu/a4g/resource/ResultNotice/{replace(replace(/TED_EXPORT/CODED_DATA_SECTION/NOTICE_DATA/NO_DOC_OJS, ' ', '-' ), '/' , '-')}/{substring-before(substring-after(unparsed-text('https://www.uuidtools.com/api/generate/v3/namespace/ns:url/name/' || count(preceding::*)+1),'[\"'),'\"]')}" ;
            rr:class epo:ResultNotice

        ] ;
    rr:predicateObjectMap
        [
            rr:predicate epo:refersToRole ;
            rr:objectMap
                [
                    rr:parentTriplesMap <#Buyer>
                ] ;
        ] ;
    rr:predicateObjectMap
        [
            rr:predicate epo:refersToRole ;
            rr:objectMap
                [
                    rr:parentTriplesMap <#Reviewer>
                ] ;
        ] ;
    rr:predicateObjectMap
        [
            rr:predicate epo:refersToRole ;
            rr:objectMap
                [
                    rr:parentTriplesMap <#Mediator>
                ] ;
        ] ;
    rr:predicateObjectMap
        [
            rr:predicate epo:refersToRole ;
            rr:objectMap
                [
                    rr:parentTriplesMap <#ReviewProcedureInformationProvider>
                ] ;
        ] ;
    rr:predicateObjectMap
        [
            rr:predicate epo:refersToRole ;
            rr:objectMap
                [
                    rr:parentTriplesMap <#ContractSignatoryonContractorSide>
                ] ;
        ] ;
    rr:predicateObjectMap
        [
            rr:predicate epo:refersToProcedure ;
            rr:objectMap
                [
                    rr:parentTriplesMap <#Procedure>
                ] ;
        ] ;
    rr:predicateObjectMap
    [
        rr:predicate epo:announcesContract ;
        rr:objectMap
            [
                rr:parentTriplesMap <#Contract>
            ] ;
    ] ;
    rr:predicateObjectMap
    [
        rr:predicate epo:announcesAdditionalInformation ;
        rr:objectMap
            [
                rr:parentTriplesMap <#SubmissionStatisticalInformation>
            ] ;
    ] ;
    rr:predicateObjectMap
        [
            rr:predicate epo:refersToLot ;
            rr:objectMap
                [
                    rr:parentTriplesMap <#Lot>
                ] ;
        ] .
<#Reviewer> a rr:TripleMap ;
    rml:logicalSource
        [
            rml:source "source.xml" ;
            rml:iterator "/TED_EXPORT/FORM_SECTION/F03_2014/COMPLEMENTARY_INFO/ADDRESS_REVIEW_BODY" ;
            rml:referenceFormulation ql:XPath
        ] ;
    rr:subjectMap
        [
            rr:template
                "http://data.europa.eu/a4g/resource/Reviewer/{replace(replace(/TED_EXPORT/CODED_DATA_SECTION/NOTICE_DATA/NO_DOC_OJS, ' ', '-' ), '/' , '-')}/{substring-before(substring-after(unparsed-text('https://www.uuidtools.com/api/generate/v3/namespace/ns:url/name/' || count(preceding::*)+1),'[\"'),'\"]')}" ;
            rr:class epo:Reviewer

        ] ;
    rr:predicateObjectMap
        [
            rr:predicate epo:IsRoleOf ;
            rr:objectMap
                [
                    rr:parentTriplesMap <#ReviewerOrganisation>
                ] ;
        ] .
<#ReviewerOrganisation> a rr:TriplesMap ;
    rml:logicalSource
        [
            rml:source "source.xml" ;
            rml:iterator "/TED_EXPORT/FORM_SECTION/F03_2014/COMPLEMENTARY_INFO/ADDRESS_REVIEW_BODY" ;
            rml:referenceFormulation ql:XPath
        ] ;
    rr:subjectMap
        [
            rr:template
                "http://data.europa.eu/a4g/resource/ReviewerOrganisation/{replace(replace(/TED_EXPORT/CODED_DATA_SECTION/NOTICE_DATA/NO_DOC_OJS, ' ', '-' ), '/' , '-')}/{substring-before(substring-after(unparsed-text('https://www.uuidtools.com/api/generate/v3/namespace/ns:url/name/' || count(preceding::*)+1),'[\"'),'\"]')}" ;
            rr:class epo:Organisation

        ] ;
    rr:predicateObjectMap
        [
            rr:predicate epo:hasDefaultContactPoint ;
            rr:objectMap
                [
                    rr:parentTriplesMap <#ReviewerContactPoint>
                ] ;
        ] ;
    rr:predicateObjectMap
        [
        rr:predicate epo:hasName ;
        rr:objectMap
                [
                    rml:reference "OFFICIALNAME"
                ]
        ] ;
    rr:predicateObjectMap
        [
            rr:predicate epo:hasRegisteredAddress ;
            rr:objectMap
                [
                    rr:parentTriplesMap <#ReviewerOrganisationAddress>
                ]
        ] ;


    rr:predicateObjectMap
        [
            rr:predicate epo:hasID;
            rr:objectMap
                [
                    rr:parentTriplesMap <#ReviewerOrganisationIdentifier>
                ]
        ] .
<#ReviewerOrganisationIdentifier> a rr:TripleMap ;
    rml:logicalSource
        [
            rml:source "source.xml" ;
            rml:iterator "/TED_EXPORT/FORM_SECTION/F03_2014/COMPLEMENTARY_INFO/ADDRESS_REVIEW_BODY";
            rml:referenceFormulation ql:XPath
        ];
    rr:subjectMap
        [
            rr:template "http://data.europa.eu/a4g/resource/ReviewerOrganisationIdentifier/{replace(replace(/TED_EXPORT/CODED_DATA_SECTION/NOTICE_DATA/NO_DOC_OJS, ' ', '-' ), '/' , '-')}/{substring-before(substring-after(unparsed-text('https://www.uuidtools.com/api/generate/v3/namespace/ns:url/name/' || count(preceding::*)+1),'[\"'),'\"]')}" ;
            rr:class epo:Identifier
        ] ;
    rr:predicateObjectMap
        [
            rr:predicate epo:hasIdentifierValue;
            rr:objectMap
                [
                    rml:reference "NATIONALID"
                ]
        ] .
<#ReviewerContactPoint> a rr:TriplesMap ;
    rml:logicalSource
        [
            rml:source "source.xml" ;
            rml:iterator "/TED_EXPORT/FORM_SECTION/F03_2014/COMPLEMENTARY_INFO/ADDRESS_REVIEW_BODY";
            rml:referenceFormulation ql:XPath
        ] ;
    rr:subjectMap
        [
            rr:template
                "http://data.europa.eu/a4g/resource/ReviewerContactPoint/{replace(replace(/TED_EXPORT/CODED_DATA_SECTION/NOTICE_DATA/NO_DOC_OJS, ' ', '-' ), '/' , '-')}/{substring-before(substring-after(unparsed-text('https://www.uuidtools.com/api/generate/v3/namespace/ns:url/name/' || count(preceding::*)+1),'[\"'),'\"]')}" ;
            rr:class epo:ContactPoint

        ] ;
    rr:predicateObjectMap
        [
            rr:predicate epo:hasEmail ;
            rr:objectMap
                [
                    rml:reference "E_MAIL"
                ] ;
        ] ;
    rr:predicateObjectMap
        [
            rr:predicate epo:hasFax ;
            rr:objectMap
                [
                    rml:reference "FAX"
                ]
        ] ;
    rr:predicateObjectMap
        [
            rr:predicate epo:hasChannel ;
            rr:objectMap
                [
                    rr:parentTriplesMap <#ReviewerOrganisationChannel>
                ]
        ] ;

    rr:predicateObjectMap
        [
            rr:predicate epo:hasTelephone ;
            rr:objectMap
                [
                    rml:reference "PHONE"
                ]
        ] ;
    rr:predicateObjectMap
        [
            rr:predicate epo:hasDescription ;
            rr:objectMap
                [
                    rml:reference "CONTACT_POINT"
                ]
        ] .
<#ReviewerOrganisationAddress> a rr:TriplesMap ;
    rml:logicalSource
        [
            rml:source "source.xml" ;
            rml:iterator "/TED_EXPORT/FORM_SECTION/F03_2014/COMPLEMENTARY_INFO/ADDRESS_REVIEW_BODY";
            rml:referenceFormulation ql:XPath
        ] ;
    rr:subjectMap
        [
            rr:template
                "http://locn/ontology#Address/{replace(replace(/TED_EXPORT/CODED_DATA_SECTION/NOTICE_DATA/NO_DOC_OJS, ' ', '-' ), '/' , '-')}/{substring-before(substring-after(unparsed-text('https://www.uuidtools.com/api/generate/v3/namespace/ns:url/name/' || count(preceding::*)+1),'[\"'),'\"]')}" ;
            rr:class locn:Address

        ] ;
    rr:predicateObjectMap
        [
            rr:predicate epo:postName ;
            rr:objectMap
                [
                    rml:reference "TOWN"
                ] ;
        ] ;
    rr:predicateObjectMap
        [
            rr:predicate epo:thoroughfare ;
            rr:objectMap
                [
                    rml:reference "ADDRESS"
                ] ;
        ] ;
    rr:predicateObjectMap
        [
            rr:predicate epo:postCode ;
            rr:objectMap
                [
                    rml:reference "POSTAL_CODE"
                ] ;
        ] ;
    rr:predicateObjectMap
        [
            rr:predicate locn:adminUnitL1 ;
            rr:objectMap
                [
                    rr:parentTriplesMap <#nuts>;
                    rr:joinCondition [
                        rr:child "*:NUTS/@CODE";
                        rr:parent "code.value";
                    ];
                ] ;
        ] ;
    rr:predicateObjectMap
        [
            rr:predicate locn:adminUnitL2 ;
            rr:objectMap
                [
                    rr:parentTriplesMap <#countries>;
                    rr:joinCondition [
                        rr:child "COUNTRY/@VALUE";
                        rr:parent "code.value";
                    ];
                ] ;
        ] .

<#ReviewerOrganisationChannel> a rr:TriplesMap ;
    rml:logicalSource
        [
            rml:source "source.xml" ;
            rml:iterator "/TED_EXPORT/FORM_SECTION/F03_2014/COMPLEMENTARY_INFO/ADDRESS_REVIEW_BODY";
            rml:referenceFormulation ql:XPath
        ] ;
    rr:subjectMap
        [
            rr:template
                "http://data.europa.eu/a4g/resource/ReviewerOrganisationChannel/{replace(replace(/TED_EXPORT/CODED_DATA_SECTION/NOTICE_DATA/NO_DOC_OJS, ' ', '-' ), '/' , '-')}/{substring-before(substring-after(unparsed-text('https://www.uuidtools.com/api/generate/v3/namespace/ns:url/name/' || count(preceding::*)+1),'[\"'),'\"]')}" ;
            rr:class epo:Channel

        ] ;
    rr:predicateObjectMap
        [
            rr:predicate epo:hasUrl ;
            rr:objectMap
                [
                    rml:reference "URL"
                ] ;
        ] .
<#Mediator> a rr:TripleMap ;
    rml:logicalSource
        [
            rml:source "source.xml" ;
            rml:iterator "/TED_EXPORT/FORM_SECTION/F03_2014/COMPLEMENTARY_INFO/ADDRESS_MEDIATION_BODY" ;
            rml:referenceFormulation ql:XPath
        ] ;
    rr:subjectMap
        [
            rr:template
                "http://data.europa.eu/a4g/resource/Mediator/{replace(replace(/TED_EXPORT/CODED_DATA_SECTION/NOTICE_DATA/NO_DOC_OJS, ' ', '-' ), '/' , '-')}/{substring-before(substring-after(unparsed-text('https://www.uuidtools.com/api/generate/v3/namespace/ns:url/name/' || count(preceding::*)+1),'[\"'),'\"]')}" ;
            rr:class epo:Mediator

        ] ;
    rr:predicateObjectMap
        [
            rr:predicate epo:IsRoleOf ;
            rr:objectMap
                [
                    rr:parentTriplesMap <#MediatorOrganisation>
                ] ;
        ] .
<#MediatorOrganisation> a rr:TriplesMap ;
    rml:logicalSource
        [
            rml:source "source.xml" ;
            rml:iterator "/TED_EXPORT/FORM_SECTION/F03_2014/COMPLEMENTARY_INFO/ADDRESS_MEDIATION_BODY" ;
            rml:referenceFormulation ql:XPath
        ] ;
    rr:subjectMap
        [
            rr:template
                "http://data.europa.eu/a4g/resource/MediatorOrganisation/{replace(replace(/TED_EXPORT/CODED_DATA_SECTION/NOTICE_DATA/NO_DOC_OJS, ' ', '-' ), '/' , '-')}/{substring-before(substring-after(unparsed-text('https://www.uuidtools.com/api/generate/v3/namespace/ns:url/name/' || count(preceding::*)+1),'[\"'),'\"]')}" ;
            rr:class epo:Organisation

        ] ;
    rr:predicateObjectMap
        [
            rr:predicate epo:hasDefaultContactPoint ;
            rr:objectMap
                [
                    rr:parentTriplesMap <#MediatorContactPoint>
                ] ;
        ] ;
    rr:predicateObjectMap
        [
        rr:predicate epo:hasName ;
        rr:objectMap
                [
                    rml:reference "OFFICIALNAME"
                ]
        ] ;
    rr:predicateObjectMap
        [
            rr:predicate epo:hasRegisteredAddress ;
            rr:objectMap
                [
                    rr:parentTriplesMap <#MediatorOrganisationAddress>
                ]
        ] ;


    rr:predicateObjectMap
        [
            rr:predicate epo:hasID;
            rr:objectMap
                [
                    rr:parentTriplesMap <#MediatorOrganisationIdentifier>
                ]
        ] .
<#MediatorOrganisationIdentifier> a rr:TripleMap ;
    rml:logicalSource
        [
            rml:source "source.xml" ;
            rml:iterator "/TED_EXPORT/FORM_SECTION/F03_2014/COMPLEMENTARY_INFO/ADDRESS_MEDIATION_BODY";
            rml:referenceFormulation ql:XPath
        ];
    rr:subjectMap
        [
            rr:template "http://data.europa.eu/a4g/resource/MediatorOrganisationIdentifier/{replace(replace(/TED_EXPORT/CODED_DATA_SECTION/NOTICE_DATA/NO_DOC_OJS, ' ', '-' ), '/' , '-')}/{substring-before(substring-after(unparsed-text('https://www.uuidtools.com/api/generate/v3/namespace/ns:url/name/' || count(preceding::*)+1),'[\"'),'\"]')}" ;
            rr:class epo:Identifier
        ] ;
    rr:predicateObjectMap
        [
            rr:predicate epo:hasIdentifierValue;
            rr:objectMap
                [
                    rml:reference "NATIONALID"
                ]
        ] .
<#MediatorContactPoint> a rr:TriplesMap ;
    rml:logicalSource
        [
            rml:source "source.xml" ;
            rml:iterator "/TED_EXPORT/FORM_SECTION/F03_2014/COMPLEMENTARY_INFO/ADDRESS_MEDIATION_BODY";
            rml:referenceFormulation ql:XPath
        ] ;
    rr:subjectMap
        [
            rr:template
                "http://data.europa.eu/a4g/resource/MediatorContactPoint/{replace(replace(/TED_EXPORT/CODED_DATA_SECTION/NOTICE_DATA/NO_DOC_OJS, ' ', '-' ), '/' , '-')}/{substring-before(substring-after(unparsed-text('https://www.uuidtools.com/api/generate/v3/namespace/ns:url/name/' || count(preceding::*)+1),'[\"'),'\"]')}" ;
            rr:class epo:ContactPoint

        ] ;
    rr:predicateObjectMap
        [
            rr:predicate epo:hasEmail ;
            rr:objectMap
                [
                    rml:reference "E_MAIL"
                ] ;
        ] ;
    rr:predicateObjectMap
        [
            rr:predicate epo:hasFax ;
            rr:objectMap
                [
                    rml:reference "FAX"
                ]
        ] ;
    rr:predicateObjectMap
        [
            rr:predicate epo:hasChannel ;
            rr:objectMap
                [
                    rr:parentTriplesMap <#MediatorOrganisationChannel>
                ]
        ] ;

    rr:predicateObjectMap
        [
            rr:predicate epo:hasTelephone ;
            rr:objectMap
                [
                    rml:reference "PHONE"
                ]
        ] ;
    rr:predicateObjectMap
        [
            rr:predicate epo:hasDescription ;
            rr:objectMap
                [
                    rml:reference "CONTACT_POINT"
                ]
        ] .
<#MediatorOrganisationAddress> a rr:TriplesMap ;
    rml:logicalSource
        [
            rml:source "source.xml" ;
            rml:iterator "/TED_EXPORT/FORM_SECTION/F03_2014/COMPLEMENTARY_INFO/ADDRESS_MEDIATION_BODY";
            rml:referenceFormulation ql:XPath
        ] ;
    rr:subjectMap
        [
            rr:template
                "http://locn/ontology#Address/{replace(replace(/TED_EXPORT/CODED_DATA_SECTION/NOTICE_DATA/NO_DOC_OJS, ' ', '-' ), '/' , '-')}/{substring-before(substring-after(unparsed-text('https://www.uuidtools.com/api/generate/v3/namespace/ns:url/name/' || count(preceding::*)+1),'[\"'),'\"]')}" ;
            rr:class locn:Address

        ] ;
    rr:predicateObjectMap
        [
            rr:predicate epo:postName ;
            rr:objectMap
                [
                    rml:reference "TOWN"
                ] ;
        ] ;
    rr:predicateObjectMap
        [
            rr:predicate epo:thoroughfare ;
            rr:objectMap
                [
                    rml:reference "ADDRESS"
                ] ;
        ] ;
    rr:predicateObjectMap
        [
            rr:predicate epo:postCode ;
            rr:objectMap
                [
                    rml:reference "POSTAL_CODE"
                ] ;
        ] ;
    rr:predicateObjectMap
        [
            rr:predicate locn:adminUnitL1 ;
            rr:objectMap
                [
                    rr:parentTriplesMap <#nuts>;
                    rr:joinCondition [
                        rr:child "*:NUTS/@CODE";
                        rr:parent "code.value";
                    ];
                ] ;
        ] ;
    rr:predicateObjectMap
        [
            rr:predicate locn:adminUnitL2 ;
            rr:objectMap
                [
                    rr:parentTriplesMap <#countries>;
                    rr:joinCondition [
                        rr:child "COUNTRY/@VALUE";
                        rr:parent "code.value";
                    ];
                ] ;
        ] .

<#MediatorOrganisationChannel> a rr:TriplesMap ;
    rml:logicalSource
        [
            rml:source "source.xml" ;
            rml:iterator "/TED_EXPORT/FORM_SECTION/F03_2014/COMPLEMENTARY_INFO/ADDRESS_MEDIATION_BODY";
            rml:referenceFormulation ql:XPath
        ] ;
    rr:subjectMap
        [
            rr:template
                "http://data.europa.eu/a4g/resource/MediatorOrganisationChannel/{replace(replace(/TED_EXPORT/CODED_DATA_SECTION/NOTICE_DATA/NO_DOC_OJS, ' ', '-' ), '/' , '-')}/{substring-before(substring-after(unparsed-text('https://www.uuidtools.com/api/generate/v3/namespace/ns:url/name/' || count(preceding::*)+1),'[\"'),'\"]')}" ;
            rr:class epo:Channel

        ] ;
    rr:predicateObjectMap
        [
            rr:predicate epo:hasUrl ;
            rr:objectMap
                [
                    rml:reference "URL"
                ] ;
        ] .
<#ReviewProcedureInformationProvider> a rr:TripleMap ;
    rml:logicalSource
        [
            rml:source "source.xml" ;
            rml:iterator "/TED_EXPORT/FORM_SECTION/F03_2014/COMPLEMENTARY_INFO/ADDRESS_REVIEW_INFO" ;
            rml:referenceFormulation ql:XPath
        ] ;
    rr:subjectMap
        [
            rr:template
                "http://data.europa.eu/a4g/resource/ReviewProcedureInformationProvider/{replace(replace(/TED_EXPORT/CODED_DATA_SECTION/NOTICE_DATA/NO_DOC_OJS, ' ', '-' ), '/' , '-')}/{substring-before(substring-after(unparsed-text('https://www.uuidtools.com/api/generate/v3/namespace/ns:url/name/' || count(preceding::*)+1),'[\"'),'\"]')}" ;
            rr:class epo:ReviewProcedureInformationProvider

        ] ;
    rr:predicateObjectMap
        [
            rr:predicate epo:IsRoleOf ;
            rr:objectMap
                [
                    rr:parentTriplesMap <#ReviewProcedureInformationProviderOrganisation> # to change when organisationReviewProcedureInformationProvider is created
                ] ;
        ] .
<#ReviewProcedureInformationProviderOrganisation> a rr:TriplesMap ;
    rml:logicalSource
        [
            rml:source "source.xml" ;
            rml:iterator "/TED_EXPORT/FORM_SECTION/F03_2014/COMPLEMENTARY_INFO/ADDRESS_REVIEW_INFO" ;
            rml:referenceFormulation ql:XPath
        ] ;
    rr:subjectMap
        [
            rr:template
                "http://data.europa.eu/a4g/resource/ReviewProcedureInformationProviderOrganisation/{replace(replace(/TED_EXPORT/CODED_DATA_SECTION/NOTICE_DATA/NO_DOC_OJS, ' ', '-' ), '/' , '-')}/{substring-before(substring-after(unparsed-text('https://www.uuidtools.com/api/generate/v3/namespace/ns:url/name/' || count(preceding::*)+1),'[\"'),'\"]')}" ;
            rr:class epo:Organisation

        ] ;
    rr:predicateObjectMap
        [
            rr:predicate epo:hasDefaultContactPoint ;
            rr:objectMap
                [
                    rr:parentTriplesMap <#ReviewProcedureInformationProviderContactPoint>
                ] ;
        ] ;
    rr:predicateObjectMap
        [
        rr:predicate epo:hasName ;
        rr:objectMap
                [
                    rml:reference "OFFICIALNAME"
                ]
        ] ;
    rr:predicateObjectMap
        [
            rr:predicate epo:hasRegisteredAddress ;
            rr:objectMap
                [
                    rr:parentTriplesMap <#ReviewProcedureInformationProviderOrganisationAddress>
                ]
        ] ;


    rr:predicateObjectMap
        [
            rr:predicate epo:hasID;
            rr:objectMap
                [
                    rr:parentTriplesMap <#ReviewProcedureInformationProviderOrganisationIdentifier>
                ]
        ] .
<#ReviewProcedureInformationProviderOrganisationIdentifier> a rr:TripleMap ;
    rml:logicalSource
        [
            rml:source "source.xml" ;
            rml:iterator "/TED_EXPORT/FORM_SECTION/F03_2014/COMPLEMENTARY_INFO/ADDRESS_REVIEW_INFO";
            rml:referenceFormulation ql:XPath
        ];
    rr:subjectMap
        [
            rr:template "http://data.europa.eu/a4g/resource/ReviewProcedureInformationProviderOrganisationIdentifier/{replace(replace(/TED_EXPORT/CODED_DATA_SECTION/NOTICE_DATA/NO_DOC_OJS, ' ', '-' ), '/' , '-')}/{substring-before(substring-after(unparsed-text('https://www.uuidtools.com/api/generate/v3/namespace/ns:url/name/' || count(preceding::*)+1),'[\"'),'\"]')}" ;
            rr:class epo:Identifier
        ] ;
    rr:predicateObjectMap
        [
            rr:predicate epo:hasIdentifierValue;
            rr:objectMap
                [
                    rml:reference "NATIONALID"
                ]
        ] .
<#ReviewProcedureInformationProviderContactPoint> a rr:TriplesMap ;
    rml:logicalSource
        [
            rml:source "source.xml" ;
            rml:iterator "/TED_EXPORT/FORM_SECTION/F03_2014/COMPLEMENTARY_INFO/ADDRESS_REVIEW_INFO";
            rml:referenceFormulation ql:XPath
        ] ;
    rr:subjectMap
        [
            rr:template
                "http://data.europa.eu/a4g/resource/ReviewProcedureInformationProviderContactPoint/{replace(replace(/TED_EXPORT/CODED_DATA_SECTION/NOTICE_DATA/NO_DOC_OJS, ' ', '-' ), '/' , '-')}/{substring-before(substring-after(unparsed-text('https://www.uuidtools.com/api/generate/v3/namespace/ns:url/name/' || count(preceding::*)+1),'[\"'),'\"]')}" ;
            rr:class epo:ContactPoint

        ] ;
    rr:predicateObjectMap
        [
            rr:predicate epo:hasEmail ;
            rr:objectMap
                [
                    rml:reference "E_MAIL"
                ] ;
        ] ;
    rr:predicateObjectMap
        [
            rr:predicate epo:hasFax ;
            rr:objectMap
                [
                    rml:reference "FAX"
                ]
        ] ;
    rr:predicateObjectMap
        [
            rr:predicate epo:hasChannel ;
            rr:objectMap
                [
                    rr:parentTriplesMap <#ReviewProcedureInformationProviderOrganisationChannel>
                ]
        ] ;

    rr:predicateObjectMap
        [
            rr:predicate epo:hasTelephone ;
            rr:objectMap
                [
                    rml:reference "PHONE"
                ]
        ] ;
    rr:predicateObjectMap
        [
            rr:predicate epo:hasDescription ;
            rr:objectMap
                [
                    rml:reference "CONTACT_POINT"
                ]
        ] .
<#ReviewProcedureInformationProviderOrganisationAddress> a rr:TriplesMap ;
    rml:logicalSource
        [
            rml:source "source.xml" ;
            rml:iterator "/TED_EXPORT/FORM_SECTION/F03_2014/COMPLEMENTARY_INFO/ADDRESS_REVIEW_INFO";
            rml:referenceFormulation ql:XPath
        ] ;
    rr:subjectMap
        [
            rr:template
                "http://locn/ontology#Address/{replace(replace(/TED_EXPORT/CODED_DATA_SECTION/NOTICE_DATA/NO_DOC_OJS, ' ', '-' ), '/' , '-')}/{substring-before(substring-after(unparsed-text('https://www.uuidtools.com/api/generate/v3/namespace/ns:url/name/' || count(preceding::*)+1),'[\"'),'\"]')}" ;
            rr:class locn:Address

        ] ;
    rr:predicateObjectMap
        [
            rr:predicate epo:postName ;
            rr:objectMap
                [
                    rml:reference "TOWN"
                ] ;
        ] ;
    rr:predicateObjectMap
        [
            rr:predicate epo:thoroughfare ;
            rr:objectMap
                [
                    rml:reference "ADDRESS"
                ] ;
        ] ;
    rr:predicateObjectMap
        [
            rr:predicate epo:postCode ;
            rr:objectMap
                [
                    rml:reference "POSTAL_CODE"
                ] ;
        ] ;
    rr:predicateObjectMap
        [
            rr:predicate locn:adminUnitL1 ;
            rr:objectMap
                [
                    rr:parentTriplesMap <#nuts>;
                    rr:joinCondition [
                        rr:child "*:NUTS/@CODE";
                        rr:parent "code.value";
                    ];
                ] ;
        ] ;
    rr:predicateObjectMap
        [
            rr:predicate locn:adminUnitL2 ;
            rr:objectMap
                [
                    rr:parentTriplesMap <#countries>;
                    rr:joinCondition [
                        rr:child "COUNTRY/@VALUE";
                        rr:parent "code.value";
                    ];
                ] ;
        ] .

<#ReviewProcedureInformationProviderOrganisationChannel> a rr:TriplesMap ;
    rml:logicalSource
        [
            rml:source "source.xml" ;
            rml:iterator "/TED_EXPORT/FORM_SECTION/F03_2014/COMPLEMENTARY_INFO/ADDRESS_REVIEW_INFO";
            rml:referenceFormulation ql:XPath
        ] ;
    rr:subjectMap
        [
            rr:template
                "http://data.europa.eu/a4g/resource/ReviewProcedureInformationProviderOrganisationChannel/{replace(replace(/TED_EXPORT/CODED_DATA_SECTION/NOTICE_DATA/NO_DOC_OJS, ' ', '-' ), '/' , '-')}/{substring-before(substring-after(unparsed-text('https://www.uuidtools.com/api/generate/v3/namespace/ns:url/name/' || count(preceding::*)+1),'[\"'),'\"]')}" ;
            rr:class epo:Channel

        ] ;
    rr:predicateObjectMap
        [
            rr:predicate epo:hasUrl ;
            rr:objectMap
                [
                    rml:reference "URL"
                ] ;
        ] .
<#SubmissionStatisticalInformation> a rr:TripleMap ;
    rml:logicalSource
        [
            rml:source "source.xml" ;
            rml:iterator "/TED_EXPORT/FORM_SECTION/F03_2014/AWARD_CONTRACT/AWARDED_CONTRACT/TENDERS" ;
            rml:referenceFormulation ql:XPath
        ] ;
    rr:subjectMap
        [
            rr:template
                "http://data.europa.eu/a4g/resource/SubmissionStatisticalInformation/{replace(replace(/TED_EXPORT/CODED_DATA_SECTION/NOTICE_DATA/NO_DOC_OJS, ' ', '-' ), '/' , '-')}/{substring-before(substring-after(unparsed-text('https://www.uuidtools.com/api/generate/v3/namespace/ns:url/name/' || count(preceding::*)+1),'[\"'),'\"]')}" ;
            rr:class epo:SubmissionStatisticalInformation

        ] ;
    rr:predicateObjectMap
        [
            rr:predicate epo:hasReceivedTenders;
            rr:objectMap
                [
                    rml:reference "NB_TENDERS_RECEIVED"
                ]
        ] ;
    rr:predicateObjectMap
        [
            rr:predicate epo:hasReceivedSMETenders;
            rr:objectMap
                [
                    rml:reference "NB_TENDERS_RECEIVED_SME"
                ]
        ] ;
    rr:predicateObjectMap
        [
            rr:predicate epo:hasReceivedNonEEATender;
            rr:objectMap
                [
                    rml:reference "NB_TENDERS_RECEIVED_NON_EU"
                ]
        ] ;
    rr:predicateObjectMap
        [
            rr:predicate epo:hasElectronicTenders;
            rr:objectMap
                [
                    rml:reference "NB_TENDERS_RECEIVED_EMEANS"
                ]
        ] ;
    rr:predicateObjectMap
        [
            rr:predicate epo:hasLowestReceivedTenderLotValues ;
            rr:objectMap
                [
                    rr:parentTriplesMap <#MonetaryValueSubmissionLowest>
                ] ;
        ] ;
    rr:predicateObjectMap
        [
            rr:predicate epo:hasHighestReceivedTenderLotValues ;
            rr:objectMap
                [
                    rr:parentTriplesMap <#MonetaryValueSubmissionHighest>
                ] ;
        ] ;
    rr:predicateObjectMap
        [
            rr:predicate epo:concernsSubmissionsFor ;
            rr:objectMap
                [
                    rr:parentTriplesMap <#Lot>
                ] ;
        ] ;
    rr:predicateObjectMap
        [
            rr:predicate epo:hasEEAReceivedTenders;
            rr:objectMap
                [
                    rml:reference "NB_TENDERS_RECEIVED_OTHER_EU";
                    rr:datatype xsd:date
                ]
        ] .
<#MonetaryValueSubmissionHighest> a rr:TriplesMap ;
    rml:logicalSource
        [
            rml:source "source.xml" ;
            rml:iterator "/TED_EXPORT/FORM_SECTION/F03_2014/AWARD_CONTRACT/AWARDED_CONTRACT/VALUES/VAL_RANGE_TOTAL" ;
            rml:referenceFormulation ql:XPath
        ] ;
    rr:subjectMap
        [
            rr:template
                "http://data.europa.eu/a4g/resource/MonetaryValueSubmissionHighest/{replace(replace(/TED_EXPORT/CODED_DATA_SECTION/NOTICE_DATA/NO_DOC_OJS, ' ', '-' ), '/' , '-')}/{substring-before(substring-after(unparsed-text('https://www.uuidtools.com/api/generate/v3/namespace/ns:url/name/' || count(preceding::*)+1),'[\"'),'\"]')}" ;
            rr:class epo:MonetaryValue

        ] ;
    rr:predicateObjectMap
        [
            rr:predicate epo:hasAmountValue ;
            rr:objectMap
                [
                    rml:reference "HIGH";
                ] ;
        ] .
<#MonetaryValueSubmissionLowest> a rr:TriplesMap ;
    rml:logicalSource
        [
            rml:source "source.xml" ;
            rml:iterator "/TED_EXPORT/FORM_SECTION/F03_2014/AWARD_CONTRACT/AWARDED_CONTRACT/VALUES/VAL_RANGE_TOTAL" ;
            rml:referenceFormulation ql:XPath
        ] ;
    rr:subjectMap
        [
            rr:template
                "http://data.europa.eu/a4g/resource/MonetaryValueSubmissionLowest/{replace(replace(/TED_EXPORT/CODED_DATA_SECTION/NOTICE_DATA/NO_DOC_OJS, ' ', '-' ), '/' , '-')}/{substring-before(substring-after(unparsed-text('https://www.uuidtools.com/api/generate/v3/namespace/ns:url/name/' || count(preceding::*)+1),'[\"'),'\"]')}" ;
            rr:class epo:MonetaryValue

        ] ;
    rr:predicateObjectMap
        [
            rr:predicate epo:hasAmountValue ;
            rr:objectMap
                [
                    rml:reference "LOW";
                ] ;
        ] .
<#Contract> a rr:TripleMap ;
    rml:logicalSource
        [
            rml:source "source.xml" ;
            rml:iterator "/TED_EXPORT/FORM_SECTION/F03_2014/AWARD_CONTRACT" ;
            rml:referenceFormulation ql:XPath
        ] ;
    rr:subjectMap
        [
            rr:template
                "http://data.europa.eu/a4g/resource/Contract/{replace(replace(/TED_EXPORT/CODED_DATA_SECTION/NOTICE_DATA/NO_DOC_OJS, ' ', '-' ), '/' , '-')}/{substring-before(substring-after(unparsed-text('https://www.uuidtools.com/api/generate/v3/namespace/ns:url/name/' || count(preceding::*)+1),'[\"'),'\"]')}" ;
            rr:class epo:Contract

        ] ;
    rr:predicateObjectMap
        [
            rr:predicate epo:hasID;
            rr:objectMap
                [
                    rr:parentTriplesMap <#ContractIdentifier>
                ]
        ] ;
    rr:predicateObjectMap
        [
            rr:predicate epo:includesLotAwardOutcome;
            rr:objectMap
                [
                    rr:parentTriplesMap <#LotAwardOutcome>
                ]
        ] ;
    rr:predicateObjectMap
        [
            rr:predicate epo:hasTitle;
            rr:objectMap
                [
                    rml:reference "TITLE"
                ]
        ] ;
    rr:predicateObjectMap
        [
            rr:predicate epo:hasContractConclusionDate;
            rr:objectMap
                [
                    rml:reference "AWARDED_CONTRACT/DATE_CONCLUSION_CONTRACT";
                    rr:datatype xsd:date
                ]
        ] .
<#LotAwardOutcome> a rr:TripleMap ;
    rml:logicalSource
        [
            rml:source "source.xml" ;
            rml:iterator "/TED_EXPORT/FORM_SECTION/F03_2014/AWARD_CONTRACT";
            rml:referenceFormulation ql:XPath
        ];
    rr:subjectMap
        [
            rr:template "http://data.europa.eu/a4g/resource/LotAwardOutcome/{replace(replace(/TED_EXPORT/CODED_DATA_SECTION/NOTICE_DATA/NO_DOC_OJS, ' ', '-' ), '/' , '-')}/{substring-before(substring-after(unparsed-text('https://www.uuidtools.com/api/generate/v3/namespace/ns:url/name/' || count(preceding::*)+1),'[\"'),'\"]')}" ;
            rr:class epo:LotAwardOutcome
        ] ;
    rr:predicateObjectMap
        [
            rr:predicate epo:hasAdditionalNonAwardJustification;
            rr:objectMap
                [
                    rml:reference "NO_AWARDED_CONTRACT/PROCUREMENT_UNSUCCESSFUL"
                ]
        ] ;
    rr:predicateObjectMap
        [
            rr:predicate epo:hasNonAwardJustification;
            rr:objectMap
                [
                    rml:reference "if(exists(NO_AWARDED_CONTRACT/PROCUREMENT_UNSUCCESSFUL)) then 'http://publications.europa.eu/resource/authority/non-award-justification/all-rej' else if(exists(NO_AWARDED_CONTRACT/PROCUREMENT_DISCONTINUED)) then 'http://publications.europa.eu/resource/authority/non-award-justification/other' else null";
                    rr:termType rr:IRI;
                ]
        ] .
<#ContractIdentifier> a rr:TripleMap ;
    rml:logicalSource
        [
            rml:source "source.xml" ;
            rml:iterator "/TED_EXPORT/FORM_SECTION/F03_2014/AWARD_CONTRACT";
            rml:referenceFormulation ql:XPath
        ];
    rr:subjectMap
        [
            rr:template "http://data.europa.eu/a4g/resource/ContractIdentifier/{replace(replace(/TED_EXPORT/CODED_DATA_SECTION/NOTICE_DATA/NO_DOC_OJS, ' ', '-' ), '/' , '-')}/{substring-before(substring-after(unparsed-text('https://www.uuidtools.com/api/generate/v3/namespace/ns:url/name/' || count(preceding::*)+1),'[\"'),'\"]')}" ;
            rr:class epo:Identifier
        ] ;
    rr:predicateObjectMap
        [
            rr:predicate epo:hasIdentifierValue;
            rr:objectMap
                [
                    rml:reference "CONTRACT_NO"
                ]
        ] .
<#ContractSignatoryonContractorSide> a rr:TripleMap ;
    rml:logicalSource
        [
            rml:source "source.xml" ;
            rml:iterator "/TED_EXPORT/FORM_SECTION/F03_2014/AWARD_CONTRACT/AWARDED_CONTRACT/CONTRACTORS/CONTRACTOR" ;
            rml:referenceFormulation ql:XPath
        ] ;
    rr:subjectMap
        [
            rr:template
                "http://data.europa.eu/a4g/resource/ContractSignatoryOnContractorSide/{replace(replace(/TED_EXPORT/CODED_DATA_SECTION/NOTICE_DATA/NO_DOC_OJS, ' ', '-' ), '/' , '-')}/{substring-before(substring-after(unparsed-text('https://www.uuidtools.com/api/generate/v3/namespace/ns:url/name/' || count(preceding::*)+1),'[\"'),'\"]')}" ;
            rr:class epo:ContractSignatoryOnContractorSide

        ] ;
    rr:predicateObjectMap
        [
            rr:predicate epo:IsRoleOf ;
            rr:objectMap
                [
                    rr:parentTriplesMap <#ContractOrganisation> # to change when the organisationcontract is defined
                ] ;
        ] .
<#ContractOrganisation> a rr:TriplesMap ;
    rml:logicalSource
        [
            rml:source "source.xml" ;
            rml:iterator "/TED_EXPORT/FORM_SECTION/F03_2014/AWARD_CONTRACT/AWARDED_CONTRACT/CONTRACTORS/CONTRACTOR" ;
            rml:referenceFormulation ql:XPath
        ] ;
    rr:subjectMap
        [
            rr:template
                "http://data.europa.eu/a4g/resource/ContractOrganisation/{replace(replace(/TED_EXPORT/CODED_DATA_SECTION/NOTICE_DATA/NO_DOC_OJS, ' ', '-' ), '/' , '-')}/{substring-before(substring-after(unparsed-text('https://www.uuidtools.com/api/generate/v3/namespace/ns:url/name/' || count(preceding::*)+1),'[\"'),'\"]')}" ;
            rr:class epo:Organisation

        ] ;
    rr:predicateObjectMap
        [
            rr:predicate epo:hasDefaultContactPoint ;
            rr:objectMap
                [
                    rr:parentTriplesMap <#ContractContactPoint>
                ] ;
        ] ;
    rr:predicateObjectMap
        [
        rr:predicate epo:hasName ;
        rr:objectMap
                [
                    rml:reference "ADDRESS_CONTRACTOR/OFFICIALNAME"
                ]
        ] ;
    rr:predicateObjectMap
        [
            rr:predicate epo:hasRegisteredAddress ;
            rr:objectMap
                [
                    rr:parentTriplesMap <#ContractOrganisationAddress>
                ]
        ] ;


    rr:predicateObjectMap
        [
            rr:predicate epo:hasID;
            rr:objectMap
                [
                    rr:parentTriplesMap <#ContractOrganisationIdentifier>
                ]
        ] .
<#ContractOrganisationIdentifier> a rr:TripleMap ;
    rml:logicalSource
        [
            rml:source "source.xml" ;
            rml:iterator "/TED_EXPORT/FORM_SECTION/F03_2014/AWARD_CONTRACT/AWARDED_CONTRACT/CONTRACTORS/CONTRACTOR/ADDRESS_CONTRACTOR";
            rml:referenceFormulation ql:XPath
        ];
    rr:subjectMap
        [
            rr:template "http://data.europa.eu/a4g/resource/ContractOrganisationIdentifier/{replace(replace(/TED_EXPORT/CODED_DATA_SECTION/NOTICE_DATA/NO_DOC_OJS, ' ', '-' ), '/' , '-')}/{substring-before(substring-after(unparsed-text('https://www.uuidtools.com/api/generate/v3/namespace/ns:url/name/' || count(preceding::*)+1),'[\"'),'\"]')}" ;
            rr:class epo:Identifier
        ] ;
    rr:predicateObjectMap
        [
            rr:predicate epo:hasIdentifierValue;
            rr:objectMap
                [
                    rml:reference "NATIONALID"
                ]
        ] .
<#ContractContactPoint> a rr:TriplesMap ;
    rml:logicalSource
        [
            rml:source "source.xml" ;
            rml:iterator "/TED_EXPORT/FORM_SECTION/F03_2014/AWARD_CONTRACT/AWARDED_CONTRACT/CONTRACTORS/CONTRACTOR/ADDRESS_CONTRACTOR" ;
            rml:referenceFormulation ql:XPath
        ] ;
    rr:subjectMap
        [
            rr:template
                "http://data.europa.eu/a4g/resource/ContractContactPoint/{replace(replace(/TED_EXPORT/CODED_DATA_SECTION/NOTICE_DATA/NO_DOC_OJS, ' ', '-' ), '/' , '-')}/{substring-before(substring-after(unparsed-text('https://www.uuidtools.com/api/generate/v3/namespace/ns:url/name/' || count(preceding::*)+1),'[\"'),'\"]')}" ;
            rr:class epo:ContactPoint

        ] ;
    rr:predicateObjectMap
        [
            rr:predicate epo:hasEmail ;
            rr:objectMap
                [
                    rml:reference "E_MAIL"
                ] ;
        ] ;
    rr:predicateObjectMap
        [
            rr:predicate epo:hasFax ;
            rr:objectMap
                [
                    rml:reference "FAX"
                ]
        ] ;
    rr:predicateObjectMap
        [
            rr:predicate epo:hasChannel ;
            rr:objectMap
                [
                    rr:parentTriplesMap <#ContractOrganisationChannel>
                ]
        ] ;

    rr:predicateObjectMap
        [
            rr:predicate epo:hasTelephone ;
            rr:objectMap
                [
                    rml:reference "PHONE"
                ]
        ] ;
    rr:predicateObjectMap
        [
            rr:predicate epo:hasDescription ;
            rr:objectMap
                [
                    rml:reference "CONTACT_POINT"
                ]
        ] .
<#ContractOrganisationAddress> a rr:TriplesMap ;
    rml:logicalSource
        [
            rml:source "source.xml" ;
            rml:iterator "/TED_EXPORT/FORM_SECTION/F03_2014/AWARD_CONTRACT/AWARDED_CONTRACT/CONTRACTORS/CONTRACTOR/ADDRESS_CONTRACTOR" ;
            rml:referenceFormulation ql:XPath
        ] ;
    rr:subjectMap
        [
            rr:template
                "http://locn/ontology#Address/{replace(replace(/TED_EXPORT/CODED_DATA_SECTION/NOTICE_DATA/NO_DOC_OJS, ' ', '-' ), '/' , '-')}/{substring-before(substring-after(unparsed-text('https://www.uuidtools.com/api/generate/v3/namespace/ns:url/name/' || count(preceding::*)+1),'[\"'),'\"]')}" ;
            rr:class locn:Address

        ] ;
    rr:predicateObjectMap
        [
            rr:predicate epo:postName ;
            rr:objectMap
                [
                    rml:reference "TOWN"
                ] ;
        ] ;
    rr:predicateObjectMap
        [
            rr:predicate epo:thoroughfare ;
            rr:objectMap
                [
                    rml:reference "ADDRESS"
                ] ;
        ] ;
    rr:predicateObjectMap
        [
            rr:predicate epo:postCode ;
            rr:objectMap
                [
                    rml:reference "POSTAL_CODE"
                ] ;
        ] ;
    rr:predicateObjectMap
        [
            rr:predicate locn:adminUnitL1 ;
            rr:objectMap
                [
                    rr:parentTriplesMap <#nuts>;
                    rr:joinCondition [
                        rr:child "*:NUTS/@CODE";
                        rr:parent "code.value";
                    ];
                ] ;
        ] ;
    rr:predicateObjectMap
        [
            rr:predicate locn:adminUnitL2 ;
            rr:objectMap
                [
                    rr:parentTriplesMap <#countries>;
                    rr:joinCondition [
                        rr:child "COUNTRY/@VALUE";
                        rr:parent "code.value";
                    ];
                ] ;
        ] .

<#ContractOrganisationChannel> a rr:TriplesMap ;
    rml:logicalSource
        [
            rml:source "source.xml" ;
            rml:iterator "/TED_EXPORT/FORM_SECTION/F03_2014/AWARD_CONTRACT/AWARDED_CONTRACT/CONTRACTORS/CONTRACTOR/ADDRESS_CONTRACTOR" ;
            rml:referenceFormulation ql:XPath
        ] ;
    rr:subjectMap
        [
            rr:template
                "http://data.europa.eu/a4g/resource/ContractOrganisationChannel/{replace(replace(/TED_EXPORT/CODED_DATA_SECTION/NOTICE_DATA/NO_DOC_OJS, ' ', '-' ), '/' , '-')}/{substring-before(substring-after(unparsed-text('https://www.uuidtools.com/api/generate/v3/namespace/ns:url/name/' || count(preceding::*)+1),'[\"'),'\"]')}" ;
            rr:class epo:Channel

        ] ;
    rr:predicateObjectMap
        [
            rr:predicate epo:hasUrl ;
            rr:objectMap
                [
                    rml:reference "URL_GENERAL"
                ] ;
        ] .
<#Tender> a rr:TripleMap ;
    rml:logicalSource
        [
            rml:source "source.xml" ;
            rml:iterator "/TED_EXPORT/FORM_SECTION/F03_2014/AWARD_CONTRACT/AWARDED_CONTRACT/VALUES/VAL_TOTAL" ;
            rml:referenceFormulation ql:XPath
        ] ;
    rr:subjectMap
        [
            rr:template
                "http://data.europa.eu/a4g/resource/Tender/{replace(replace(/TED_EXPORT/CODED_DATA_SECTION/NOTICE_DATA/NO_DOC_OJS, ' ', '-' ), '/' , '-')}/{substring-before(substring-after(unparsed-text('https://www.uuidtools.com/api/generate/v3/namespace/ns:url/name/' || count(preceding::*)+1),'[\"'),'\"]')}" ;
            rr:class epo:Tender

        ] ;
    rr:predicateObjectMap
        [
            rr:predicate epo:hasFinnancialOfferValue ;
            rr:objectMap
                [
                    rr:parentTriplesMap <#TenderMonetaryValue>
                ] ;
        ] .
<#TenderMonetaryValue> a rr:TriplesMap ;
    rml:logicalSource
        [
            rml:source "source.xml" ;
            rml:iterator "/TED_EXPORT/FORM_SECTION/F03_2014/AWARD_CONTRACT/AWARDED_CONTRACT/VALUES" ;
            rml:referenceFormulation ql:XPath
        ] ;
    rr:subjectMap
        [
            rr:template
                "http://data.europa.eu/a4g/resource/TenderMonetaryValue/{replace(replace(/TED_EXPORT/CODED_DATA_SECTION/NOTICE_DATA/NO_DOC_OJS, ' ', '-' ), '/' , '-')}/{substring-before(substring-after(unparsed-text('https://www.uuidtools.com/api/generate/v3/namespace/ns:url/name/' || count(preceding::*)+1),'[\"'),'\"]')}" ;
            rr:class epo:MonetaryValue

        ] ;
    rr:predicateObjectMap
        [
            rr:predicate epo:hasAmountValue ;
            rr:objectMap
                [
                    rml:reference "VAL_TOTAL";
                ] ;
        ] .

<#AwardCriterionQuality> a rr:TripleMap ;
    rml:logicalSource
        [
            rml:source "source.xml" ;
            rml:iterator "/TED_EXPORT/FORM_SECTION/F03_2014/OBJECT_CONTRACT/OBJECT_DESCR/AC/AC_QUALITY" ;
            rml:referenceFormulation ql:XPath
        ] ;
    rr:subjectMap
        [
            rr:template
                "http://data.europa.eu/a4g/resource/AwardCriterionQuality/{replace(replace(/TED_EXPORT/CODED_DATA_SECTION/NOTICE_DATA/NO_DOC_OJS, ' ', '-' ), '/' , '-')}/{substring-before(substring-after(unparsed-text('https://www.uuidtools.com/api/generate/v3/namespace/ns:url/name/' || count(preceding::*)+1),'[\"'),'\"]')}" ;
            rr:class epo:AwardCriterion

        ] ;
    rr:predicateObjectMap
        [
            rr:predicate epo:isUsedToAward ;
            rr:objectMap
                [
                    rr:parentTriplesMap <#Lot>
                ] ;
        ] ;
    rr:predicateObjectMap
        [
            rr:predicate epo:hasAwardCriterionType ;
            rr:objectMap
                [
                    rr:template "http://publications.europa.eu/resource/authority/award-criterion-type/quality";
                    rr:termType rr:IRI
                ] ;
        ];
    rr:predicateObjectMap
        [
            rr:predicate epo:hasName ;
            rr:objectMap
                [
                    rml:reference "AC_CRITERION";
                ] ;
        ] ;
    rr:predicateObjectMap
        [
            rr:predicate epo:hasFormula ;
            rr:objectMap
                [
                    rml:reference "AC_WEIGHTING";
                ] ;
        ] .
<#AwardCriterionPrice> a rr:TripleMap ;
    rml:logicalSource
        [
            rml:source "source.xml" ;
            rml:iterator "/TED_EXPORT/FORM_SECTION/F03_2014/OBJECT_CONTRACT/OBJECT_DESCR/AC/AC_PRICE" ;
            rml:referenceFormulation ql:XPath
        ] ;
    rr:subjectMap
        [
            rr:template
                "http://data.europa.eu/a4g/resource/AwardCriterionPrice/{replace(replace(/TED_EXPORT/CODED_DATA_SECTION/NOTICE_DATA/NO_DOC_OJS, ' ', '-' ), '/' , '-')}/{substring-before(substring-after(unparsed-text('https://www.uuidtools.com/api/generate/v3/namespace/ns:url/name/' || count(preceding::*)+1),'[\"'),'\"]')}" ;
            rr:class epo:AwardCriterion

        ] ;
    rr:predicateObjectMap
        [
            rr:predicate epo:isUsedToAward ;
            rr:objectMap
                [
                    rr:parentTriplesMap <#Lot>
                ] ;
        ] ;
    rr:predicateObjectMap
        [
            rr:predicate epo:hasAwardCriterionType ;
            rr:objectMap
                [
                    rr:template "http://publications.europa.eu/resource/authority/award-criterion-type/price";
                    rr:termType rr:IRI
                ] ;
        ] ;
    rr:predicateObjectMap
        [
            rr:predicate epo:hasName ;
            rr:objectMap
                [
                    rml:reference "AC_CRITERION";
                ] ;
        ] ;
    rr:predicateObjectMap
        [
            rr:predicate epo:hasFormula ;
            rr:objectMap
                [
                    rml:reference "AC_WEIGHTING";
                ] ;
        ] .
<#AwardCriterionCost> a rr:TripleMap ;
    rml:logicalSource
        [
            rml:source "source.xml" ;
            rml:iterator "/TED_EXPORT/FORM_SECTION/F03_2014/OBJECT_CONTRACT/OBJECT_DESCR/AC/AC_COST" ;
            rml:referenceFormulation ql:XPath
        ] ;
    rr:subjectMap
        [
            rr:template
                "http://data.europa.eu/a4g/resource/AwardCriterionCost/{replace(replace(/TED_EXPORT/CODED_DATA_SECTION/NOTICE_DATA/NO_DOC_OJS, ' ', '-' ), '/' , '-')}/{substring-before(substring-after(unparsed-text('https://www.uuidtools.com/api/generate/v3/namespace/ns:url/name/' || count(preceding::*)+1),'[\"'),'\"]')}" ;
            rr:class epo:AwardCriterion

        ] ;
    rr:predicateObjectMap
        [
            rr:predicate epo:isUsedToAward ;
            rr:objectMap
                [
                    rr:parentTriplesMap <#Lot>
                ] ;
        ] ;
    rr:predicateObjectMap
        [
            rr:predicate epo:hasAwardCriterionType ;
            rr:objectMap
                [
                    rr:template "http://publications.europa.eu/resource/authority/award-criterion-type/cost";
                    rr:termType rr:IRI
                ] ;
        ] ;
    rr:predicateObjectMap
        [
            rr:predicate epo:hasName ;
            rr:objectMap
                [
                    rml:reference "AC_CRITERION";
                ] ;
        ] ;
    rr:predicateObjectMap
        [
            rr:predicate epo:hasFormula ;
            rr:objectMap
                [
                    rml:reference "AC_WEIGHTING";
                ] ;
        ] .
<#Procedure> a rr:TriplesMap ;
    rml:logicalSource
        [
            rml:source "source.xml" ;
            rml:iterator "/TED_EXPORT/FORM_SECTION/F03_2014/OBJECT_CONTRACT" ;
            rml:referenceFormulation ql:XPath
        ] ;
    rr:subjectMap
        [
            rr:template
                "http://data.europa.eu/a4g/resource/Procedure/{replace(replace(/TED_EXPORT/CODED_DATA_SECTION/NOTICE_DATA/NO_DOC_OJS, ' ', '-' ), '/' , '-')}/{substring-before(substring-after(unparsed-text('https://www.uuidtools.com/api/generate/v3/namespace/ns:url/name/' || count(preceding::*)+1),'[\"'),'\"]')}" ;
            rr:class epo:Procedure

        ] ;
    rr:predicateObjectMap
        [
            rr:predicate epo:hasDescription ;
            rr:objectMap
                [
                    rml:reference "SHORT_DESCR"
                ] ;
        ] ;
    rr:predicateObjectMap
        [
            rr:predicate epo:hasID;
            rr:objectMap
                [
                    rr:parentTriplesMap <#ProcedureIdentifier>
                ]
        ] ;
    rr:predicateObjectMap
        [
            rr:predicate epo:comprisesLot;
            rr:objectMap
                [
                    rr:parentTriplesMap <#Lot>
                ]
        ] ;
    rr:predicateObjectMap
        [
            rr:predicate epo:hasOverallPurpose ;
            rr:objectMap
                [
                    rr:parentTriplesMap <#Purpose>
                ] ;
        ] ;
    rr:predicateObjectMap
        [
            rr:predicate epo:hasEstimatedValue ;
            rr:objectMap
                [
                    rr:parentTriplesMap <#ProcedureMonetaryValue>
                ] ;
        ] ;
    rr:predicateObjectMap
        [
            rr:predicate epo:hasProcedureType ;
            rr:objectMap
                [
                    rml:reference "if(exists(/TED_EXPORT/FORM_SECTION/F03_2014/PROCEDURE/PT_OPEN)) then 'http://publications.europa.eu/resource/authority/procurement-procedure-type/open' else if(exists(/TED_EXPORT/FORM_SECTION/F03_2014/PROCEDURE/PT_RESTRICTED)) then 'http://publications.europa.eu/resource/authority/procurement-procedure-type/restricted' else if(exists(/TED_EXPORT/FORM_SECTION/F03_2014/PROCEDURE/PT_COMPETITIVE_NEGOTIATION)) then 'http://publications.europa.eu/resource/authority/procurement-procedure-type/neg-w-call' else if(exists(/TED_EXPORT/FORM_SECTION/F03_2014/PROCEDURE/PT_COMPETITIVE_DIALOGUE)) then 'http://publications.europa.eu/resource/authority/procurement-procedure-type/comp-dial' else null";
                    rr:termType rr:IRI
                ] ;
        ] ;
    rr:predicateObjectMap
        [
            rr:predicate epo:hasTitle ;
            rr:objectMap
                [
                    rml:reference "TITLE"
                ] ;
        ] ;
    rr:predicateObjectMap
        [
            rr:predicate epo:hasAcceleratedProcedureJustification ;
            rr:objectMap
                [
                    rml:reference "/TED_EXPORT/FORM_SECTION/F03_2014/PROCEDURE/ACCELERATED_PROC/P"
                ] ;
        ] ;
    rr:predicateObjectMap
        [
            rr:predicate epo:hasCompetitionTermination ;
            rr:objectMap
                [
                    rml:reference "if(exists(/TED_EXPORT/FORM_SECTION/F03_2014/PROCEDURE/TERMINATION_PIN)) then 'true' else 'false'";
                    rr:datatype xsd:boolean
                ] ;
        ] ;
    rr:predicateObjectMap
        [
            rr:predicate epo:isAccelerated ;
            rr:objectMap
                [
                    rml:reference "if(exists(/TED_EXPORT/FORM_SECTION/F03_2014/PROCEDURE/ACCELERATED_PROC)) then 'true' else 'false'";
                    rr:datatype xsd:boolean
                ] ;
        ] .
<#Lot> a rr:TriplesMap ;
    rml:logicalSource
        [
            rml:source "source.xml" ;
            rml:iterator "/TED_EXPORT/FORM_SECTION/F03_2014/OBJECT_CONTRACT/OBJECT_DESCR" ;
            rml:referenceFormulation ql:XPath
        ] ;
    rr:subjectMap
        [
            rr:template
                "http://data.europa.eu/a4g/resource/Lot/{replace(replace(/TED_EXPORT/CODED_DATA_SECTION/NOTICE_DATA/NO_DOC_OJS, ' ', '-' ), '/' , '-')}/{substring-before(substring-after(unparsed-text('https://www.uuidtools.com/api/generate/v3/namespace/ns:url/name/' || count(preceding::*)+1),'[\"'),'\"]')}" ;
            rr:class epo:Lot

        ] ;
    rr:predicateObjectMap
        [
            rr:predicate epo:hasDescription ;
            rr:objectMap
                [
                    rml:reference "SHORT_DESCR"
                ]
        ] ;
    rr:predicateObjectMap
        [
            rr:predicate epo:hasID;
            rr:objectMap
                [
                    rr:parentTriplesMap <#LotIdentifier>
                ]
        ] ;
    rr:predicateObjectMap
        [
            rr:predicate epo:hasPurpose ;
            rr:objectMap
                [
                    rr:parentTriplesMap <#LotPurpose>
                ] ;
        ] ;
    rr:predicateObjectMap
        [
            rr:predicate epo:isSubjectToTerm ;
            rr:objectMap
                [
                    rr:parentTriplesMap <#ContractTerm>
                ] ;
        ] ;
    rr:predicateObjectMap
        [
            rr:predicate epo:isSubjectToTerm ;
            rr:objectMap
                [
                    rr:parentTriplesMap <#FramworkAgreement>
                ] ;
        ] ;
    rr:predicateObjectMap
        [
            rr:predicate epo:uses ;
            rr:objectMap
                [
                    rr:parentTriplesMap <#DynamicPurchaseSystemTechnique>
                ] ;
        ] ;
    rr:predicateObjectMap
        [
            rr:predicate epo:hasEstimatedValue ;
            rr:objectMap
                [
                    rr:parentTriplesMap <#LotMonetaryValue>
                ] ;
        ] ;
    rr:predicateObjectMap
        [
            rr:predicate epo:hasAdditionalInformation ;
            rr:objectMap
                [
                    rml:reference "/TED_EXPORT/FORM_SECTION/F03_2014/COMPLEMENTARY_INFO/INFO_ADD"
                ] ;
        ] ;
    rr:predicateObjectMap
        [
            rr:predicate epo:uses ;
            rr:objectMap
                [
                    rr:parentTriplesMap <#EauctionTechnique>
                ] ;
        ] .
<#LotMonetaryValue> a rr:TriplesMap ;
    rml:logicalSource
        [
            rml:source "source.xml" ;
            rml:iterator "/TED_EXPORT/FORM_SECTION/F03_2014/AWARD_CONTRACT/AWARDED_CONTRACT/VALUES" ;
            rml:referenceFormulation ql:XPath
        ] ;
    rr:subjectMap
        [
            rr:template
                "http://data.europa.eu/a4g/resource/MonetaryValueLot/{replace(replace(/TED_EXPORT/CODED_DATA_SECTION/NOTICE_DATA/NO_DOC_OJS, ' ', '-' ), '/' , '-')}/{substring-before(substring-after(unparsed-text('https://www.uuidtools.com/api/generate/v3/namespace/ns:url/name/' || count(preceding::*)+1),'[\"'),'\"]')}" ;
            rr:class epo:MonetaryValue

        ] ;
    rr:predicateObjectMap
        [
            rr:predicate epo:hasAmountValue ;
            rr:objectMap
                [
                    rml:reference "VAL_ESTIMATED_TOTAL";
                ] ;
        ] .
<#EauctionTechnique> a rr:TriplesMap ;
    rml:logicalSource
        [
            rml:source "source.xml" ;
            rml:iterator "/TED_EXPORT/FORM_SECTION/F03_2014/PROCEDURE" ;
            rml:referenceFormulation ql:XPath
        ] ;
    rr:subjectMap
        [
            rml:reference
                "if(exists(EAUCTION_USED)) then 'http://data.europa.eu/a4g/resource/EAuctionTechnique/' || replace(replace(/TED_EXPORT/CODED_DATA_SECTION/NOTICE_DATA/NO_DOC_OJS, ' ', '-' ), '/' , '-') || '/' || substring-before(substring-after(unparsed-text('https://www.uuidtools.com/api/generate/v3/namespace/ns:url/name/' || count(preceding::*)+1),'[\"'),'\"]') else null" ;
            rr:class epo:EAuctionTechnique

        ] .
<#DynamicPurchaseSystemTechnique> a rr:TriplesMap ;
    rml:logicalSource
        [
            rml:source "source.xml" ;
            rml:iterator "/TED_EXPORT/FORM_SECTION/F03_2014/PROCEDURE" ;
            rml:referenceFormulation ql:XPath
        ] ;
    rr:subjectMap
        [
            rml:reference
                "if(exists(DPS)) then 'http://data.europa.eu/a4g/resource/DynamicPurchaseSystemTechnique/' || replace(replace(/TED_EXPORT/CODED_DATA_SECTION/NOTICE_DATA/NO_DOC_OJS, ' ', '-' ), '/' , '-') || '/' || substring-before(substring-after(unparsed-text('https://www.uuidtools.com/api/generate/v3/namespace/ns:url/name/' || count(preceding::*)+1),'[\"'),'\"]') else null" ;
            rr:class epo:DynamicPurchaseSystemTechnique

        ] ;
    rr:predicateObjectMap
        [
            rr:predicate epo:hasDPSTermination ;
            rr:objectMap
                [
                    rml:reference "if(exists(TERMINATION_DPS)) then 'true' else 'false'";
                    rr:datatype xsd:boolean
                ] ;
        ] .
<#FramworkAgreement> a rr:TriplesMap ;
    rml:logicalSource
        [
            rml:source "source.xml" ;
            rml:iterator "/TED_EXPORT/FORM_SECTION/F03_2014/PROCEDURE" ;
            rml:referenceFormulation ql:XPath
        ] ;
    rr:subjectMap
        [
            rml:reference
                "if(exists(FRAMEWORK)) then 'http://data.europa.eu/a4g/resource/FrameworkAgreementTerm/' || replace(replace(/TED_EXPORT/CODED_DATA_SECTION/NOTICE_DATA/NO_DOC_OJS, ' ', '-' ), '/' , '-') || '/' || substring-before(substring-after(unparsed-text('https://www.uuidtools.com/api/generate/v3/namespace/ns:url/name/' || count(preceding::*)+1),'[\"'),'\"]') else null" ;
            rr:class epo:FrameworkAgreementTerm

        ] .
<#ContractTerm> a rr:TriplesMap ;
    rml:logicalSource
        [
            rml:source "source.xml" ;
            rml:iterator "/TED_EXPORT/FORM_SECTION/F03_2014/OBJECT_CONTRACT" ;
            rml:referenceFormulation ql:XPath
        ] ;
    rr:subjectMap
        [
            rr:template
                "http://data.europa.eu/a4g/resource/ContractTerm/{replace(replace(/TED_EXPORT/CODED_DATA_SECTION/NOTICE_DATA/NO_DOC_OJS, ' ', '-' ), '/' , '-')}/{substring-before(substring-after(unparsed-text('https://www.uuidtools.com/api/generate/v3/namespace/ns:url/name/' || count(preceding::*)+1),'[\"'),'\"]')}" ;
            rr:class epo:ContractTerm

        ] ;
    rr:predicateObjectMap
        [
            rr:predicate epo:hasSpecificPlaceOfPerformance ;
            rr:objectMap
                [
                    rr:parentTriplesMap <#ContractTermeLocation>;
                ] ;
        ] .
<#ContractTermeLocation> a rr:TriplesMap ;
    rml:logicalSource
        [
            rml:source "source.xml" ;
            rml:iterator "/TED_EXPORT/FORM_SECTION/F03_2014/OBJECT_CONTRACT/OBJECT_DESCR/*:NUTS" ;
            rml:referenceFormulation ql:XPath
        ] ;
    rr:subjectMap
        [
            rr:template
                "http://data.europa.eu/a4g/resource/ContractTermeLocation/{replace(replace(/TED_EXPORT/CODED_DATA_SECTION/NOTICE_DATA/NO_DOC_OJS, ' ', '-' ), '/' , '-')}/{substring-before(substring-after(unparsed-text('https://www.uuidtools.com/api/generate/v3/namespace/ns:url/name/' || count(preceding::*)+1),'[\"'),'\"]')}" ;
            rr:class dct:Location

        ] ;
    rr:predicateObjectMap
        [
            rr:predicate epo:hasNutsCode ;
            rr:objectMap
                [
                    rr:parentTriplesMap <#nuts>;
                    rr:joinCondition [
                        rr:child "@CODE";
                        rr:parent "code.value";
                    ];
                ] ;
        ] ;
    rr:predicateObjectMap
        [
            rr:predicate locn:address ;
            rr:objectMap
                [
                    rr:parentTriplesMap <#ContractTermeLocationAddress>;
                ] ;
        ] .
<#ContractTermeLocationAddress> a rr:TriplesMap ;
    rml:logicalSource
        [
            rml:source "source.xml" ;
            rml:iterator "/TED_EXPORT/FORM_SECTION/F03_2014/OBJECT_CONTRACT" ;
            rml:referenceFormulation ql:XPath
        ] ;
    rr:subjectMap
        [
            rr:template
                "http://data.europa.eu/a4g/resource/ContractTermeLocationAddress/{replace(replace(/TED_EXPORT/CODED_DATA_SECTION/NOTICE_DATA/NO_DOC_OJS, ' ', '-' ), '/' , '-')}/{substring-before(substring-after(unparsed-text('https://www.uuidtools.com/api/generate/v3/namespace/ns:url/name/' || count(preceding::*)+1),'[\"'),'\"]')}" ;
            rr:class locn:Address

        ] ;
    rr:predicateObjectMap
        [
            rr:predicate locn:fullAddress ;
            rr:objectMap
                [
                    rml:reference "OBJECT_DESCR/MAIN_SITE"
                ] ;
        ] .

<#AwardCriterionType> a rr:TriplesMap ;
    rml:logicalSource
        [
            rml:source "award_criterion_type.json" ;
            rml:iterator "$.results.bindings[*]" ;
            rml:referenceFormulation ql:JSONPath
        ] ;
    rr:subjectMap
        [
            rml:reference
                "conceptURI.value" ;
        ] .
<#LotPurpose> a rr:TriplesMap ;
    rml:logicalSource
        [
            rml:source "source.xml" ;
            rml:iterator "/TED_EXPORT/FORM_SECTION/F03_2014/OBJECT_CONTRACT" ;
            rml:referenceFormulation ql:XPath
        ] ;
    rr:subjectMap
        [
            rr:template
                "http://data.europa.eu/a4g/resource/LotPurpose/{replace(replace(/TED_EXPORT/CODED_DATA_SECTION/NOTICE_DATA/NO_DOC_OJS, ' ', '-' ), '/' , '-')}/{substring-before(substring-after(unparsed-text('https://www.uuidtools.com/api/generate/v3/namespace/ns:url/name/' || count(preceding::*)+1),'[\"'),'\"]')}" ;
            rr:class epo:Purpose

        ] ;
    rr:predicateObjectMap
        [
            rr:predicate epo:hasAdditionalClassification ;
            rr:objectMap
                [
                    rr:parentTriplesMap <#cpv>;
                    rr:joinCondition [
                        rr:child "OBJECT_DESCR/CPV_ADDITIONAL/CPV_SUPPLEMENTARY_CODE/@CODE";
                        rr:parent "code.value";
                    ];
                ] ;
        ] ;
    rr:predicateObjectMap
        [
            rr:predicate epo:hasMainClassification ;
            rr:objectMap
                [
                    rr:parentTriplesMap <#cpv>;
                    rr:joinCondition [
                        rr:child "OBJECT_DESCR/CPV_ADDITIONAL/CPV_CODE/@CODE";
                        rr:parent "code.value";
                    ];
                ] ;
        ] .
<#LotIdentifier> a rr:TripleMap ;
    rml:logicalSource
        [
            rml:source "source.xml" ;
            rml:iterator "/TED_EXPORT/FORM_SECTION/F03_2014/OBJECT_CONTRACT/OBJECT_DESCR";
            rml:referenceFormulation ql:XPath
        ];
    rr:subjectMap
        [
            rr:template "http://data.europa.eu/a4g/resource/LotIdentifier/{replace(replace(/TED_EXPORT/CODED_DATA_SECTION/NOTICE_DATA/NO_DOC_OJS, ' ', '-' ), '/' , '-')}/{substring-before(substring-after(unparsed-text('https://www.uuidtools.com/api/generate/v3/namespace/ns:url/name/' || count(preceding::*)+1),'[\"'),'\"]')}" ;
            rr:class epo:Identifier
        ] ;
    rr:predicateObjectMap
        [
            rr:predicate epo:hasIdentifierValue;
            rr:objectMap
                [
                    rml:reference "LOT_NO"
                ]
        ] ;
    rr:predicateObjectMap
        [
            rr:predicate epo:hasIdentifierValue;
            rr:objectMap
                [
                    rml:reference "/TED_EXPORT/FORM_SECTION/F03_2014/AWARD_CONTRACT/LOT_NO"
                ]
        ] .
<#ProcedureIdentifier> a rr:TripleMap ;
    rml:logicalSource
        [
            rml:source "source.xml" ;
            rml:iterator "/TED_EXPORT/FORM_SECTION/F03_2014/PROCEDURE";
            rml:referenceFormulation ql:XPath
        ];
    rr:subjectMap
        [
            rr:template "http://data.europa.eu/a4g/resource/ProcedureIdentifier/{replace(replace(/TED_EXPORT/CODED_DATA_SECTION/NOTICE_DATA/NO_DOC_OJS, ' ', '-' ), '/' , '-')}/{substring-before(substring-after(unparsed-text('https://www.uuidtools.com/api/generate/v3/namespace/ns:url/name/' || count(preceding::*)+1),'[\"'),'\"]')}" ;
            rr:class epo:Identifier
        ] ;
    rr:predicateObjectMap
        [
            rr:predicate epo:hasIdentifierValue;
            rr:objectMap
                [
                    rml:reference "/TED_EXPORT/FORM_SECTION/F03_2014/OBJECT_CONTRACT/REFERENCE_NUMBER"
                ]
        ] .
<#ProcedureMonetaryValue> a rr:TriplesMap ;
    rml:logicalSource
        [
            rml:source "source.xml" ;
            rml:iterator "/TED_EXPORT/FORM_SECTION/F03_2014/OBJECT_CONTRACT" ;
            rml:referenceFormulation ql:XPath
        ] ;
    rr:subjectMap
        [
            rr:template
                "http://data.europa.eu/a4g/resource/MonetaryValue/{replace(replace(/TED_EXPORT/CODED_DATA_SECTION/NOTICE_DATA/NO_DOC_OJS, ' ', '-' ), '/' , '-')}/{substring-before(substring-after(unparsed-text('https://www.uuidtools.com/api/generate/v3/namespace/ns:url/name/' || count(preceding::*)+1),'[\"'),'\"]')}" ;
            rr:class epo:MonetaryValue

        ] ;
    rr:predicateObjectMap
        [
            rr:predicate epo:hasAmountValue ;
            rr:objectMap
                [
                    rml:reference "VAL_TOTAL";
                ] ;
        ] ;
    rr:predicateObjectMap
        [
            rr:predicate epo:hasCurrency ;
            rr:objectMap
                [
                    rr:parentTriplesMap <#currency>;
                    rr:joinCondition [
                        rr:child "VAL_TOTAL/@CURRENCY";
                        rr:parent "code.value";
                    ];
                ] ;
        ] .
<#currency> a rr:TriplesMap ;
    rml:logicalSource
        [
            rml:source "currency.json" ;
            rml:iterator "$.results.bindings[*]" ;
            rml:referenceFormulation ql:JSONPath
        ] ;
    rr:subjectMap
        [
            rml:reference
                "conceptURI.value" ;
        ] .
<#Purpose> a rr:TriplesMap ;
    rml:logicalSource
        [
            rml:source "source.xml" ;
            rml:iterator "/TED_EXPORT/FORM_SECTION/F03_2014/OBJECT_CONTRACT" ;
            rml:referenceFormulation ql:XPath
        ] ;
    rr:subjectMap
        [
            rr:template
                "http://data.europa.eu/a4g/resource/Purpose/{replace(replace(/TED_EXPORT/CODED_DATA_SECTION/NOTICE_DATA/NO_DOC_OJS, ' ', '-' ), '/' , '-')}/{substring-before(substring-after(unparsed-text('https://www.uuidtools.com/api/generate/v3/namespace/ns:url/name/' || count(preceding::*)+1),'[\"'),'\"]')}" ;
            rr:class epo:Purpose

        ] ;
    rr:predicateObjectMap
        [
            rr:predicate epo:hasAdditionalClassification ;
            rr:objectMap
                [
                    rr:parentTriplesMap <#cpv>;
                    rr:joinCondition [
                        rr:child "CPV_MAIN/CPV_SUPPLEMENTARY_CODE/@CODE";
                        rr:parent "code.value";
                    ];
                ] ;
        ] ;
    rr:predicateObjectMap
        [
            rr:predicate epo:hasMainClassification ;
            rr:objectMap
                [
                    rr:parentTriplesMap <#cpv>;
                    rr:joinCondition [
                        rr:child "CPV_MAIN/CPV_CODE/@CODE";
                        rr:parent "code.value";
                    ];
                ] ;
        ] ;
    rr:predicateObjectMap
        [
            rr:predicate epo:hasContractNatureType ;
            rr:objectMap
                [
                    rr:parentTriplesMap <#ContractNature> ;
                    rr:joinCondition [
                        rr:child "lower-case(TYPE_CONTRACT/@CTYPE)";
                        rr:parent "code.value";
                    ];
                ] ;
        ] .
<#SubContractingEstimate> a rr:TriplesMap ;
    rml:logicalSource
        [
            rml:source "source.xml" ;
            rml:iterator "/TED_EXPORT/FORM_SECTION/F03_2014/AWARD_CONTRACT/AWARDED_CONTRACT" ;
            rml:referenceFormulation ql:XPath
        ] ;
    rr:subjectMap
        [
            rr:template
                "http://data.europa.eu/a4g/resource/SubContractingEstimate/{replace(replace(/TED_EXPORT/CODED_DATA_SECTION/NOTICE_DATA/NO_DOC_OJS, ' ', '-' ), '/' , '-')}/{substring-before(substring-after(unparsed-text('https://www.uuidtools.com/api/generate/v3/namespace/ns:url/name/' || count(preceding::*)+1),'[\"'),'\"]')}" ;
            rr:class epo:SubcontractingEstimate

        ] ;
    rr:predicateObjectMap
        [
            rr:predicate epo:hasEstimatedPercentage ;
            rr:objectMap
                [
                    rml:reference "PCT_SUBCONTRACTING";

                ] ;
        ] ;
    rr:predicateObjectMap
        [
            rr:predicate epo:hasDescription ;
            rr:objectMap
                [
                    rml:reference "INFO_ADD_SUBCONTRACTING";

                ] ;
        ] .
<#cpv> a rr:TriplesMap ;
    rml:logicalSource
        [
            rml:source "cpv.json" ;
            rml:iterator "$.results.bindings[*]" ;
            rml:referenceFormulation ql:JSONPath
        ] ;
    rr:subjectMap
        [
            rml:reference
                "conceptURI.value" ;
        ] .
<#ContractNature> a rr:TriplesMap ;
    rml:logicalSource
        [
            rml:source "contract_nature.json" ;
            rml:iterator "$.results.bindings[*]" ;
            rml:referenceFormulation ql:JSONPath
        ] ;
    rr:subjectMap
        [
            rml:reference
                "conceptURI.value" ;
        ] .