    prefixes:
     epo: "http://data.europa.eu/a4g/ontology#"
     epd: "http://data.europa.eu/a4g/resource/"
     locn: "http://locn/ontology#"
     grel: "http://users.ugent.be/~bjdmeest/function/grel.ttl#"
     dct: "http://dct/tobedefined#"
     xsd: "https://www.w3.org/2001/XMLSchema#"
     xf: "http://www.w3.org/TR/xforms-xpath#"
    sources:
      notice-source:
        access: source.xml
        referenceFormulation: xpath
        iterator: /TED_EXPORT
      nuts-source:
        access: nuts.json
        referenceFormulation: jsonpath
        iterator: $.results.bindings[*]
      countries-source:
        access: country.json
        referenceFormulation: jsonpath
        iterator: $.results.bindings[*]

      buyer-legal-type-source:
        access: buyer_legal_type.csv
        referenceFormulation: csv
      main-activity-source:
        access: main_activity.csv
        referenceFormulation: csv
      contract-nature-source:
        access: contract_nature.json
        referenceFormulation: jsonpath
        iterator: $.results.bindings[*]
      cpv-source:
        access: cpv.json
        referenceFormulation: jsonpath
        iterator: $.results.bindings[*]
      currency-source:
        access: currency.json
        referenceFormulation: jsonpath
        iterator: $.results.bindings[*]
      award-criterion-type-source:
        access: award_criterion_type.json
        referenceFormulation: jsonpath
        iterator: $.results.bindings[*]
    mappings:
      buyer:
        sources:
          - [source.xml~xpath, /TED_EXPORT/FORM_SECTION/F03_2014/CONTRACTING_BODY/CA_ACTIVITY]
        s:
          function: grel:array_join
          parameters:
            - [grel:p_array_a, 'epd:Buyer/$(replace\(/TED_EXPORT/CODED_DATA_SECTION/NOTICE_DATA/NO_DOC_OJS, '' '', ''-'' \))/']
            - parameter: grel:p_array_a
              value:
                function: grel:string_md5
                parameters:
                  - [grel:valueParameter,  $(count\(preceding::*\)+1)]
        po:
          - [a, epo:Buyer]

          - p: epo:hasBuyerWebsite
            o:
            - mapping: buyerprofile

          - p: epo:IsRoleOf
            o:
            - mapping: organisation
    #      - [epo:hasMainActivityType, $(FORM_SECTION/F03_2014/CONTRACTING_BODY/CA_ACTIVITY/@VALUE)]
    #      - [epo:hasBuyerType, $(FORM_SECTION/F03_2014/CONTRACTING_BODY/CA_TYPE/@VALUE)]
          - p: epo:hasMainActivityType
            o:
              - mapping: mainactivity
                condition:
                  function: equal
                  parameters:
                    - [str1, $( /TED_EXPORT/FORM_SECTION/F03_2014/CONTRACTING_BODY/CA_ACTIVITY/@VALUE)]
                    - [str2, $(xmlElement)]
          - p: epo:hasMainActivityType
            o:
              value: http://publications.europa.eu/resource/authority/main-activity/OP_DATPRO
              type: iri
            condition:
              function: http://example.com/idlab/function/isNull
              parameters:
                - [http://example.com/idlab/function/str, $( /TED_EXPORT/FORM_SECTION/F03_2014/CONTRACTING_BODY/CA_ACTIVITY/@VALUE)]

          - p: epo:hasBuyerType
            o:
              - mapping: buyerlegaltype
                condition:
                  function: equal
                  parameters:
                    - [str1, $( /TED_EXPORT/FORM_SECTION/F03_2014/CONTRACTING_BODY/CA_TYPE/@VALUE)]
                    - [str2, $(xmlElement)]

      buyerprofile:
        sources:
          - [source.xml~xpath, /TED_EXPORT/FORM_SECTION/F03_2014/CONTRACTING_BODY/ADDRESS_CONTRACTING_BODY/URL_BUYER]
        s:
          function: grel:array_join
          parameters:
            - [grel:p_array_a, 'epd:BuyerProfile/$(replace\(/TED_EXPORT/CODED_DATA_SECTION/NOTICE_DATA/NO_DOC_OJS, '' '', ''-'' \))/']
            - parameter: grel:p_array_a
              value:
                function: grel:string_md5
                parameters:
                  - [grel:valueParameter, $(count\(preceding::*\)+1)]
        po:
          - [a, epo:BuyerProfile]
          - [epo:hasURL, $( /TED_EXPORT/FORM_SECTION/F03_2014/CONTRACTING_BODY/ADDRESS_CONTRACTING_BODY/URL_BUYER)]

      organisation:
        sources:
          - [source.xml~xpath, /TED_EXPORT/FORM_SECTION/F03_2014/CONTRACTING_BODY/ADDRESS_CONTRACTING_BODY]
        s:
          function: grel:array_join
          parameters:
            - [grel:p_array_a, 'epd:Organisation/$(replace\(/TED_EXPORT/CODED_DATA_SECTION/NOTICE_DATA/NO_DOC_OJS, '' '', ''-'' \))/']
            - parameter: grel:p_array_a
              value:
                function: grel:string_md5
                parameters:
                  - [grel:valueParameter,  $(count\(preceding::*\)+1)]
        po:
          - [a, epo:Organisation]
          - p: epo:hasDefaultContactPoint
            o:
            - mapping: contactPoint
          - p: epo:hasRegisteredAddress
            o:
            - mapping: address
          - p: epo:hasID
            o:
            - mapping: organisationidentifier
          - [epo:hasName, $(OFFICIALNAME)]

      organisationidentifier:
        sources:
          - [source.xml~xpath, /TED_EXPORT/FORM_SECTION/F03_2014/CONTRACTING_BODY/ADDRESS_CONTRACTING_BODY]
        s:
          function: grel:array_join
          parameters:
            - [grel:p_array_a, 'epd:OrganisationIdentifier/$(replace\(/TED_EXPORT/CODED_DATA_SECTION/NOTICE_DATA/NO_DOC_OJS, '' '', ''-'' \))/']
            - parameter: grel:p_array_a
              value:
                function: grel:string_md5
                parameters:
                  - [grel:valueParameter, $(count\(preceding::*\)+1)]
        po:
          - [a, epo:Identifier]
          - [epo:hasIdentifierValue, $(NATIONALID)]


      contactPoint:
        sources:
          - [source.xml~xpath, /TED_EXPORT/FORM_SECTION/F03_2014/CONTRACTING_BODY/ADDRESS_CONTRACTING_BODY]
        s:
          function: grel:array_join
          parameters:
            - [grel:p_array_a, 'epd:ContactPoint/$(replace\(/TED_EXPORT/CODED_DATA_SECTION/NOTICE_DATA/NO_DOC_OJS, '' '', ''-'' \))/']
            - parameter: grel:p_array_a
              value:
                function: grel:string_md5
                parameters:
                  - [grel:valueParameter, $(count\(preceding::*\)+1)]

        po:
          - [a, epo:ContactPoint]
          - p: epo:hasChannel
            o:
            - mapping: channel

          - [epo:hasEmail, $(E_MAIL)]
          - [epo:hasFax, $(FAX)]
          - [epo:hasTelephone, $(PHONE)]
          - [epo:hasDescription, $(CONTACT_POINT)]

      channel:
        sources:
          - [source.xml~xpath, /TED_EXPORT/FORM_SECTION/F03_2014/CONTRACTING_BODY/ADDRESS_CONTRACTING_BODY]
        s:
          function: grel:array_join
          parameters:
            - [grel:p_array_a, 'epd:Channel/$(replace\(/TED_EXPORT/CODED_DATA_SECTION/NOTICE_DATA/NO_DOC_OJS, '' '', ''-'' \))/']
            - parameter: grel:p_array_a
              value:
                function: grel:string_md5
                parameters:
                  - [grel:valueParameter, $(count\(preceding::*\)+1)]
        po:
          - [a, epo:Channel]
          - [epo:hasUrl, $(URL_GENERAL)]


      address:
        sources:
          - [source.xml~xpath, /TED_EXPORT/FORM_SECTION/F03_2014/CONTRACTING_BODY/ADDRESS_CONTRACTING_BODY]
        s:
          function: grel:array_join
          parameters:
            - [grel:p_array_a, 'locn:Address/$(replace\(/TED_EXPORT/CODED_DATA_SECTION/NOTICE_DATA/NO_DOC_OJS, '' '', ''-'' \))/']
            - parameter: grel:p_array_a
              value:
                function: grel:string_md5
                parameters:
                  - [grel:valueParameter, $(count\(preceding::*\)+1)]

        po:
          - [a, locn:Address]
          - [locn:postName, $(TOWN)]
          - [locn:thoroughfare, $(ADDRESS)]
          - [locn:postCode, $(POSTAL_CODE)]
    #      - [locn:adminUnitL2, $(FORM_SECTION/F03_2014/CONTRACTING_BODY/ADDRESS_CONTRACTING_BODY/*/@CODE)]
    #      - [locn:adminUnitL1, $(FORM_SECTION/F03_2014/CONTRACTING_BODY/ADDRESS_CONTRACTING_BODY/COUNTRY/@VALUE)]
          - p: locn:adminUnitL1
            o:
              - mapping: nuts
                condition:
                  function: equal
                  parameters:
                    - [str1, $(*/@CODE)] # ID of person under `persons`
                    - [str2, $(code.value)]
          - p: locn:adminUnitL2
            o:
              - mapping: countries
                condition:
                  function: equal
                  parameters:
                    - [str1, $(COUNTRY/@VALUE)] # ID of person under `persons`
                    - [str2, $(code.value)]

      resultnotice:
        sources:
          - [source.xml~xpath, /TED_EXPORT/FORM_SECTION/F03_2014/OBJECT_CONTRACT]
        s:
          function: grel:array_join
          parameters:
            - [grel:p_array_a, 'epd:ResultNotice/$(replace\(/TED_EXPORT/CODED_DATA_SECTION/NOTICE_DATA/NO_DOC_OJS, '' '', ''-'' \))/']
            - parameter: grel:p_array_a
              value:
                function: grel:string_md5
                parameters:
                  - [grel:valueParameter, $(count\(preceding::*\)+1)]

        po:
          - [a, epo:ResultNotice]
          - p: epo:refersToProcedure
            o:
            - mapping: procedure
          - p: epo:refersToLot
            o:
            - mapping: lot
          - p: epo:refersToRole
            o:
            - mapping: buyer
          - p: epo:refersToRole
            o:
            - mapping: contractsignatoryoncontractorside
          - p: epo:announcesContract
            o:
            - mapping: contract
          - p: epo:announcesAdditionalInformation
            o:
            - mapping: submissionstatisticalinformation
          - p: epo:refersToRole
            o:
            - mapping: reviewer
          - p: epo:refersToRole
            o:
            - mapping: Mediator
          - p: epo:refersToRole
            o:
            - mapping: ReviewProcedureInformationProvider
      awardcriquality:
        sources:
          - [source.xml~xpath, /TED_EXPORT/FORM_SECTION/F03_2014/OBJECT_CONTRACT/OBJECT_DESCR/AC/AC_QUALITY]

        s:
          function: grel:array_join
          parameters:
            - [grel:p_array_a, 'epd:AwardCriterionQuality/$(replace\(/TED_EXPORT/CODED_DATA_SECTION/NOTICE_DATA/NO_DOC_OJS, '' '', ''-'' \))/']
            - parameter: grel:p_array_a
              value:
                function: grel:string_md5
                parameters:
                  - [grel:valueParameter, $(count\(preceding::*\)+1)]
        po:
          - [a, epo:AwardCriterion]
          - p: epo:isUsedToAward
            o:
            - mapping: lot
          - p: epo:hasAwardCriterionType
            o:
              value: "http://publications.europa.eu/resource/authority/award-criterion-type/quality"
              type: iri
          - [epo:hasName, $(AC_CRITERION)]
          - [epo:hasFormula, $(AC_WEIGHTING)]
      awardcriprice:
        sources:
          - [source.xml~xpath, /TED_EXPORT/FORM_SECTION/F03_2014/OBJECT_CONTRACT/OBJECT_DESCR/AC/AC_PRICE]

        s:
          function: grel:array_join
          parameters:
            - [grel:p_array_a, 'epd:AwardCriterionPrice/$(replace\(/TED_EXPORT/CODED_DATA_SECTION/NOTICE_DATA/NO_DOC_OJS, '' '', ''-'' \))/']
            - parameter: grel:p_array_a
              value:
                function: grel:string_md5
                parameters:
                  - [grel:valueParameter, $(count\(preceding::*\)+1)]
        po:
          - [a, epo:AwardCriterion]
          - p: epo:isUsedToAward
            o:
            - mapping: lot
          - p: epo:hasAwardCriterionType
            o:
              value: "http://publications.europa.eu/resource/authority/award-criterion-type/price"
              type: iri
          - [epo:hasName, $(AC_CRITERION)]
          - [epo:hasFormula, $(AC_WEIGHTING)]

      awardcricost:
        sources:
          - [source.xml~xpath, /TED_EXPORT/FORM_SECTION/F03_2014/OBJECT_CONTRACT/OBJECT_DESCR/AC/AC_COST]

        s:
          function: grel:array_join
          parameters:
            - [grel:p_array_a, 'epd:AwardCriterionCost/$(replace\(/TED_EXPORT/CODED_DATA_SECTION/NOTICE_DATA/NO_DOC_OJS, '' '', ''-'' \))/']
            - parameter: grel:p_array_a
              value:
                function: grel:string_md5
                parameters:
                  - [grel:valueParameter, $(count\(preceding::*\)+1)]
        po:
          - [a, epo:AwardCriterion]
          - p: epo:isUsedToAward
            o:
            - mapping: lot
          - p: epo:hasAwardCriterionType
            o:
              value: "http://publications.europa.eu/resource/authority/award-criterion-type/price"
              type: iri
          - [epo:hasName, $(AC_CRITERION)]
          - [epo:hasFormula, $(AC_WEIGHTING)]
      procedure:
        sources:
          - [source.xml~xpath, /TED_EXPORT/FORM_SECTION/F03_2014/OBJECT_CONTRACT]
        s:
          function: grel:array_join
          parameters:
            - [grel:p_array_a, 'epd:Procedure/$(replace\(/TED_EXPORT/CODED_DATA_SECTION/NOTICE_DATA/NO_DOC_OJS, '' '', ''-'' \))/']
            - parameter: grel:p_array_a
              value:
                function: grel:string_md5
                parameters:
                  - [grel:valueParameter, $(count\(preceding::*\)+1)]

        po:
          - [a, epo:Procedure]
          - [epo:hasTitle, $(TITLE)]
          - p: epo:hasOverallPurpose
            o:
            - mapping: purpose
          - p: epo:hasEstimatedValue
            o:
            - mapping: monetaryvalue
          - [epo:hasDescription, $(SHORT_DESCR)]
          - p: epo:hasID
            o:
            - mapping: procedureidentifier
          - p: epo:comprisesLot
            o:
            - mapping: lot
          - p: epo:announcesProcedure
            o:
            - mapping: competionnotice
          - p: epo:hasProcedureType
            o:
              value: http://publications.europa.eu/resource/authority/procurement-procedure-type/open
              type: iri
            condition:
              function: grel:boolean_not
              parameters:
                - parameter: grel:bool_b
                  value:
                    function: http://example.com/idlab/function/isNull
                    parameters:
                     - [http://example.com/idlab/function/str, $(/TED_EXPORT/FORM_SECTION/F03_2014/PROCEDURE/PT_OPEN)]
          - p: epo:hasProcedureType
            o:
              value: http://publications.europa.eu/resource/authority/procurement-procedure-type/restricted
              type: iri
            condition:
              function: grel:boolean_not
              parameters:
                - parameter: grel:bool_b
                  value:
                    function: http://example.com/idlab/function/isNull
                    parameters:
                     - [http://example.com/idlab/function/str, $(/TED_EXPORT/FORM_SECTION/F03_2014/PROCEDURE/PT_RESTRICTED)]
          - p: epo:hasProcedureType
            o:
              value: http://publications.europa.eu/resource/authority/procurement-procedure-type/neg-w-call
              type: iri
            condition:
              function: grel:boolean_not
              parameters:
                - parameter: grel:bool_b
                  value:
                    function: http://example.com/idlab/function/isNull
                    parameters:
                     - [http://example.com/idlab/function/str, $(/TED_EXPORT/FORM_SECTION/F03_2014/PROCEDURE/PT_COMPETITIVE_NEGOTIATION)]
          - p: epo:hasProcedureType
            o:
              value: http://publications.europa.eu/resource/authority/procurement-procedure-type/comp-dial
              type: iri
            condition:
              function: grel:boolean_not
              parameters:
                - parameter: grel:bool_b
                  value:
                    function: http://example.com/idlab/function/isNull
                    parameters:
                     - [http://example.com/idlab/function/str, $(/TED_EXPORT/FORM_SECTION/F03_2014/PROCEDURE/PT_COMPETITIVE_DIALOGUE)]
          - p: epo:hasProcedureType
            o:
              value: http://publications.europa.eu/resource/authority/procurement-procedure-type/innovation
              type: iri
            condition:
              function: grel:boolean_not
              parameters:
                - parameter: grel:bool_b
                  value:
                    function: http://example.com/idlab/function/isNull
                    parameters:
                     - [http://example.com/idlab/function/str, $(/TED_EXPORT/FORM_SECTION/F03_2014/PROCEDURE/PT_INNOVATION_PARTNERSHIP)]
          - p: epo:hasProcedureType
            o:
              value: http://publications.europa.eu/resource/authority/procurement-procedure-type/neg-wo-call
              type: iri
            condition:
              function: grel:boolean_not
              parameters:
                - parameter: grel:bool_b
                  value:
                    function: http://example.com/idlab/function/isNull
                    parameters:
                     - [http://example.com/idlab/function/str, $(/TED_EXPORT/FORM_SECTION/F03_2014/PROCEDURE/PT_AWARD_CONTRACT_WITHOUT_CALL)]
          - p: epo:isAccelerated
            o:
              function: grel:boolean_not
              parameters:
                - parameter: grel:bool_b
                  value:
                    function: http://example.com/idlab/function/isNull
                    parameters:
                     - [http://example.com/idlab/function/str, $(/TED_EXPORT/FORM_SECTION/F03_2014/PROCEDURE/ACCELERATED_PROC)]
              datatype: xsd:boolean

          - [epo:hasAcceleratedProcedureJustification, $(/TED_EXPORT/FORM_SECTION/F03_2014/PROCEDURE/ACCELERATED_PROC/P)]
          - p: epo:hasCompetitionTermination
            o:
              function: grel:boolean_not
              parameters:
                - parameter: grel:bool_b
                  value:
                    function: http://example.com/idlab/function/isNull
                    parameters:
                     - [http://example.com/idlab/function/str, $(/TED_EXPORT/FORM_SECTION/F03_2014/PROCEDURE/TERMINATION_PIN)]
              datatype: xsd:boolean
          - p: epo:hasCompetitionTermination
            o:
              function: grel:boolean_not
              parameters:
                - parameter: grel:bool_b
                  value:
                    function: http://example.com/idlab/function/isNull
                    parameters:
                     - [http://example.com/idlab/function/str, $(/TED_EXPORT/FORM_SECTION/F03_2014/PROCEDURE/TERMINATION_PIN)]
              datatype: xsd:boolean

      lot:
        sources:
          - [source.xml~xpath, /TED_EXPORT/FORM_SECTION/F03_2014/OBJECT_CONTRACT/OBJECT_DESCR]
        s:
          function: grel:array_join
          parameters:
            - [grel:p_array_a, 'epd:lot/$(replace\(/TED_EXPORT/CODED_DATA_SECTION/NOTICE_DATA/NO_DOC_OJS, '' '', ''-'' \))/']
            - parameter: grel:p_array_a
              value:
                function: grel:string_md5
                parameters:
                  - [grel:valueParameter, $(count\(preceding::*\)+1)]
        po:
          - [a, epo:Lot]
          - [epo:hasDescription, $(SHORT_DESCR)]
          - p: epo:hasID
            o:
            - mapping: lotidentifier
          - p: epo:hasPurpose
            o:
            - mapping: lotpurpose
          - p: epo:isSubjectToTerm
            o:
            - mapping: contractterm
          - p: epo:isSubjectToTerm
            o:
            - mapping: framworkagreement
          - p: epo:uses
            o:
            - mapping: dynamicpurchasesystemtechnique
          - p: epo:uses
            o:
            - mapping: eauctiontechnique
          - p: epo:hasEstimatedValue
            o:
            - mapping: monetaryvaluelot
          - [epo:hasAdditionalInformation, $(/TED_EXPORT/FORM_SECTION/F03_2014/COMPLEMENTARY_INFO/INFO_ADD)]

      lotidentifier:
        sources:
          - [source.xml~xpath, /TED_EXPORT/FORM_SECTION/F03_2014/OBJECT_CONTRACT/OBJECT_DESCR]
        s:
          function: grel:array_join
          parameters:
            - [grel:p_array_a, 'epd:LotIdentifier/$(replace\(/TED_EXPORT/CODED_DATA_SECTION/NOTICE_DATA/NO_DOC_OJS, '' '', ''-'' \))/']
            - parameter: grel:p_array_a
              value:
                function: grel:string_md5
                parameters:
                  - [grel:valueParameter, $(count\(preceding::*\)+1)]
        po:
          - [a, epo:Identifier]
          - [epo:hasIdentifierValue, $(LOT_NO)]
          - [epo:hasIdentifierValue, $(/TED_EXPORT/FORM_SECTION/F03_2014/AWARD_CONTRACT/LOT_NO)]

      competionnotice:
        sources:
          - [source.xml~xpath, /TED_EXPORT/FORM_SECTION/F03_2014/OBJECT_CONTRACT/OBJECT_DESCR]
        s:
          function: grel:array_join
          parameters:
            - [grel:p_array_a, 'epd:CompetitionNotice/$(replace\(/TED_EXPORT/CODED_DATA_SECTION/NOTICE_DATA/NO_DOC_OJS, '' '', ''-'' \))/']
            - parameter: grel:p_array_a
              value:
                function: grel:string_md5
                parameters:
                  - [grel:valueParameter, $(count\(preceding::*\)+1)]
        po:
          - [a, epo:CompetitionNotice]
          - p: epo:hasID
            o:
            - mapping: competionnoticeidentifier

      competionnoticeidentifier:
        sources:
          - [source.xml~xpath, /TED_EXPORT/FORM_SECTION/F03_2014/PROCEDURE]
        s:
          function: grel:array_join
          parameters:
            - [grel:p_array_a, 'epd:CompetitionNoticeIdentifier/$(replace\(/TED_EXPORT/CODED_DATA_SECTION/NOTICE_DATA/NO_DOC_OJS, '' '', ''-'' \))/']
            - parameter: grel:p_array_a
              value:
                function: grel:string_md5
                parameters:
                  - [grel:valueParameter, $(count\(preceding::*\)+1)]
        po:
          - [a, epo:Identifier]
          - [epo:hasIdentifierValue, $(NOTICE_NUMBER_OJ)]
      procedureidentifier:
        sources:
          - [source.xml~xpath, /TED_EXPORT/FORM_SECTION/F03_2014/PROCEDURE]
        s:
          function: grel:array_join
          parameters:
            - [grel:p_array_a, 'epd:ProcedureIdentifier/$(replace\(/TED_EXPORT/CODED_DATA_SECTION/NOTICE_DATA/NO_DOC_OJS, '' '', ''-'' \))/']
            - parameter: grel:p_array_a
              value:
                function: grel:string_md5
                parameters:
                  - [grel:valueParameter, $(count\(preceding::*\)+1)]
        po:
          - [a, epo:Identifier]
          - [epo:hasIdentifierValue, $(/TED_EXPORT/FORM_SECTION/F03_2014/OBJECT_CONTRACT/REFERENCE_NUMBER)]


      purpose:
        sources:
          - [source.xml~xpath, /TED_EXPORT/FORM_SECTION/F03_2014/OBJECT_CONTRACT]
        s:
          function: grel:array_join
          parameters:
            - [grel:p_array_a, 'epd:PurposeProcedure/$(replace\(/TED_EXPORT/CODED_DATA_SECTION/NOTICE_DATA/NO_DOC_OJS, '' '', ''-'' \))/']
            - parameter: grel:p_array_a
              value:
                function: grel:string_md5
                parameters:
                  - [grel:valueParameter, $(count\(preceding::*\)+1)]

        po:
          - [a, epo:Purpose]
    #      - [epo:hasMainClassification, $(FORM_SECTION/F03_2014/OBJECT_CONTRACT/CPV_MAIN/CPV_CODE/@CODE)]
    #     - [epo:hasContractNatureType, $(FORM_SECTION/F03_2014/OBJECT_CONTRACT/TYPE_CONTRACT/@CTYPE)]
    #     - [epo:hasAdditionalClassification, $(FORM_SECTION/F03_2014/OBJECT_CONTRACT/CPV_MAIN/CPV_SUPPLEMENTARY_CODE/@CODE)]
          - p: epo:hasAdditionalClassification
            o:
              - mapping: cpv
                condition:
                  function: equal
                  parameters:
                    - [str1,  $(CPV_MAIN/CPV_SUPPLEMENTARY_CODE/@CODE)]
                    - [str2, $(code.value)]
          - p: epo:hasMainClassification
            o:
              - mapping: cpv
                condition:
                  function: equal
                  parameters:
                    - [str1,  $(CPV_MAIN/CPV_CODE/@CODE)]
                    - [str2, $(code.value)]
          - p: epo:hasContractNatureType
            o:
              - mapping: contractnature
                condition:
                  function: equal
                  parameters:
                    - parameter: str1
                      value:
                        function: grel:toLowerCase
                        parameters:
                         - [grel:valueParameter, $(TYPE_CONTRACT/@CTYPE)]
                    - parameter: str2
                      value: $(code.value)


      monetaryvalue:
        sources:
          - [source.xml~xpath, /TED_EXPORT/FORM_SECTION/F03_2014/OBJECT_CONTRACT]
        s:
          function: grel:array_join
          parameters:
            - [grel:p_array_a, 'epd:MonetaryValue/$(replace\(/TED_EXPORT/CODED_DATA_SECTION/NOTICE_DATA/NO_DOC_OJS, '' '', ''-'' \))/']
            - parameter: grel:p_array_a
              value:
                function: grel:string_md5
                parameters:
                  - [grel:valueParameter, $(count\(preceding::*\)+1)]

        po:
          - [a, epo:MonetaryValue]
          - [epo:hasAmountValue, $(VAL_TOTAL)]
    #      - [epo:hasCurrency, $(FORM_SECTION/F03_2014/OBJECT_CONTRACT/VAL_TOTAL/@CURRENCY)]
          - p: epo:hasCurrency
            o:
              - mapping: currency
                condition:
                  function: equal
                  parameters:
                    - [str1,  $(VAL_TOTAL/@CURRENCY)]
                    - [str2, $(code.value)]


      lotpurpose:
        sources:
          - [source.xml~xpath, /TED_EXPORT/FORM_SECTION/F03_2014/OBJECT_CONTRACT]
        s:
          function: grel:array_join
          parameters:
            - [grel:p_array_a, 'epd:LotPurpose/$(replace\(/TED_EXPORT/CODED_DATA_SECTION/NOTICE_DATA/NO_DOC_OJS, '' '', ''-'' \))/']
            - parameter: grel:p_array_a
              value:
                function: grel:string_md5
                parameters:
                  - [grel:valueParameter, $(count\(preceding::*\)+1)]

        po:
          - [a, epo:Purpose]
    #      - [epo:hasMainClassification, $(FORM_SECTION/F03_2014/OBJECT_CONTRACT/OBJECT_DESCR/CPV_ADDITIONAL/CPV_CODE/@CODE)]
     #     - [epo:hasContractNatureType, $(FORM_SECTION/F03_2014/OBJECT_CONTRACT/TYPE_CONTRACT/@CTYPE)]
          - [epo:hasAdditionalClassification, $(OBJECT_DESCR/CPV_ADDITIONAL/CPV_SUPPLEMENTARY_CODE/@CODE)]
          - p: epo:hasAdditionalClassification
            o:
              - mapping: cpv
                condition:
                  function: equal
                  parameters:
                    - [str1,  $(OBJECT_DESCR/CPV_ADDITIONAL/CPV_SUPPLEMENTARY_CODE/@CODE)]
                    - [str2, $(code.value)]
          - p: epo:hasMainClassification
            o:
              - mapping: cpv
                condition:
                  function: equal
                  parameters:
                    - [str1,  $(OBJECT_DESCR/CPV_ADDITIONAL/CPV_CODE/@CODE)]
                    - [str2, $(code.value)]
      contractterm:
        sources:
          - [source.xml~xpath, /TED_EXPORT/FORM_SECTION/F03_2014/OBJECT_CONTRACT]
        s:
          function: grel:array_join
          parameters:
            - [grel:p_array_a, 'epd:ContractTerm/$(replace\(/TED_EXPORT/CODED_DATA_SECTION/NOTICE_DATA/NO_DOC_OJS, '' '', ''-'' \))/']
            - parameter: grel:p_array_a
              value:
                function: grel:string_md5
                parameters:
                  - [grel:valueParameter, $(count\(preceding::*\)+1)]

        po:
          - [a, epo:ContractTerm]
          - p: epo:hasSpecificPlaceOfPerformance
            o:
            - mapping: contracttermelocation

      contracttermelocation:
        sources:
          - [source.xml~xpath, /TED_EXPORT/FORM_SECTION/F03_2014/OBJECT_CONTRACT/OBJECT_DESCR//*:NUTS]
#source to do - [source.xml~xpath, /TED_EXPORT/FORM_SECTION/F03_2014/OBJECT_CONTRACT/OBJECT_DESCR/n2016:NUTS]
        s:
          function: grel:array_join
          parameters:
            - [grel:p_array_a, 'dct:ContractTermLocation/$(replace\(/TED_EXPORT/CODED_DATA_SECTION/NOTICE_DATA/NO_DOC_OJS, '' '', ''-'' \))/']
            - parameter: grel:p_array_a
              value:
                function: grel:string_md5
                parameters:
                  - [grel:valueParameter, $(count\(preceding::*\)+1)]

        po:
          - [a, dct:Location]
    #      - [epo:hasNutsCode, $(FORM_SECTION/F03_2014/OBJECT_CONTRACT/OBJECT_DESCR/*/@CODE)]
          - p: epo:hasNutsCode
            o:
              - mapping: nuts
                condition:
                  function: equal
                  parameters:
                    - [str1, $(@CODE)]
                    - [str2, $(code.value)]
          - p: locn:address
            o:
              - mapping: lotaddress

      lotaddress:
        sources:
          - [source.xml~xpath, /TED_EXPORT/FORM_SECTION/F03_2014/OBJECT_CONTRACT]
        s:
          function: grel:array_join
          parameters:
            - [grel:p_array_a, 'locn:AddressContractTerm/$(replace\(/TED_EXPORT/CODED_DATA_SECTION/NOTICE_DATA/NO_DOC_OJS, '' '', ''-'' \))/']
            - parameter: grel:p_array_a
              value:
                function: grel:string_md5
                parameters:
                  - [grel:valueParameter, $(count\(preceding::*\)+1)]

        po:
          - [a, locn:Address]
          - [locn:fullAddress, $(OBJECT_DESCR/MAIN_SITE)]
      awaredcriterion:
        sources:
          - [ source.xml~xpath, /TED_EXPORT/FORM_SECTION/F03_2014/OBJECT_CONTRACT]
        s:
          function: grel:array_join
          parameters:
            - [grel:p_array_a, 'epd:AwardCriterion/$(replace\(/TED_EXPORT/CODED_DATA_SECTION/NOTICE_DATA/NO_DOC_OJS, '' '', ''-'' \))/']
            - parameter: grel:p_array_a
              value:
                function: grel:string_md5
                parameters:
                  - [grel:valueParameter, $(count\(preceding::*\)+1)]
        po:
          - [a, epo:AwardCriterion]
          - p: epo:isUsedToAward
            o:
              - mapping: lot
          - p: epo:hasAwardCriterionType
            o:
              - mapping: awardcriteriontype
                condition:
                  function: equal
                  parameters:
                    - [str1, $(OBJECT_DESCR/AC/AC_QUALITY] # ID of person under `persons`
                    - [str2, $(code.value)]
      framworkagreement:
        sources:
          - [ source.xml~xpath, /TED_EXPORT/FORM_SECTION/F03_2014/PROCEDURE]
        s:
          function: grel:array_join
          parameters:
            - [grel:p_array_a, 'epd:FrameworkAgreementTerm/$(replace\(/TED_EXPORT/CODED_DATA_SECTION/NOTICE_DATA/NO_DOC_OJS, '' '', ''-'' \))/']
            - parameter: grel:p_array_a
              value:
                function: grel:string_md5
                parameters:
                  - [grel:valueParameter, $(count\(preceding::*\)+1)]
        condition:
              function: grel:boolean_not
              parameters:
                - parameter: grel:bool_b
                  value:
                    function: http://example.com/idlab/function/isNull
                    parameters:
                     - [http://example.com/idlab/function/str, $(FRAMEWORK)]
        po:
          - p: a
            o: epo:FrameworkAgreementTerm

      dynamicpurchasesystemtechnique:
        sources:
          - [ source.xml~xpath, /TED_EXPORT/FORM_SECTION/F03_2014/PROCEDURE]
        s:
          function: grel:array_join
          parameters:
            - [grel:p_array_a, 'epd:DynamicPurchaseSystemTechnique/$(replace\(/TED_EXPORT/CODED_DATA_SECTION/NOTICE_DATA/NO_DOC_OJS, '' '', ''-'' \))/']
            - parameter: grel:p_array_a
              value:
                function: grel:string_md5
                parameters:
                  - [grel:valueParameter, $(count\(preceding::*\)+1)]
        condition:
              function: grel:boolean_not
              parameters:
                - parameter: grel:bool_b
                  value:
                    function: http://example.com/idlab/function/isNull
                    parameters:
                     - [http://example.com/idlab/function/str, $(DPS)]
        po:
          - p: a
            o: epo:DynamicPurchaseSystemTechnique
          - p: epo:hasDPSTermination
            o:
              function: grel:boolean_not
              parameters:
                - parameter: grel:bool_b
                  value:
                    function: http://example.com/idlab/function/isNull
                    parameters:
                     - [http://example.com/idlab/function/str, $(TERMINATION_DPS)]
              datatype: xsd:boolean

      eauctiontechnique:
        sources:
          - [ source.xml~xpath, /TED_EXPORT/FORM_SECTION/F03_2014/PROCEDURE]
        s:
          function: grel:array_join
          parameters:
            - [grel:p_array_a, 'epd:EAuctionTechnique/$(replace\(/TED_EXPORT/CODED_DATA_SECTION/NOTICE_DATA/NO_DOC_OJS, '' '', ''-'' \))/']
            - parameter: grel:p_array_a
              value:
                function: grel:string_md5
                parameters:
                  - [grel:valueParameter, $(count\(preceding::*\)+1)]
        condition:
              function: grel:boolean_not
              parameters:
                - parameter: grel:bool_b
                  value:
                    function: http://example.com/idlab/function/isNull
                    parameters:
                     - [http://example.com/idlab/function/str, $(EAUCTION_USED)]

        po:
          - p: a
            o: epo:EAuctionTechnique
            condition:
              function: grel:boolean_not
              parameters:
                - parameter: grel:bool_b
                  value:
                    function: http://example.com/idlab/function/isNull
                    parameters:
                     - [http://example.com/idlab/function/str, $(EAUCTION_USED)]
      contract:
        sources:
          - [ source.xml~xpath, /TED_EXPORT/FORM_SECTION/F03_2014/AWARD_CONTRACT]
        s:
          function: grel:array_join
          parameters:
            - [grel:p_array_a, 'epd:Contract/$(replace\(/TED_EXPORT/CODED_DATA_SECTION/NOTICE_DATA/NO_DOC_OJS, '' '', ''-'' \))/']
            - parameter: grel:p_array_a
              value:
                function: grel:string_md5
                parameters:
                  - [grel:valueParameter,  $(count\(preceding::*\)+1)]
        po:
          - [a, epo:Contract]
          - p: epo:hasID
            o:
            - mapping: contractidentifier
          - [epo:hasTitle, $(TITLE)]
          - p: epo:includesLotAwardOutcome
            o:
            - mapping: lotawardoutcome
          - p: epo:hasContractConclusionDate
            o:
              value: $(AWARDED_CONTRACT/DATE_CONCLUSION_CONTRACT)
              datatype: xsd:date

      contractidentifier:
        sources:
          - [source.xml~xpath, /TED_EXPORT/FORM_SECTION/F03_2014/AWARD_CONTRACT]
        s:
          function: grel:array_join
          parameters:
            - [grel:p_array_a, 'epd:ContractIdentifier/$(replace\(/TED_EXPORT/CODED_DATA_SECTION/NOTICE_DATA/NO_DOC_OJS, '' '', ''-'' \))/']
            - parameter: grel:p_array_a
              value:
                function: grel:string_md5
                parameters:
                  - [grel:valueParameter, $(count\(preceding::*\)+1)]
        po:
          - [a, epo:Identifier]
          - [epo:hasIdentifierValue, $(CONTRACT_NO)]
      lotawardoutcome:
        sources:
          - [source.xml~xpath, /TED_EXPORT/FORM_SECTION/F03_2014/AWARD_CONTRACT]
        s:
          function: grel:array_join
          parameters:
            - [grel:p_array_a, 'epd:LotAwardOutcome/$(replace\(/TED_EXPORT/CODED_DATA_SECTION/NOTICE_DATA/NO_DOC_OJS, '' '', ''-'' \))/']
            - parameter: grel:p_array_a
              value:
                function: grel:string_md5
                parameters:
                  - [grel:valueParameter, $(count\(preceding::*\)+1)]
        po:
          - [a, epo:LotAwardOutcome]
          - p: epo:hasNonAwardJustification
              o:
                value: http://publications.europa.eu/resource/authority/non-award-justification/all-rej
                type: iri
              condition:
                function: grel:boolean_not
                parameters:
                  - parameter: grel:bool_b
                    value:
                      function: http://example.com/idlab/function/isNull
                      parameters:
                        - [ http://example.com/idlab/function/str, $(NO_AWARDED_CONTRACT/PROCUREMENT_UNSUCCESSFUL) ]
                - p: epo:hasNonAwardJustification
                  o:
                    value: http://publications.europa.eu/resource/authority/non-award-justification/other
                    type: iri
                  condition:
                    function: grel:boolean_not
                    parameters:
                      - parameter: grel:bool_b
                        value:
                          function: http://example.com/idlab/function/isNull
                          parameters:
                            - [ http://example.com/idlab/function/str, $(NO_AWARDED_CONTRACT/PROCUREMENT_DISCONTINUED) ]
      submissionstatisticalinformation:
        sources:
          - [source.xml~xpath, /TED_EXPORT/FORM_SECTION/F03_2014/AWARD_CONTRACT/AWARDED_CONTRACT/TENDERS]
        s:
          function: grel:array_join
          parameters:
            - [grel:p_array_a, 'epd:SubmissionStatisticalInformation/$(replace\(/TED_EXPORT/CODED_DATA_SECTION/NOTICE_DATA/NO_DOC_OJS, '' '', ''-'' \))/']
            - parameter: grel:p_array_a
              value:
                function: grel:string_md5
                parameters:
                  - [grel:valueParameter, $(count\(preceding::*\)+1)]
        po:
          - [a, epo:SubmissionStatisticalInformation]
          - [epo:hasReceivedTenders, $(NB_TENDERS_RECEIVED)]
          - [epo:hasReceivedSMETenders, $(NB_TENDERS_RECEIVED_SME)]
          - [epo:hasEEAReceivedTenders, $(NB_TENDERS_RECEIVED_OTHER_EU)]
          - [epo:hasReceivedNonEEATender, $(NB_TENDERS_RECEIVED_NON_EU)]
          - [epo:hasElectronicTenders, $(NB_TENDERS_RECEIVED_EMEANS)]
          - p: epo:hasLowestReceivedTenderLotValues
            o:
            - mapping: monetaryvaluesubmissionlow
          - p: epo:hasHighestReceivedTenderLotValues
            o:
            - mapping: monetaryvaluesubmisionhight
          - p: epo:concernsSubmissionsFor
            o:
            - mapping: lot
      contractsignatoryoncontractorside:
        sources:
          - [source.xml~xpath, /TED_EXPORT/FORM_SECTION/F03_2014/AWARD_CONTRACT/AWARDED_CONTRACT/CONTRACTORS/CONTRACTOR]
        s:
          function: grel:array_join
          parameters:
            - [grel:p_array_a, 'epd:ContractSignatoryOnContractorSide/$(replace\(/TED_EXPORT/CODED_DATA_SECTION/NOTICE_DATA/NO_DOC_OJS, '' '', ''-'' \))/']
            - parameter: grel:p_array_a
              value:
                function: grel:string_md5
                parameters:
                  - [grel:valueParameter,  $(count\(preceding::*\)+1)]
        po:
          - [a, epo:ContractSignatoryOnContractorSide]
          - p: epo:IsRoleOf
            o:
            - mapping: organisationcontract
      organisationcontract:
        sources:
          - [source.xml~xpath, /TED_EXPORT/FORM_SECTION/F03_2014/AWARD_CONTRACT/AWARDED_CONTRACT/CONTRACTORS/CONTRACTOR]
        s:
          function: grel:array_join
          parameters:
            - [grel:p_array_a, 'epd:Organisation/$(replace\(/TED_EXPORT/CODED_DATA_SECTION/NOTICE_DATA/NO_DOC_OJS, '' '', ''-'' \))/']
            - parameter: grel:p_array_a
              value:
                function: grel:string_md5
                parameters:
                  - [grel:valueParameter,  $(count\(preceding::*\)+1)]
        po:
          - [a, epo:Organisation]
          - p: epo:hasDefaultContactPoint
            o:
            - mapping: contactPointContract
          - p: epo:hasRegisteredAddress
            o:
            - mapping: addresscontract
          - p: epo:hasID
            o:
            - mapping: organisationidentifiercontract
          - [epo:hasName, $(ADDRESS_CONTRACTOR/OFFICIALNAME)]

      organisationidentifiercontract:
        sources:
          - [source.xml~xpath, /TED_EXPORT/FORM_SECTION/F03_2014/AWARD_CONTRACT/AWARDED_CONTRACT/CONTRACTORS/CONTRACTOR/ADDRESS_CONTRACTOR]
        s:
          function: grel:array_join
          parameters:
            - [grel:p_array_a, 'epd:OrganisationIdentifier/$(replace\(/TED_EXPORT/CODED_DATA_SECTION/NOTICE_DATA/NO_DOC_OJS, '' '', ''-'' \))/']
            - parameter: grel:p_array_a
              value:
                function: grel:string_md5
                parameters:
                  - [grel:valueParameter, $(count\(preceding::*\)+1)]
        po:
          - [a, epo:Identifier]
          - [epo:hasIdentifierValue, $(NATIONALID)]


      contactPointContract:
        sources:
          - [source.xml~xpath, /TED_EXPORT/FORM_SECTION/F03_2014/AWARD_CONTRACT/AWARDED_CONTRACT/CONTRACTORS/CONTRACTOR/ADDRESS_CONTRACTOR]
        s:
          function: grel:array_join
          parameters:
            - [grel:p_array_a, 'epd:ContactPoint/$(replace\(/TED_EXPORT/CODED_DATA_SECTION/NOTICE_DATA/NO_DOC_OJS, '' '', ''-'' \))/']
            - parameter: grel:p_array_a
              value:
                function: grel:string_md5
                parameters:
                  - [grel:valueParameter, $(count\(preceding::*\)+1)]

        po:
          - [a, epo:ContactPoint]
          - p: epo:hasChannel
            o:
            - mapping: channelcontract

          - [epo:hasEmail, $(E_MAIL)]
          - [epo:hasFax, $(FAX)]
          - [epo:hasTelephone, $(PHONE)]
          - [epo:hasDescription, $(CONTACT_POINT)]

      channelcontract:
        sources:
          - [source.xml~xpath, /TED_EXPORT/FORM_SECTION/F03_2014/AWARD_CONTRACT/AWARDED_CONTRACT/CONTRACTORS/CONTRACTOR/ADDRESS_CONTRACTOR]
        s:
          function: grel:array_join
          parameters:
            - [grel:p_array_a, 'epd:Channel/$(replace\(/TED_EXPORT/CODED_DATA_SECTION/NOTICE_DATA/NO_DOC_OJS, '' '', ''-'' \))/']
            - parameter: grel:p_array_a
              value:
                function: grel:string_md5
                parameters:
                  - [grel:valueParameter, $(count\(preceding::*\)+1)]
        po:
          - [a, epo:Channel]
          - [epo:hasUrl, $(URL_GENERAL)]


      addresscontract:
        sources:
          - [source.xml~xpath, /TED_EXPORT/FORM_SECTION/F03_2014/AWARD_CONTRACT/AWARDED_CONTRACT/CONTRACTORS/CONTRACTOR/ADDRESS_CONTRACTOR]
        s:
          function: grel:array_join
          parameters:
            - [grel:p_array_a, 'locn:Address/$(replace\(/TED_EXPORT/CODED_DATA_SECTION/NOTICE_DATA/NO_DOC_OJS, '' '', ''-'' \))/']
            - parameter: grel:p_array_a
              value:
                function: grel:string_md5
                parameters:
                  - [grel:valueParameter, $(count\(preceding::*\)+1)]

        po:
          - [a, locn:Address]
          - [locn:postName, $(TOWN)]
          - [locn:thoroughfare, $(ADDRESS)]
          - [locn:postCode, $(POSTAL_CODE)]
    #      - [locn:adminUnitL2, $(FORM_SECTION/F03_2014/CONTRACTING_BODY/ADDRESS_CONTRACTING_BODY/*/@CODE)]
    #      - [locn:adminUnitL1, $(FORM_SECTION/F03_2014/CONTRACTING_BODY/ADDRESS_CONTRACTING_BODY/COUNTRY/@VALUE)]
          - p: locn:adminUnitL1
            o:
              - mapping: nuts
                condition:
                  function: equal
                  parameters:
                    - [str1, $(*/@CODE)] # ID of person under `persons`
                    - [str2, $(code.value)]
          - p: locn:adminUnitL2
            o:
              - mapping: countries
                condition:
                  function: equal
                  parameters:
                    - [str1, $(COUNTRY/@VALUE)] # ID of person under `persons`
                    - [str2, $(code.value)]
      monetaryvaluelot:
        sources:
          - [source.xml~xpath, /TED_EXPORT/FORM_SECTION/F03_2014/AWARD_CONTRACT/AWARDED_CONTRACT/VALUES]
        s:
          function: grel:array_join
          parameters:
            - [grel:p_array_a, 'epd:MonetaryValueLot/$(replace\(/TED_EXPORT/CODED_DATA_SECTION/NOTICE_DATA/NO_DOC_OJS, '' '', ''-'' \))/']
            - parameter: grel:p_array_a
              value:
                function: grel:string_md5
                parameters:
                  - [grel:valueParameter, $(count\(preceding::*\)+1)]

        po:
          - [a, epo:MonetaryValue]
          - [epo:hasAmountValue, $(VAL_ESTIMATED_TOTAL)]
      tender:
        sources:
          - [source.xml~xpath, /TED_EXPORT/FORM_SECTION/F03_2014/AWARD_CONTRACT/AWARDED_CONTRACT/VALUES/VAL_TOTAL]
        s:
          function: grel:array_join
          parameters:
            - [grel:p_array_a, 'epd:Tender/$(replace\(/TED_EXPORT/CODED_DATA_SECTION/NOTICE_DATA/NO_DOC_OJS, '' '', ''-'' \))/']
            - parameter: grel:p_array_a
              value:
                function: grel:string_md5
                parameters:
                  - [grel:valueParameter, $(count\(preceding::*\)+1)]

        po:
          - [a, epo:Tender]
          - p: epo:hasFinnancialOfferValue
            o:
            - mapping: monetaryvaluetender
      monetaryvaluetender:
        sources:
          - [source.xml~xpath, /TED_EXPORT/FORM_SECTION/F03_2014/AWARD_CONTRACT/AWARDED_CONTRACT/VALUES]
        s:
          function: grel:array_join
          parameters:
            - [grel:p_array_a, 'epd:MonetaryValueTender/$(replace\(/TED_EXPORT/CODED_DATA_SECTION/NOTICE_DATA/NO_DOC_OJS, '' '', ''-'' \))/']
            - parameter: grel:p_array_a
              value:
                function: grel:string_md5
                parameters:
                  - [grel:valueParameter, $(count\(preceding::*\)+1)]

        po:
          - [a, epo:MonetaryValue]
          - [epo:hasAmountValue, $(VAL_TOTAL)]
      monetaryvaluesubmisionhight:
        sources:
          - [source.xml~xpath, /TED_EXPORT/FORM_SECTION/F03_2014/AWARD_CONTRACT/AWARDED_CONTRACT/VALUES/VAL_RANGE_TOTAL]
        s:
          function: grel:array_join
          parameters:
            - [grel:p_array_a, 'epd:MonetaryValueSubmissionHigh/$(replace\(/TED_EXPORT/CODED_DATA_SECTION/NOTICE_DATA/NO_DOC_OJS, '' '', ''-'' \))/']
            - parameter: grel:p_array_a
              value:
                function: grel:string_md5
                parameters:
                  - [grel:valueParameter, $(count\(preceding::*\)+1)]

        po:
          - [a, epo:MonetaryValue]
          - [epo:hasAmountValue, $(HIGH)]
      monetaryvaluesubmissionlow:
        sources:
          - [source.xml~xpath, /TED_EXPORT/FORM_SECTION/F03_2014/AWARD_CONTRACT/AWARDED_CONTRACT/VALUES/VAL_RANGE_TOTAL]
        s:
          function: grel:array_join
          parameters:
            - [grel:p_array_a, 'epd:MonetaryValueSubmissionLow/$(replace\(/TED_EXPORT/CODED_DATA_SECTION/NOTICE_DATA/NO_DOC_OJS, '' '', ''-'' \))/']
            - parameter: grel:p_array_a
              value:
                function: grel:string_md5
                parameters:
                  - [grel:valueParameter, $(count\(preceding::*\)+1)]

        po:
          - [a, epo:MonetaryValue]
          - [epo:hasAmountValue, $(LOW)]
      subcontractingestimate:
        sources:
          - [source.xml~xpath, /TED_EXPORT/FORM_SECTION/F03_2014/AWARD_CONTRACT/AWARDED_CONTRACT]
        s:
          function: grel:array_join
          parameters:
            - [grel:p_array_a, 'epd:SubcontractingEstimate/$(replace\(/TED_EXPORT/CODED_DATA_SECTION/NOTICE_DATA/NO_DOC_OJS, '' '', ''-'' \))/']
            - parameter: grel:p_array_a
              value:
                function: grel:string_md5
                parameters:
                  - [grel:valueParameter, $(count\(preceding::*\)+1)]

        po:
          - [a, epo:SubcontractingEstimate]
          - [epo:hasEstimatedPercentage, $(PCT_SUBCONTRACTING)]
          - [epo:hasDescription, $(INFO_ADD_SUBCONTRACTING)]

      reviewer:
        sources:
          - [source.xml~xpath, /TED_EXPORT/FORM_SECTION/F03_2014/COMPLEMENTARY_INFO/ADDRESS_REVIEW_BODY]
        s:
          function: grel:array_join
          parameters:
            - [grel:p_array_a, 'epd:Reviewer/$(replace\(/TED_EXPORT/CODED_DATA_SECTION/NOTICE_DATA/NO_DOC_OJS, '' '', ''-'' \))/']
            - parameter: grel:p_array_a
              value:
                function: grel:string_md5
                parameters:
                  - [grel:valueParameter,  $(count\(preceding::*\)+1)]
        po:
          - [a, epo:Reviewer]
          - p: epo:IsRoleOf
            o:
            - mapping: organisationreviewer
      organisationreviewer:
        sources:
          - [source.xml~xpath, /TED_EXPORT/FORM_SECTION/F03_2014/COMPLEMENTARY_INFO/ADDRESS_REVIEW_BODY]
        s:
          function: grel:array_join
          parameters:
            - [grel:p_array_a, 'epd:Organisation/$(replace\(/TED_EXPORT/CODED_DATA_SECTION/NOTICE_DATA/NO_DOC_OJS, '' '', ''-'' \))/']
            - parameter: grel:p_array_a
              value:
                function: grel:string_md5
                parameters:
                  - [grel:valueParameter,  $(count\(preceding::*\)+1)]
        po:
          - [a, epo:Organisation]
          - p: epo:hasDefaultContactPoint
            o:
            - mapping: contactPointReviewer
          - p: epo:hasRegisteredAddress
            o:
            - mapping: addressreviewer
          - p: epo:hasID
            o:
            - mapping: organisationidentifierreviewer
          - [epo:hasName, $(OFFICIALNAME)]

      organisationidentifierreviewer:
        sources:
          - [source.xml~xpath, /TED_EXPORT/FORM_SECTION/F03_2014/COMPLEMENTARY_INFO/ADDRESS_REVIEW_BODY]
        s:
          function: grel:array_join
          parameters:
            - [grel:p_array_a, 'epd:OrganisationIdentifier/$(replace\(/TED_EXPORT/CODED_DATA_SECTION/NOTICE_DATA/NO_DOC_OJS, '' '', ''-'' \))/']
            - parameter: grel:p_array_a
              value:
                function: grel:string_md5
                parameters:
                  - [grel:valueParameter, $(count\(preceding::*\)+1)]
        po:
          - [a, epo:Identifier]
          - [epo:hasIdentifierValue, $(NATIONALID)]


      contactPointReviewer:
        sources:
          - [source.xml~xpath, /TED_EXPORT/FORM_SECTION/F03_2014/COMPLEMENTARY_INFO/ADDRESS_REVIEW_BODY]
        s:
          function: grel:array_join
          parameters:
            - [grel:p_array_a, 'epd:ContactPoint/$(replace\(/TED_EXPORT/CODED_DATA_SECTION/NOTICE_DATA/NO_DOC_OJS, '' '', ''-'' \))/']
            - parameter: grel:p_array_a
              value:
                function: grel:string_md5
                parameters:
                  - [grel:valueParameter, $(count\(preceding::*\)+1)]

        po:
          - [a, epo:ContactPoint]
          - p: epo:hasChannel
            o:
            - mapping: channelreviewer

          - [epo:hasEmail, $(E_MAIL)]
          - [epo:hasFax, $(FAX)]
          - [epo:hasTelephone, $(PHONE)]
          - [epo:hasDescription, $(CONTACT_POINT)]

      channelreviewer:
        sources:
          - [source.xml~xpath, /TED_EXPORT/FORM_SECTION/F03_2014/COMPLEMENTARY_INFO/ADDRESS_REVIEW_BODY]
        s:
          function: grel:array_join
          parameters:
            - [grel:p_array_a, 'epd:Channel/$(replace\(/TED_EXPORT/CODED_DATA_SECTION/NOTICE_DATA/NO_DOC_OJS, '' '', ''-'' \))/']
            - parameter: grel:p_array_a
              value:
                function: grel:string_md5
                parameters:
                  - [grel:valueParameter, $(count\(preceding::*\)+1)]
        po:
          - [a, epo:Channel]
          - [epo:hasUrl, $(URL)]


      addressreviewer:
        sources:
          - [source.xml~xpath, /TED_EXPORT/FORM_SECTION/F03_2014/COMPLEMENTARY_INFO/ADDRESS_REVIEW_BODY]
        s:
          function: grel:array_join
          parameters:
            - [grel:p_array_a, 'locn:Address/$(replace\(/TED_EXPORT/CODED_DATA_SECTION/NOTICE_DATA/NO_DOC_OJS, '' '', ''-'' \))/']
            - parameter: grel:p_array_a
              value:
                function: grel:string_md5
                parameters:
                  - [grel:valueParameter, $(count\(preceding::*\)+1)]

        po:
          - [a, locn:Address]
          - [locn:postName, $(TOWN)]
          - [locn:thoroughfare, $(ADDRESS)]
          - [locn:postCode, $(POSTAL_CODE)]
          - p: locn:adminUnitL1
            o:
              - mapping: nuts
                condition:
                  function: equal
                  parameters:
                    - [str1, $(*/@CODE)]
                    - [str2, $(code.value)]
          - p: locn:adminUnitL2
            o:
              - mapping: countries
                condition:
                  function: equal
                  parameters:
                    - [str1, $(COUNTRY/@VALUE)]
                    - [str2, $(code.value)]

      Mediator:
        sources:
          - [source.xml~xpath, /TED_EXPORT/FORM_SECTION/F03_2014/COMPLEMENTARY_INFO/ADDRESS_MEDIATION_BODY]
        s:
          function: grel:array_join
          parameters:
            - [grel:p_array_a, 'epd:Mediator/$(replace\(/TED_EXPORT/CODED_DATA_SECTION/NOTICE_DATA/NO_DOC_OJS, '' '', ''-'' \))/']
            - parameter: grel:p_array_a
              value:
                function: grel:string_md5
                parameters:
                  - [grel:valueParameter,  $(count\(preceding::*\)+1)]
        po:
          - [a, epo:Reviewer]
          - p: epo:IsRoleOf
            o:
            - mapping: organisationmediator
      organisationmediator:
        sources:
          - [source.xml~xpath, /TED_EXPORT/FORM_SECTION/F03_2014/COMPLEMENTARY_INFO/ADDRESS_MEDIATION_BODY]
        s:
          function: grel:array_join
          parameters:
            - [grel:p_array_a, 'epd:Organisation/$(replace\(/TED_EXPORT/CODED_DATA_SECTION/NOTICE_DATA/NO_DOC_OJS, '' '', ''-'' \))/']
            - parameter: grel:p_array_a
              value:
                function: grel:string_md5
                parameters:
                  - [grel:valueParameter,  $(count\(preceding::*\)+1)]
        po:
          - [a, epo:Organisation]
          - p: epo:hasDefaultContactPoint
            o:
            - mapping: contactPointMediator
          - p: epo:hasRegisteredAddress
            o:
            - mapping: addressmediator
          - p: epo:hasID
            o:
            - mapping: organisationidentifiermediator
          - [epo:hasName, $(OFFICIALNAME)]

      organisationidentifiermediator:
        sources:
          - [source.xml~xpath, /TED_EXPORT/FORM_SECTION/F03_2014/COMPLEMENTARY_INFO/ADDRESS_MEDIATION_BODY]
        s:
          function: grel:array_join
          parameters:
            - [grel:p_array_a, 'epd:OrganisationIdentifier/$(replace\(/TED_EXPORT/CODED_DATA_SECTION/NOTICE_DATA/NO_DOC_OJS, '' '', ''-'' \))/']
            - parameter: grel:p_array_a
              value:
                function: grel:string_md5
                parameters:
                  - [grel:valueParameter, $(count\(preceding::*\)+1)]
        po:
          - [a, epo:Identifier]
          - [epo:hasIdentifierValue, $(NATIONALID)]


      contactPointMediator:
        sources:
          - [source.xml~xpath, /TED_EXPORT/FORM_SECTION/F03_2014/COMPLEMENTARY_INFO/ADDRESS_MEDIATION_BODY]
        s:
          function: grel:array_join
          parameters:
            - [grel:p_array_a, 'epd:ContactPoint/$(replace\(/TED_EXPORT/CODED_DATA_SECTION/NOTICE_DATA/NO_DOC_OJS, '' '', ''-'' \))/']
            - parameter: grel:p_array_a
              value:
                function: grel:string_md5
                parameters:
                  - [grel:valueParameter, $(count\(preceding::*\)+1)]

        po:
          - [a, epo:ContactPoint]
          - p: epo:hasChannel
            o:
            - mapping: channelmediator

          - [epo:hasEmail, $(E_MAIL)]
          - [epo:hasFax, $(FAX)]
          - [epo:hasTelephone, $(PHONE)]
          - [epo:hasDescription, $(CONTACT_POINT)]

      channelmediator:
        sources:
          - [source.xml~xpath, /TED_EXPORT/FORM_SECTION/F03_2014/COMPLEMENTARY_INFO/ADDRESS_MEDIATION_BODY]
        s:
          function: grel:array_join
          parameters:
            - [grel:p_array_a, 'epd:Channel/$(replace\(/TED_EXPORT/CODED_DATA_SECTION/NOTICE_DATA/NO_DOC_OJS, '' '', ''-'' \))/']
            - parameter: grel:p_array_a
              value:
                function: grel:string_md5
                parameters:
                  - [grel:valueParameter, $(count\(preceding::*\)+1)]
        po:
          - [a, epo:Channel]
          - [epo:hasUrl, $(URL)]


      addressmediator:
        sources:
          - [source.xml~xpath, /TED_EXPORT/FORM_SECTION/F03_2014/COMPLEMENTARY_INFO/ADDRESS_MEDIATION_BODY]
        s:
          function: grel:array_join
          parameters:
            - [grel:p_array_a, 'locn:Address/$(replace\(/TED_EXPORT/CODED_DATA_SECTION/NOTICE_DATA/NO_DOC_OJS, '' '', ''-'' \))/']
            - parameter: grel:p_array_a
              value:
                function: grel:string_md5
                parameters:
                  - [grel:valueParameter, $(count\(preceding::*\)+1)]

        po:
          - [a, locn:Address]
          - [locn:postName, $(TOWN)]
          - [locn:thoroughfare, $(ADDRESS)]
          - [locn:postCode, $(POSTAL_CODE)]
          - p: locn:adminUnitL1
            o:
              - mapping: nuts
                condition:
                  function: equal
                  parameters:
                    - [str1, $(*/@CODE)]
                    - [str2, $(code.value)]
          - p: locn:adminUnitL2
            o:
              - mapping: countries
                condition:
                  function: equal
                  parameters:
                    - [str1, $(COUNTRY/@VALUE)]
                    - [str2, $(code.value)]

      ReviewProcedureInformationProvider:
        sources:
          - [source.xml~xpath, /TED_EXPORT/FORM_SECTION/F03_2014/COMPLEMENTARY_INFO/ADDRESS_REVIEW_INFO]
        s:
          function: grel:array_join
          parameters:
            - [grel:p_array_a, 'epd:ReviewProcedureInformationProvider/$(replace\(/TED_EXPORT/CODED_DATA_SECTION/NOTICE_DATA/NO_DOC_OJS, '' '', ''-'' \))/']
            - parameter: grel:p_array_a
              value:
                function: grel:string_md5
                parameters:
                  - [grel:valueParameter,  $(count\(preceding::*\)+1)]
        po:
          - [a, epo:Reviewer]
          - p: epo:IsRoleOf
            o:
            - mapping: organisationrpip
      organisationrpip:
        sources:
          - [source.xml~xpath, /TED_EXPORT/FORM_SECTION/F03_2014/COMPLEMENTARY_INFO/ADDRESS_REVIEW_INFO]
        s:
          function: grel:array_join
          parameters:
            - [grel:p_array_a, 'epd:Organisation/$(replace\(/TED_EXPORT/CODED_DATA_SECTION/NOTICE_DATA/NO_DOC_OJS, '' '', ''-'' \))/']
            - parameter: grel:p_array_a
              value:
                function: grel:string_md5
                parameters:
                  - [grel:valueParameter,  $(count\(preceding::*\)+1)]
        po:
          - [a, epo:Organisation]
          - p: epo:hasDefaultContactPoint
            o:
            - mapping: contactPointrpip
          - p: epo:hasRegisteredAddress
            o:
            - mapping: addressrpip
          - p: epo:hasID
            o:
            - mapping: organisationidentifierrpip
          - [epo:hasName, $(OFFICIALNAME)]

      organisationidentifierrpip:
        sources:
          - [source.xml~xpath, /TED_EXPORT/FORM_SECTION/F03_2014/COMPLEMENTARY_INFO/ADDRESS_REVIEW_INFO]
        s:
          function: grel:array_join
          parameters:
            - [grel:p_array_a, 'epd:OrganisationIdentifier/$(replace\(/TED_EXPORT/CODED_DATA_SECTION/NOTICE_DATA/NO_DOC_OJS, '' '', ''-'' \))/']
            - parameter: grel:p_array_a
              value:
                function: grel:string_md5
                parameters:
                  - [grel:valueParameter, $(count\(preceding::*\)+1)]
        po:
          - [a, epo:Identifier]
          - [epo:hasIdentifierValue, $(NATIONALID)]


      contactPointrpip:
        sources:
          - [source.xml~xpath, /TED_EXPORT/FORM_SECTION/F03_2014/COMPLEMENTARY_INFO/ADDRESS_REVIEW_INFO]
        s:
          function: grel:array_join
          parameters:
            - [grel:p_array_a, 'epd:ContactPoint/$(replace\(/TED_EXPORT/CODED_DATA_SECTION/NOTICE_DATA/NO_DOC_OJS, '' '', ''-'' \))/']
            - parameter: grel:p_array_a
              value:
                function: grel:string_md5
                parameters:
                  - [grel:valueParameter, $(count\(preceding::*\)+1)]

        po:
          - [a, epo:ContactPoint]
          - p: epo:hasChannel
            o:
            - mapping: channelrpip

          - [epo:hasEmail, $(E_MAIL)]
          - [epo:hasFax, $(FAX)]
          - [epo:hasTelephone, $(PHONE)]
          - [epo:hasDescription, $(CONTACT_POINT)]

      channelrpip:
        sources:
          - [source.xml~xpath, /TED_EXPORT/FORM_SECTION/F03_2014/COMPLEMENTARY_INFO/ADDRESS_REVIEW_INFO]
        s:
          function: grel:array_join
          parameters:
            - [grel:p_array_a, 'epd:Channel/$(replace\(/TED_EXPORT/CODED_DATA_SECTION/NOTICE_DATA/NO_DOC_OJS, '' '', ''-'' \))/']
            - parameter: grel:p_array_a
              value:
                function: grel:string_md5
                parameters:
                  - [grel:valueParameter, $(count\(preceding::*\)+1)]
        po:
          - [a, epo:Channel]
          - [epo:hasUrl, $(URL)]


      addressrpip:
        sources:
          - [source.xml~xpath, /TED_EXPORT/FORM_SECTION/F03_2014/COMPLEMENTARY_INFO/ADDRESS_REVIEW_INFO]
        s:
          function: grel:array_join
          parameters:
            - [grel:p_array_a, 'locn:Address/$(replace\(/TED_EXPORT/CODED_DATA_SECTION/NOTICE_DATA/NO_DOC_OJS, '' '', ''-'' \))/']
            - parameter: grel:p_array_a
              value:
                function: grel:string_md5
                parameters:
                  - [grel:valueParameter, $(count\(preceding::*\)+1)]

        po:
          - [a, locn:Address]
          - [locn:postName, $(TOWN)]
          - [locn:thoroughfare, $(ADDRESS)]
          - [locn:postCode, $(POSTAL_CODE)]
          - p: locn:adminUnitL1
            o:
              - mapping: nuts
                condition:
                  function: equal
                  parameters:
                    - [str1, $(*/@CODE)]
                    - [str2, $(code.value)]
          - p: locn:adminUnitL2
            o:
              - mapping: countries
                condition:
                  function: equal
                  parameters:
                    - [str1, $(COUNTRY/@VALUE)]
                    - [str2, $(code.value)]
      currency:
        sources:
          - currency-source
        s: $(conceptURI.value)

      nuts:
        sources:
          - nuts-source
        s: $(conceptURI.value)
      countries:
        sources:
          - countries-source
        s: $(conceptURI.value)

      buyerlegaltype:
        sources:
          - buyer-legal-type-source
        s: $(conceptURI)

      mainactivity:
        sources:
          - main-activity-source
        s: $(conceptURI)

      cpv:
        sources:
          - cpv-source
        s: $(conceptURI.value)
      contractnature:
        sources:
          - contract-nature-source
        s: $(conceptURI.value)
      awardcriteriontype:
        sources:
          - award-criterion-type-source
        s: $(conceptURI.value)