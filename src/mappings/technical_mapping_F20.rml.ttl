#--- technical_mapping_F20.rml.ttl ---
@prefix owl: <http://www.w3.org/2002/07/owl#> .
@prefix rdfs: <http://www.w3.org/2000/01/rdf-schema#> .
@prefix xsd: <http://www.w3.org/2001/XMLSchema#> .
@prefix skos: <http://www.w3.org/2004/02/skos/core#> .
@prefix rr: <http://www.w3.org/ns/r2rml#> .
@prefix rml: <http://semweb.mmlab.be/ns/rml#> .
@prefix ql: <http://semweb.mmlab.be/ns/ql#> .
@prefix locn: <http://www.w3.org/ns/locn#> .
@prefix dct: <http://purl.org/dc/terms/> .
@prefix tedm: <http://data.europa.eu/a4g/mapping/sf-rml/> .
@prefix epo: <http://data.europa.eu/a4g/ontology#> .
@prefix epd: <http://data.europa.eu/a4g/resource/> .
@prefix cccev: <http://data.europa.eu/m8g/> .
@prefix org: <http://www.w3.org/ns/org#> .
@prefix cpov: <http://data.europa.eu/m8g/> .

# copy into the mapping_suite_F20, this file and all the imports.
tedm:technical_mapping_F20
  a owl:Ontology ;
  owl:imports 	tedm:contracting_authority, tedm:object, tedm:procedure, tedm:award_of_contract, tedm:complementary_information, tedm:annexe_d1, tedm:result_notice;
  dct:description "This module provides the mapping definitions for the F20 form"@en ;
  rdfs:label "TED-SWS mapping of F20"@en ;
  dct:date "2022-05-11"^^xsd:date .
#Section 1
# Buyer Profile & Organisation
tedm:BuyerOrganisationGroup a rr:TripleMap ;
    rml:logicalSource
        [
            rml:source "data/source.xml" ;
            rml:iterator "/TED_EXPORT/FORM_SECTION/F20_2014/CONTRACTING_BODY/ADDRESS_CONTRACTING_BODY_ADDITIONAL[1]" ;
            rml:referenceFormulation ql:XPath
        ] ;
    rr:subjectMap
        [
            rr:template "http://data.europa.eu/a4g/resource/BuyerOrganisationGroup/{replace(replace(/TED_EXPORT/CODED_DATA_SECTION/NOTICE_DATA/NO_DOC_OJS, ' ', '-' ), '/' , '-')}/{unparsed-text('https://digest-api.ted-data.eu/api/v1/hashing/fn/uuid/' || encode-for-uri(path()) || '?response_type=raw')}" ;
            rr:class epo:OrganisationGroup

        ] .
tedm:OrganisationIdentifier a rr:TripleMap ;
    rr:subjectMap
        [
            rml:reference "if (exists(NATIONALID)) then 'http://data.europa.eu/a4g/resource/OrganisationIdentifier/' || replace(replace(/TED_EXPORT/CODED_DATA_SECTION/NOTICE_DATA/NO_DOC_OJS, ' ', '-' ), '/' , '-') || '/' || unparsed-text('https://digest-api.ted-data.eu/api/v1/hashing/fn/uuid/' || encode-for-uri(path()) || '?response_type=raw') else null" ;
            rr:class epo:Identifier
        ] ;
    rml:logicalSource
        [
            rml:source "data/source.xml" ;
            rml:iterator "/TED_EXPORT/FORM_SECTION/F20_2014[1]/CONTRACTING_BODY/ADDRESS_CONTRACTING_BODY";
            rml:referenceFormulation ql:XPath
        ].
tedm:ContactPoint a rr:TriplesMap ;
    rr:subjectMap
        [
            rml:reference "if(exists(E_MAIL) or exists(FAX) or exists(PHONE) or exists(URL_GENERAL) or exists(CONTACT_POINT)) then 'http://data.europa.eu/a4g/resource/ContactPoint/' || replace(replace(/TED_EXPORT/CODED_DATA_SECTION/NOTICE_DATA/NO_DOC_OJS, ' ', '-' ), '/' , '-') || '/' || unparsed-text('https://digest-api.ted-data.eu/api/v1/hashing/fn/uuid/' || encode-for-uri(path()) || '?response_type=raw') else null" ;
            rr:class cpov:ContactPoint

        ] ;
    rml:logicalSource
        [
            rml:source "data/source.xml" ;
            rml:iterator "/TED_EXPORT/FORM_SECTION/F20_2014/CONTRACTING_BODY/ADDRESS_CONTRACTING_BODY" ;
            rml:referenceFormulation ql:XPath
        ] ;
    rr:predicateObjectMap
        [
            rr:predicate epo:hasContactName ;
            rr:objectMap
                [
                    rml:reference "CONTACT_POINT";
                    rml:languageMap [
                         rml:reference "lower-case(ancestor::F20_2014/@LG)"
                    ]
                ]
        ] .
tedm:OrganisationAddress  a rr:TriplesMap ;
    rr:subjectMap
        [
            rr:template "http://data.europa.eu/a4g/resource/OrganisationAddress/{replace(replace(/TED_EXPORT/CODED_DATA_SECTION/NOTICE_DATA/NO_DOC_OJS, ' ', '-' ), '/' , '-')}/{unparsed-text('https://digest-api.ted-data.eu/api/v1/hashing/fn/uuid/' || encode-for-uri(path()) || '?response_type=raw')}" ;
            rr:class locn:Address

        ] ;
    rml:logicalSource
        [
            rml:source "data/source.xml" ;
            rml:iterator "/TED_EXPORT/FORM_SECTION/F20_2014[1]/CONTRACTING_BODY/ADDRESS_CONTRACTING_BODY" ;
            rml:referenceFormulation ql:XPath
        ] .

tedm:AdditionalOrganisationIdentifier a rr:TripleMap ;
    rr:subjectMap
        [
            rml:reference "if (exists(NATIONALID)) then 'http://data.europa.eu/a4g/resource/OrganisationIdentifier/' || replace(replace(/TED_EXPORT/CODED_DATA_SECTION/NOTICE_DATA/NO_DOC_OJS, ' ', '-' ), '/' , '-') || '/' || unparsed-text('https://digest-api.ted-data.eu/api/v1/hashing/fn/uuid/' || encode-for-uri(path()) || '?response_type=raw') else null" ;
            rr:class epo:Identifier
        ] ;
    rml:logicalSource
        [
            rml:source "data/source.xml" ;
            rml:iterator "/TED_EXPORT/FORM_SECTION/F20_2014[1]/CONTRACTING_BODY/ADDRESS_CONTRACTING_BODY_ADDITIONAL";
            rml:referenceFormulation ql:XPath
        ].
tedm:AdditionalContactPoint a rr:TriplesMap ;
    rr:subjectMap
        [
            rml:reference "if(exists(E_MAIL) or exists(FAX) or exists(PHONE) or exists(URL_GENERAL) or exists(CONTACT_POINT)) then 'http://data.europa.eu/a4g/resource/AdditionalContactPoint/' || replace(replace(/TED_EXPORT/CODED_DATA_SECTION/NOTICE_DATA/NO_DOC_OJS, ' ', '-' ), '/' , '-') || '/' || unparsed-text('https://digest-api.ted-data.eu/api/v1/hashing/fn/uuid/' || encode-for-uri(path()) || '?response_type=raw') else null" ;
            rr:class cpov:ContactPoint

        ] ;
    rml:logicalSource
        [
            rml:source "data/source.xml" ;
            rml:iterator "/TED_EXPORT/FORM_SECTION/F20_2014/CONTRACTING_BODY/ADDRESS_CONTRACTING_BODY_ADDITIONAL" ;
            rml:referenceFormulation ql:XPath
        ] ;
    rr:predicateObjectMap
        [
            rr:predicate epo:hasContactName ;
            rr:objectMap
                [
                    rml:reference "CONTACT_POINT";
                    rml:languageMap [
                         rml:reference "lower-case(ancestor::F20_2014/@LG)"
                    ]
                ]
        ] .
tedm:AdditionalOrganisationAddress  a rr:TriplesMap ;
    rr:subjectMap
        [
            rr:template "http://data.europa.eu/a4g/resource/OrganisationAddress/{replace(replace(/TED_EXPORT/CODED_DATA_SECTION/NOTICE_DATA/NO_DOC_OJS, ' ', '-' ), '/' , '-')}/{unparsed-text('https://digest-api.ted-data.eu/api/v1/hashing/fn/uuid/' || encode-for-uri(path()) || '?response_type=raw')}" ;
            rr:class locn:Address

        ] ;
    rml:logicalSource
        [
            rml:source "data/source.xml" ;
            rml:iterator "/TED_EXPORT/FORM_SECTION/F20_2014[1]/CONTRACTING_BODY/ADDRESS_CONTRACTING_BODY_ADDITIONAL" ;
            rml:referenceFormulation ql:XPath
        ] .
tedm:AdditionalOrganisation a rr:TripleMap ;
    rr:subjectMap
        [
            rr:template "http://data.europa.eu/a4g/resource/AdditionalOrganisation/{replace(replace(/TED_EXPORT/CODED_DATA_SECTION/NOTICE_DATA/NO_DOC_OJS, ' ', '-' ), '/' , '-')}/{unparsed-text('https://digest-api.ted-data.eu/api/v1/hashing/fn/uuid/' || encode-for-uri(path()) || '?response_type=raw')}" ;
            rr:class org:Organization

        ] ;
    rml:logicalSource
    [
        rml:source "data/source.xml" ;
        rml:iterator "/TED_EXPORT/FORM_SECTION/F20_2014/CONTRACTING_BODY/ADDRESS_CONTRACTING_BODY_ADDITIONAL" ;
        rml:referenceFormulation ql:XPath
    ] ;
    rr:predicateObjectMap
        [
            rr:predicate epo:hasLegalName ;
            rr:objectMap
                [
                    rml:reference "OFFICIALNAME";
                    rml:languageMap [
                         rml:reference "lower-case(ancestor::F20_2014/@LG)"
                    ]
                ] ;
        ] .

tedm:AdditionalBuyerCP a rr:TriplesMap;
    rr:subjectMap
        [
        rml:reference "if (exists(/TED_EXPORT/FORM_SECTION/F20_2014/CONTRACTING_BODY/CENTRAL_PURCHASING)) then 'http://data.europa.eu/a4g/resource/AdditionalBuyer/' || replace(replace(/TED_EXPORT/CODED_DATA_SECTION/NOTICE_DATA/NO_DOC_OJS, ' ', '-' ), '/' , '-') || '/' || unparsed-text('https://digest-api.ted-data.eu/api/v1/hashing/fn/uuid/' || encode-for-uri(path()) || '?response_type=raw') else null" ;
        rr:class epo:Buyer
#            rr:class epo:AwardingCentralPurchasingBody

        ] ;
    rml:logicalSource
    [
        rml:source "data/source.xml" ;
        rml:iterator "/TED_EXPORT/FORM_SECTION/F20_2014/CONTRACTING_BODY/ADDRESS_CONTRACTING_BODY_ADDITIONAL" ;
        rml:referenceFormulation ql:XPath
    ] .
tedm:AdditionalBuyer a rr:TriplesMap;
    rr:subjectMap
        [
        rml:reference "if (not(exists(/TED_EXPORT/FORM_SECTION/F20_2014/CONTRACTING_BODY/CENTRAL_PURCHASING))) then 'http://data.europa.eu/a4g/resource/AdditionalBuyer/' || replace(replace(/TED_EXPORT/CODED_DATA_SECTION/NOTICE_DATA/NO_DOC_OJS, ' ', '-' ), '/' , '-') || '/' || unparsed-text('https://digest-api.ted-data.eu/api/v1/hashing/fn/uuid/' || encode-for-uri(path()) || '?response_type=raw') else null" ;

            rr:class epo:Buyer

        ] ;
    rml:logicalSource
    [
        rml:source "data/source.xml" ;
        rml:iterator "/TED_EXPORT/FORM_SECTION/F20_2014/CONTRACTING_BODY/ADDRESS_CONTRACTING_BODY_ADDITIONAL" ;
        rml:referenceFormulation ql:XPath
    ] .


tedm:AdditionalBuyerProfile a rr:TripleMap ;
    rr:subjectMap
        [
            rml:reference
                "if(exists(URL_BUYER)) then 'http://data.europa.eu/a4g/resource/AdditionalBuyerProfile/' || replace(replace(/TED_EXPORT/CODED_DATA_SECTION/NOTICE_DATA/NO_DOC_OJS, ' ', '-' ), '/' , '-') || '/' || unparsed-text('https://digest-api.ted-data.eu/api/v1/hashing/fn/uuid/' || encode-for-uri(path()) || '?response_type=raw') else null" ;
            rr:class epo:BuyerProfile
        ] ;
    rml:logicalSource
        [
            rml:source "data/source.xml" ;
            rml:iterator "/TED_EXPORT/FORM_SECTION/F20_2014[1]/CONTRACTING_BODY/ADDRESS_CONTRACTING_BODY_ADDITIONAL";
            rml:referenceFormulation ql:XPath
        ].
tedm:Organisation a rr:TripleMap ;
    rr:subjectMap
        [
            rr:template "http://data.europa.eu/a4g/resource/Organisation/{replace(replace(/TED_EXPORT/CODED_DATA_SECTION/NOTICE_DATA/NO_DOC_OJS, ' ', '-' ), '/' , '-')}/{unparsed-text('https://digest-api.ted-data.eu/api/v1/hashing/fn/uuid/' || encode-for-uri(path()) || '?response_type=raw')}" ;
            rr:class org:Organization

        ] ;
    rml:logicalSource
    [
        rml:source "data/source.xml" ;
        rml:iterator "/TED_EXPORT/FORM_SECTION/F20_2014/CONTRACTING_BODY/ADDRESS_CONTRACTING_BODY" ;
        rml:referenceFormulation ql:XPath
    ] ;
    rr:predicateObjectMap
        [
            rr:predicate epo:hasLegalName ;
            rr:objectMap
                [
                    rml:reference "OFFICIALNAME";
                    rml:languageMap [
                         rml:reference "lower-case(ancestor::F20_2014/@LG)"
                    ]
                ] ;
        ] .
tedm:Buyer a rr:TriplesMap;
    rr:subjectMap
        [
        rml:reference "if (not(exists(/TED_EXPORT/FORM_SECTION/F20_2014/CONTRACTING_BODY/CENTRAL_PURCHASING))) then 'http://data.europa.eu/a4g/resource/Buyer/' || replace(replace(/TED_EXPORT/CODED_DATA_SECTION/NOTICE_DATA/NO_DOC_OJS, ' ', '-' ), '/' , '-') || '/' || unparsed-text('https://digest-api.ted-data.eu/api/v1/hashing/fn/uuid/' || encode-for-uri(path()) || '?response_type=raw') else null" ;
        rr:class epo:Buyer

        ] ;
    rml:logicalSource
    [
        rml:source "data/source.xml" ;
        rml:iterator "/TED_EXPORT/FORM_SECTION/F20_2014[1]/CONTRACTING_BODY" ;
        rml:referenceFormulation ql:XPath
    ] .

tedm:BuyerCP a rr:TriplesMap;
    rr:subjectMap
        [
        rml:reference "if (exists(/TED_EXPORT/FORM_SECTION/F20_2014/CONTRACTING_BODY/CENTRAL_PURCHASING)) then 'http://data.europa.eu/a4g/resource/Buyer/' || replace(replace(/TED_EXPORT/CODED_DATA_SECTION/NOTICE_DATA/NO_DOC_OJS, ' ', '-' ), '/' , '-') || '/' || unparsed-text('https://digest-api.ted-data.eu/api/v1/hashing/fn/uuid/' || encode-for-uri(path()) || '?response_type=raw') else null" ;
        rr:class epo:Buyer
#        rr:class epo:AwardingCentralPurchasingBody

        ] ;
    rml:logicalSource
    [
        rml:source "data/source.xml" ;
        rml:iterator "/TED_EXPORT/FORM_SECTION/F20_2014[1]/CONTRACTING_BODY" ;
        rml:referenceFormulation ql:XPath
    ] .

tedm:BuyerProfile a rr:TripleMap ;
    rr:subjectMap
        [

            rr:template "http://data.europa.eu/a4g/resource/BuyerProfile/{replace(replace(/TED_EXPORT/CODED_DATA_SECTION/NOTICE_DATA/NO_DOC_OJS, ' ', '-' ), '/' , '-')}/{unparsed-text('https://digest-api.ted-data.eu/api/v1/hashing/fn/uuid/' || encode-for-uri(path()) || '?response_type=raw')}" ;
            rr:class epo:BuyerProfile
        ] ;
    rml:logicalSource
        [
            rml:source "data/source.xml" ;
            rml:iterator "/TED_EXPORT/FORM_SECTION/F20_2014[1]/CONTRACTING_BODY/ADDRESS_CONTRACTING_BODY/URL_BUYER";
            rml:referenceFormulation ql:XPath
        ].
tedm:NoticeAwardInformation a rr:TriplesMap ;
    rr:subjectMap
        [
            rr:template "http://data.europa.eu/a4g/resource/NoticeAwardInformation/{replace(replace(/TED_EXPORT/CODED_DATA_SECTION/NOTICE_DATA/NO_DOC_OJS, ' ', '-' ), '/' , '-')}/{unparsed-text('https://digest-api.ted-data.eu/api/v1/hashing/fn/uuid/' || encode-for-uri(path()) || '?response_type=raw')}" ;
            rr:class epo:NoticeAwardInformation

        ] ;
    rml:logicalSource
        [
            rml:source "data/source.xml" ;
            rml:iterator "/TED_EXPORT/FORM_SECTION/F20_2014[1]/OBJECT_CONTRACT" ;
            rml:referenceFormulation ql:XPath
        ] .
tedm:ResultNotice a rr:TriplesMap ;
    rr:subjectMap
        [
            rr:template "http://data.europa.eu/a4g/resource/ResultNotice/{replace(replace(/TED_EXPORT/CODED_DATA_SECTION/NOTICE_DATA/NO_DOC_OJS, ' ', '-' ), '/' , '-')}/{unparsed-text('https://digest-api.ted-data.eu/api/v1/hashing/fn/uuid/' || encode-for-uri(path()) || '?response_type=raw')}" ;
            rr:class epo:ResultNotice

        ] ;
    rml:logicalSource
        [
            rml:source "data/source.xml" ;
            rml:iterator "/TED_EXPORT/FORM_SECTION/F20_2014[1]/OBJECT_CONTRACT" ;
            rml:referenceFormulation ql:XPath
        ] .

tedm:ProcurementLowestReceivedTenderValue a rr:TriplesMap ;
    rml:logicalSource
        [
            rml:source "data/source.xml" ;
            rml:iterator "/TED_EXPORT/FORM_SECTION/F20_2014[1]/OBJECT_CONTRACT" ;
            rml:referenceFormulation ql:XPath
        ] ;
    rr:subjectMap
        [
            rml:reference "if (exists(VAL_RANGE_TOTAL/LOW)) then 'http://data.europa.eu/a4g/resource/ProcurementLowestReceivedTenderValue/' || replace(replace(/TED_EXPORT/CODED_DATA_SECTION/NOTICE_DATA/NO_DOC_OJS, ' ', '-' ), '/' , '-') || '/' || unparsed-text('https://digest-api.ted-data.eu/api/v1/hashing/fn/uuid/' || encode-for-uri(path()) || '?response_type=raw') else null" ;
            rr:class epo:MonetaryValue

        ] .
tedm:ProcurementHighestReceivedTenderValue  a rr:TriplesMap ;
    rml:logicalSource
        [
            rml:source "data/source.xml" ;
            rml:iterator "/TED_EXPORT/FORM_SECTION/F20_2014[1]/OBJECT_CONTRACT" ;
            rml:referenceFormulation ql:XPath
        ] ;
    rr:subjectMap
        [
            rml:reference "if (exists(VAL_RANGE_TOTAL/HIGH)) then 'http://data.europa.eu/a4g/resource/ProcurementHighestReceivedTenderValue/' || replace(replace(/TED_EXPORT/CODED_DATA_SECTION/NOTICE_DATA/NO_DOC_OJS, ' ', '-' ), '/' , '-') || '/' || unparsed-text('https://digest-api.ted-data.eu/api/v1/hashing/fn/uuid/' || encode-for-uri(path()) || '?response_type=raw') else null" ;
            rr:class epo:MonetaryValue

        ] .
tedm:Reviewer a rr:TripleMap ;
    rr:subjectMap
        [
            rr:template "http://data.europa.eu/a4g/resource/Reviewer/{replace(replace(/TED_EXPORT/CODED_DATA_SECTION/NOTICE_DATA/NO_DOC_OJS, ' ', '-' ), '/' , '-')}/{unparsed-text('https://digest-api.ted-data.eu/api/v1/hashing/fn/uuid/' || encode-for-uri(path()) || '?response_type=raw')}" ;
            rr:class epo:Reviewer

        ] ;
    rml:logicalSource
    [
        rml:source "data/source.xml" ;
        rml:iterator "/TED_EXPORT/FORM_SECTION/F20_2014[1]/COMPLEMENTARY_INFO/ADDRESS_REVIEW_BODY" ;
        rml:referenceFormulation ql:XPath
    ] .

tedm:DirectAwardTerm a rr:TriplesMap ;
    rr:subjectMap
        [
            rml:reference "if (exists(PT_AWARD_CONTRACT_WITHOUT_CALL) or exists(PT_AWARD_CONTRACT_WITHOUT_PUBLICATION)) then 'http://data.europa.eu/a4g/resource/DirectAwardTerm/' || replace(replace(/TED_EXPORT/CODED_DATA_SECTION/NOTICE_DATA/NO_DOC_OJS, ' ', '-' ), '/' , '-') || '/' || unparsed-text('https://digest-api.ted-data.eu/api/v1/hashing/fn/uuid/' || encode-for-uri(path()) || '?response_type=raw') else null" ;
            # rr:template "http://data.europa.eu/a4g/resource/DirectAwardTerm/{replace(replace(/TED_EXPORT/CODED_DATA_SECTION/NOTICE_DATA/NO_DOC_OJS, ' ', '-' ), '/' , '-')}/{unparsed-text('https://digest-api.ted-data.eu/api/v1/hashing/fn/uuid/' || encode-for-uri(path()) || '?response_type=raw')}" ;
            rr:class epo:DirectAwardTerm

        ] ;
    rml:logicalSource
        [
            rml:source "data/source.xml" ;
            rml:iterator "/TED_EXPORT/FORM_SECTION/F20_2014/PROCEDURE" ;
            rml:referenceFormulation ql:XPath
        ] .
tedm:ProcedureSpecificTerm a rr:TriplesMap ;
    rr:subjectMap
        [
            rr:template "http://data.europa.eu/a4g/resource/ProcedureSpecificTerm/{replace(replace(/TED_EXPORT/CODED_DATA_SECTION/NOTICE_DATA/NO_DOC_OJS, ' ', '-' ), '/' , '-')}/{unparsed-text('https://digest-api.ted-data.eu/api/v1/hashing/fn/uuid/' || encode-for-uri(path()) || '?response_type=raw')}" ;
            rr:class epo:ProcedureSpecificTerm

        ] ;
    rml:logicalSource
        [
            rml:source "data/source.xml" ;
            rml:iterator "/TED_EXPORT/FORM_SECTION/F20_2014/CONTRACTING_BODY" ;
            rml:referenceFormulation ql:XPath
        ] .
tedm:PreviousProcedure a rr:TriplesMap ;
    rr:subjectMap
        [
            rml:reference "if(exists(D_PROC_OPEN) or exists(D_PROC_RESTRICTED)) then 'http://data.europa.eu/a4g/resource/PreviousProcedure/' || replace(replace(/TED_EXPORT/CODED_DATA_SECTION/NOTICE_DATA/NO_DOC_OJS, ' ', '-' ), '/' , '-') || '/' || unparsed-text('https://digest-api.ted-data.eu/api/v1/hashing/fn/uuid/' || encode-for-uri(path()) || '?response_type=raw') else null" ;
            rr:class epo:Procedure

        ] ;
    rml:logicalSource
        [
            rml:source "data/source.xml" ;
            rml:iterator "/TED_EXPORT/FORM_SECTION/F20_2014/PROCEDURE/PT_AWARD_CONTRACT_WITHOUT_CALL/D_ACCORDANCE_ARTICLE" ;
            rml:referenceFormulation ql:XPath
        ] .
tedm:Procedure a rr:TriplesMap ;
    rr:subjectMap
        [
            rr:template "http://data.europa.eu/a4g/resource/Procedure/{replace(replace(/TED_EXPORT/CODED_DATA_SECTION/NOTICE_DATA/NO_DOC_OJS, ' ', '-' ), '/' , '-')}/{unparsed-text('https://digest-api.ted-data.eu/api/v1/hashing/fn/uuid/' || encode-for-uri(path()) || '?response_type=raw')}" ;
            rr:class epo:Procedure

        ] ;
    rml:logicalSource
        [
            rml:source "data/source.xml" ;
            rml:iterator "/TED_EXPORT/FORM_SECTION/F20_2014/OBJECT_CONTRACT" ;
            rml:referenceFormulation ql:XPath
        ] ;
    rr:predicateObjectMap
        [
            rr:predicate epo:hasTitle ;
            rr:objectMap
                [
                    rml:reference "TITLE";
                    rml:languageMap [
                         rml:reference "lower-case(ancestor::F20_2014/@LG)"
                    ]
                ] ;
        ] ;
    rr:predicateObjectMap
        [
            rr:predicate epo:hasAdditionalInformation ;
            rr:objectMap
                [
                    rml:reference "../COMPLEMENTARY_INFO/INFO_ADD";
                    rml:languageMap [
                         rml:reference "lower-case(ancestor::F20_2014/@LG)"
                    ]
                ] ;
        ] ;
    rr:predicateObjectMap
        [
            rr:predicate epo:hasDescription ;
            rr:objectMap
                [
                    rml:reference "SHORT_DESCR";
                    rml:languageMap [
                         rml:reference "lower-case(ancestor::F20_2014/@LG)"
                    ]
                ] ;
        ] .
#    rr:predicateObjectMap
#        [
#            rr:predicate epo:hasLegalBasis ;
#            rr:objectMap
#                [
#                    rml:reference "if (not(exists(/TED_EXPORT/FORM_SECTION/F20_2014/CONTRACTING_BODY/ADDRESS_CONTRACTING_BODY/JOINT_PROCUREMENT_INVOLVED/PROCUREMENT_LAW))) then 'http://publications.europa.eu/resource/authority/legal-basis/OP_DATPRO' else null";
#                    rr:termType rr:IRI ;
#                ]
#
#        ] ;
#    rr:predicateObjectMap
#    [
#        rr:predicate epo:hasLegalBasis ;
#        rr:objectMap
#            [
#                rr:parentTriplesMap tedm:legalBasis;
#                rr:joinCondition [
#                        rr:child "/TED_EXPORT/FORM_SECTION/F20_2014/CONTRACTING_BODY/ADDRESS_CONTRACTING_BODY/JOINT_PROCUREMENT_INVOLVED/PROCUREMENT_LAW";
#                        rr:parent "code.value";
#                    ];
#            ] ;
#    ] ;


tedm:ProcurementMonetaryValue a rr:TriplesMap ;
    rml:logicalSource
        [
            rml:source "data/source.xml" ;
            rml:iterator "/TED_EXPORT/FORM_SECTION/F20_2014[1]/OBJECT_CONTRACT" ;
            rml:referenceFormulation ql:XPath
        ] ;
    rr:subjectMap
        [
            rml:reference "if (exists(VAL_TOTAL)) then 'http://data.europa.eu/a4g/resource/ProcurementMonetaryValue/' || replace(replace(/TED_EXPORT/CODED_DATA_SECTION/NOTICE_DATA/NO_DOC_OJS, ' ', '-' ), '/' , '-') || '/' || unparsed-text('https://digest-api.ted-data.eu/api/v1/hashing/fn/uuid/' || encode-for-uri(path()) || '?response_type=raw') else null" ;
            rr:class epo:MonetaryValue

        ] .
tedm:ProcedureIdentifier a rr:TripleMap ;
    rml:logicalSource
        [
            rml:source "data/source.xml" ;
            rml:iterator "/TED_EXPORT/FORM_SECTION/F20_2014[1]/OBJECT_CONTRACT";
            rml:referenceFormulation ql:XPath
        ];
    rr:subjectMap
        [
            rml:reference "if (exists(/TED_EXPORT/FORM_SECTION/F20_2014[1]/OBJECT_CONTRACT/REFERENCE_NUMBER)) then 'http://data.europa.eu/a4g/resource/ProcedureIdentifier/' || replace(replace(/TED_EXPORT/CODED_DATA_SECTION/NOTICE_DATA/NO_DOC_OJS, ' ', '-' ), '/' , '-') || '/' || unparsed-text('https://digest-api.ted-data.eu/api/v1/hashing/fn/uuid/' || encode-for-uri(path()) || '?response_type=raw') else null" ;
            rr:class epo:Identifier
        ] .
tedm:ProcedurePurpose a rr:TriplesMap ;
    rml:logicalSource
        [
            rml:source "data/source.xml" ;
            rml:iterator "/TED_EXPORT/FORM_SECTION/F20_2014[1]/OBJECT_CONTRACT" ;
            rml:referenceFormulation ql:XPath
        ] ;
    rr:subjectMap
        [
            rr:template "http://data.europa.eu/a4g/resource/ProcedurePurpose/{replace(replace(/TED_EXPORT/CODED_DATA_SECTION/NOTICE_DATA/NO_DOC_OJS, ' ', '-' ), '/' , '-')}/{unparsed-text('https://digest-api.ted-data.eu/api/v1/hashing/fn/uuid/' || encode-for-uri(path()) || '?response_type=raw')}" ;
            rr:class epo:Purpose

        ] .
#    rr:predicateObjectMap
#        [
#            rr:predicate epo:hasMainClassification ;
#            rr:objectMap
#                [
#                    rml:reference "if (not(exists(/TED_EXPORT/FORM_SECTION/F20_2014[1]/OBJECT_CONTRACT/CPV_MAIN/CPV_CODE/@CODE))) then 'http://data.europa.eu/cpv/cpv/OP_DATPRO' else null";
#                    rr:termType rr:IRI;
#                ]
#
#        ] ;
#    rr:predicateObjectMap
#        [
#            rr:predicate epo:hasContractNatureType ;
#            rr:objectMap
#                [
#                    rml:reference "if (not(exists(/TED_EXPORT/FORM_SECTION/F20_2014[1]/OBJECT_CONTRACT/TYPE_CONTRACT/@CTYPE))) then 'http://publications.europa.eu/resource/authority/contract-nature/OP_DATPRO' else null";
#                    rr:termType rr:IRI;
#                ]
#
#        ] ;

tedm:Notice a rr:TriplesMap ;
    rml:logicalSource
        [
            rml:source "data/source.xml" ;
            rml:iterator "/TED_EXPORT/FORM_SECTION/F20_2014[1]/PROCEDURE" ;
            rml:referenceFormulation ql:XPath
        ] ;
    rr:subjectMap
        [
            rml:reference "if (exists(NOTICE_NUMBER_OJ)) then 'http://data.europa.eu/a4g/resource/Notice/' || replace(replace(/TED_EXPORT/CODED_DATA_SECTION/NOTICE_DATA/NO_DOC_OJS, ' ', '-' ), '/' , '-') || '/' || unparsed-text('https://digest-api.ted-data.eu/api/v1/hashing/fn/uuid/' || encode-for-uri(path()) || '?response_type=raw') else null" ;
            rr:class epo:Notice

        ] .
tedm:NoticeIdentifier a rr:TripleMap ;
    rml:logicalSource
        [
            rml:source "data/source.xml" ;
            rml:iterator "/TED_EXPORT/FORM_SECTION/F20_2014[1]/PROCEDURE";
            rml:referenceFormulation ql:XPath
        ];
    rr:subjectMap
        [
            rml:reference "if (exists(NOTICE_NUMBER_OJ)) then 'http://data.europa.eu/a4g/resource/NoticeIdentifier/' || replace(replace(/TED_EXPORT/CODED_DATA_SECTION/NOTICE_DATA/NO_DOC_OJS, ' ', '-' ), '/' , '-') || '/' || unparsed-text('https://digest-api.ted-data.eu/api/v1/hashing/fn/uuid/' || encode-for-uri(path()) || '?response_type=raw') else null" ;
            rr:class epo:Identifier
        ] .
tedm:Fund a rr:TriplesMap ;
    rml:logicalSource
        [
            rml:source "data/source.xml" ;
            rml:iterator "/TED_EXPORT/FORM_SECTION/F20_2014/OBJECT_CONTRACT/OBJECT_DESCR" ;
            rml:referenceFormulation ql:XPath
        ] ;
    rr:subjectMap
        [
            rml:reference "if (exists(EU_PROGR_RELATED)) then 'http://data.europa.eu/a4g/resource/Fund/' || replace(replace(/TED_EXPORT/CODED_DATA_SECTION/NOTICE_DATA/NO_DOC_OJS, ' ', '-' ), '/' , '-') || '/' || unparsed-text('https://digest-api.ted-data.eu/api/v1/hashing/fn/uuid/' || encode-for-uri(path()) || '?response_type=raw') else null" ;
            rr:class epo:Fund

        ] ;
    rr:predicateObjectMap
        [
            rr:predicate epo:hasDescription;
            rr:objectMap
                [
                    rml:reference "EU_PROGR_RELATED";
                    rml:languageMap [
                         rml:reference "lower-case(ancestor::F20_2014/@LG)"
                    ]
                ]
        ] .
tedm:Lot a rr:TriplesMap ;
    rml:logicalSource
        [
            rml:source "data/source.xml" ;
            rml:iterator "/TED_EXPORT/FORM_SECTION/F20_2014/OBJECT_CONTRACT/OBJECT_DESCR" ;
            rml:referenceFormulation ql:XPath
        ] ;
    rr:subjectMap
        [
            rr:template "http://data.europa.eu/a4g/resource/Lot/{replace(replace(/TED_EXPORT/CODED_DATA_SECTION/NOTICE_DATA/NO_DOC_OJS, ' ', '-' ), '/' , '-')}/{unparsed-text('https://digest-api.ted-data.eu/api/v1/hashing/fn/uuid/' || encode-for-uri(path()) || '?response_type=raw')}" ;
            rr:class epo:Lot

        ] ;
    rr:predicateObjectMap
        [
            rr:predicate epo:hasTitle ;
            rr:objectMap
                [
                    rml:reference "TITLE";
                    rml:languageMap [
                         rml:reference "lower-case(ancestor::F20_2014/@LG)"
                    ]
                ]
        ] ;
    rr:predicateObjectMap
        [
            rr:predicate epo:hasDescription ;
            rr:objectMap
                [
                    rml:reference "SHORT_DESCR";
                    rml:languageMap [
                         rml:reference "lower-case(ancestor::F20_2014/@LG)"
                    ]
                ] ;
        ] ;
    rr:predicateObjectMap
        [
            rr:predicate epo:hasAdditionalInformation ;
            rr:objectMap
                [
                    rml:reference "INFO_ADD";
                    rml:languageMap [
                         rml:reference "lower-case(ancestor::F20_2014/@LG)"
                    ]
                ] ;
        ] .
tedm:LotIdentifier a rr:TripleMap ;
    rml:logicalSource
        [
            rml:source "data/source.xml" ;
            rml:iterator "/TED_EXPORT/FORM_SECTION/F20_2014[1]/OBJECT_CONTRACT/OBJECT_DESCR";
            rml:referenceFormulation ql:XPath
        ];
    rr:subjectMap
        [
            rml:reference "if (exists(LOT_NO)) then 'http://data.europa.eu/a4g/resource/LotIdentifier/' || replace(replace(/TED_EXPORT/CODED_DATA_SECTION/NOTICE_DATA/NO_DOC_OJS, ' ', '-' ), '/' , '-') || '/' || unparsed-text('https://digest-api.ted-data.eu/api/v1/hashing/fn/uuid/' || encode-for-uri(path()) || '?response_type=raw') else null" ;
            rr:class epo:Identifier
        ] ;
    rr:predicateObjectMap
        [
            rr:predicate epo:hasIdentifierValue;
            rr:objectMap
                [
                    rml:reference "/TED_EXPORT/FORM_SECTION/F20_2014/AWARD_CONTRACT[@ITEM=ancestor::OBJECT_DESCR/@ITEM]/LOT_NO";
                ]
        ] .
tedm:LotPurpose a rr:TriplesMap ;
    rml:logicalSource
        [
            rml:source "data/source.xml" ;
            rml:iterator "/TED_EXPORT/FORM_SECTION/F20_2014[1]/OBJECT_CONTRACT/OBJECT_DESCR/CPV_ADDITIONAL" ;
            rml:referenceFormulation ql:XPath
        ] ;
    rr:subjectMap
        [
            rml:reference
                "if(exists(.)) then 'http://data.europa.eu/a4g/resource/LotPurpose/' || replace(replace(/TED_EXPORT/CODED_DATA_SECTION/NOTICE_DATA/NO_DOC_OJS, ' ', '-' ), '/' , '-') || '/' || unparsed-text('https://digest-api.ted-data.eu/api/v1/hashing/fn/uuid/' || encode-for-uri(../path()) || '?response_type=raw') else null" ;
            rr:class epo:Purpose

        ] .
tedm:ContractTerm a rr:TriplesMap ;
    rml:logicalSource
        [
            rml:source "data/source.xml" ;
            rml:iterator "/TED_EXPORT/FORM_SECTION/F20_2014/OBJECT_CONTRACT/OBJECT_DESCR" ;
            rml:referenceFormulation ql:XPath
        ] ;
    rr:subjectMap
        [
            rr:template "http://data.europa.eu/a4g/resource/ContractTerm/{replace(replace(/TED_EXPORT/CODED_DATA_SECTION/NOTICE_DATA/NO_DOC_OJS, ' ', '-' ), '/' , '-')}/{unparsed-text('https://digest-api.ted-data.eu/api/v1/hashing/fn/uuid/' || encode-for-uri(path()) || '?response_type=raw')}" ;
            rr:class epo:ContractTerm

        ] ;
    rr:predicateObjectMap
        [
            rr:predicate epo:hasOptionsDescription ;
            rr:objectMap
                [
                    rml:reference "OPTIONS_DESCR";
                    rml:languageMap [
                         rml:reference "lower-case(ancestor::F20_2014/@LG)"
                    ]
                ] ;
        ] .
tedm:ContractTermLocation a rr:TriplesMap ;
    rml:logicalSource
        [
            rml:source "data/source.xml" ;
            rml:iterator "/TED_EXPORT/FORM_SECTION/F20_2014[1]/OBJECT_CONTRACT/OBJECT_DESCR" ;
            rml:referenceFormulation ql:XPath
        ] ;
    rr:subjectMap
        [
            rr:template "http://data.europa.eu/a4g/resource/ContractTermLocation/{replace(replace(/TED_EXPORT/CODED_DATA_SECTION/NOTICE_DATA/NO_DOC_OJS, ' ', '-' ), '/' , '-')}/{unparsed-text('https://digest-api.ted-data.eu/api/v1/hashing/fn/uuid/' || encode-for-uri(path()) || '?response_type=raw')}" ;
            rr:class dct:Location

        ] .
tedm:ContractTermLocationAddress a rr:TriplesMap ;
    rml:logicalSource
        [
            rml:source "data/source.xml" ;
            rml:iterator "/TED_EXPORT/FORM_SECTION/F20_2014/OBJECT_CONTRACT/OBJECT_DESCR" ;
            rml:referenceFormulation ql:XPath
        ] ;
    rr:subjectMap
        [
            rml:reference
                "if(exists(MAIN_SITE)) then 'http://data.europa.eu/a4g/resource/ContractTermLocationAddress/' || replace(replace(/TED_EXPORT/CODED_DATA_SECTION/NOTICE_DATA/NO_DOC_OJS, ' ', '-' ), '/' , '-') || '/' || unparsed-text('https://digest-api.ted-data.eu/api/v1/hashing/fn/uuid/' || encode-for-uri(path()) || '?response_type=raw') else null" ;
            rr:class locn:Address

        ] ;
    rr:predicateObjectMap
        [
            rr:predicate locn:fullAddress ;
            rr:objectMap
                 [
                    rml:reference "MAIN_SITE";
                    rml:languageMap [
                         rml:reference "lower-case(ancestor::F20_2014/@LG)"
                    ]
                ] ;
        ] .
tedm:AwardCriterionQuality a rr:TripleMap ;
    rml:logicalSource
        [
            rml:source "data/source.xml" ;
            rml:iterator "/TED_EXPORT/FORM_SECTION/F20_2014/OBJECT_CONTRACT/OBJECT_DESCR/AC/AC_QUALITY" ;
            rml:referenceFormulation ql:XPath
        ] ;
    rr:subjectMap
        [
            rr:template "http://data.europa.eu/a4g/resource/AwardCriterionQuality/{replace(replace(/TED_EXPORT/CODED_DATA_SECTION/NOTICE_DATA/NO_DOC_OJS, ' ', '-' ), '/' , '-')}/{unparsed-text('https://digest-api.ted-data.eu/api/v1/hashing/fn/uuid/' || encode-for-uri(path()) || '?response_type=raw')}" ;
            rr:class epo:AwardCriterion

        ] ;
    rr:predicateObjectMap
        [
            rr:predicate cccev:name ;
            rr:objectMap
                [
                    rml:reference "AC_CRITERION";
                    rml:languageMap [
                         rml:reference "lower-case(ancestor::F20_2014/@LG)"
                    ]
                ] ;
        ] ;
    rr:predicateObjectMap
        [
            rr:predicate cccev:weight ;
            rr:objectMap
                [
                    rml:reference "AC_WEIGHTING";
                    rml:languageMap [
                         rml:reference "lower-case(ancestor::F20_2014/@LG)"
                    ]
                ] ;
        ] .
tedm:AwardCriterionPrice a rr:TripleMap ;
    rml:logicalSource
        [
            rml:source "data/source.xml" ;
            rml:iterator "/TED_EXPORT/FORM_SECTION/F20_2014/OBJECT_CONTRACT/OBJECT_DESCR/AC/AC_PRICE" ;
            rml:referenceFormulation ql:XPath
        ] ;
    rr:subjectMap
        [
            rr:template "http://data.europa.eu/a4g/resource/AwardCriterionPrice/{replace(replace(/TED_EXPORT/CODED_DATA_SECTION/NOTICE_DATA/NO_DOC_OJS, ' ', '-' ), '/' , '-')}/{unparsed-text('https://digest-api.ted-data.eu/api/v1/hashing/fn/uuid/' || encode-for-uri(path()) || '?response_type=raw')}" ;
            rr:class epo:AwardCriterion

        ] ;
    rr:predicateObjectMap
        [
            rr:predicate cccev:weight ;
            rr:objectMap
                [
                    rml:reference "AC_WEIGHTING";
                    rml:languageMap [
                         rml:reference "lower-case(ancestor::F20_2014/@LG)"
                    ]
                ] ;
        ] .
tedm:AwardCriterionCost a rr:TripleMap ;
    rml:logicalSource
        [
            rml:source "data/source.xml" ;
            rml:iterator "/TED_EXPORT/FORM_SECTION/F20_2014/OBJECT_CONTRACT/OBJECT_DESCR/AC/AC_COST" ;
            rml:referenceFormulation ql:XPath
        ] ;
    rr:subjectMap
        [
            rr:template "http://data.europa.eu/a4g/resource/AwardCriterionCost/{replace(replace(/TED_EXPORT/CODED_DATA_SECTION/NOTICE_DATA/NO_DOC_OJS, ' ', '-' ), '/' , '-')}/{unparsed-text('https://digest-api.ted-data.eu/api/v1/hashing/fn/uuid/' || encode-for-uri(path()) || '?response_type=raw')}" ;
            rr:class epo:AwardCriterion

        ] ;
    rr:predicateObjectMap
        [
            rr:predicate cccev:name ;
            rr:objectMap
                [
                    rml:reference "AC_CRITERION";
                    rml:languageMap [
                         rml:reference "lower-case(ancestor::F20_2014/@LG)"
                    ]
                ] ;
        ] ;
    rr:predicateObjectMap
        [
            rr:predicate cccev:weight ;
            rr:objectMap
                [
                    rml:reference "AC_WEIGHTING";
                    rml:languageMap [
                         rml:reference "lower-case(ancestor::F20_2014/@LG)"
                    ]
                ] ;
        ] .

# Section 3     #specific for F21,F22,F23,F24,F01,F02,F04,F05,F07,F12 and T02
#tedm:SelectionCriterion a rr:TriplesMap ;
#    rml:logicalSource
#        [
#            rml:source "data/source.xml" ;
#            rml:iterator "/TED_EXPORT/FORM_SECTION/F20_2014/LEFTI" ;
#            rml:referenceFormulation ql:XPath
#        ] ;
#    rr:subjectMap
#        [
#            rr:template "http://data.europa.eu/a4g/resource/SelectionCriterion/{replace(replace(/TED_EXPORT/CODED_DATA_SECTION/NOTICE_DATA/NO_DOC_OJS, ' ', '-' ), '/' , '-')}/{unparsed-text('https://digest-api.ted-data.eu/api/v1/hashing/fn/uuid/' || encode-for-uri(path()) || '?response_type=raw')}" ;
#            rr:class epo:SelectionCriterion
#        ] .

# Section 4
tedm:FrameworkAgreementTechniqueUsage a rr:TriplesMap ;
    rml:logicalSource
        [
            rml:source "data/source.xml" ;
            rml:iterator "/TED_EXPORT/FORM_SECTION/F20_2014[1]/PROCEDURE" ;
            rml:referenceFormulation ql:XPath
        ] ;
    rr:subjectMap
        [
            rml:reference
                "if(exists(FRAMEWORK)) then 'http://data.europa.eu/a4g/resource/FrameworkAgreementTechniqueUsage/' || replace(replace(/TED_EXPORT/CODED_DATA_SECTION/NOTICE_DATA/NO_DOC_OJS, ' ', '-' ), '/' , '-') || '/' || unparsed-text('https://digest-api.ted-data.eu/api/v1/hashing/fn/uuid/' || encode-for-uri(path()) || '?response_type=raw') else null" ;
            rr:class epo:FrameworkAgreementTechniqueUsage

        ] .
tedm:FrameworkAgreementTerm a rr:TriplesMap ;
    rml:logicalSource
        [
            rml:source "data/source.xml" ;
            rml:iterator "/TED_EXPORT/FORM_SECTION/F20_2014[1]/PROCEDURE" ;
            rml:referenceFormulation ql:XPath
        ] ;
    rr:subjectMap
        [
            rml:reference
                "if(exists(FRAMEWORK)) then 'http://data.europa.eu/a4g/resource/FrameworkAgreementTerm/' || replace(replace(/TED_EXPORT/CODED_DATA_SECTION/NOTICE_DATA/NO_DOC_OJS, ' ', '-' ), '/' , '-') || '/' || unparsed-text('https://digest-api.ted-data.eu/api/v1/hashing/fn/uuid/' || encode-for-uri(path()) || '?response_type=raw') else null" ;
            rr:class epo:FrameworkAgreementTerm

        ] .
tedm:ProcurementProcessInformation a rr:TriplesMap ;
    rml:logicalSource
        [
            rml:source "data/source.xml" ;
            rml:iterator "/TED_EXPORT/FORM_SECTION/F20_2014[1]/PROCEDURE" ;
            rml:referenceFormulation ql:XPath
        ] ;
    rr:subjectMap
        [
        rml:reference
            "if(exists(NOTICE_NUMBER_OJ) or exists(TERMINATION_DPS) or exists(TERMINATION_PIN)) then 'http://data.europa.eu/a4g/resource/ProcurementProcessInformation/' || replace(replace(/TED_EXPORT/CODED_DATA_SECTION/NOTICE_DATA/NO_DOC_OJS, ' ', '-' ), '/' , '-') || '/' || unparsed-text('https://digest-api.ted-data.eu/api/v1/hashing/fn/uuid/' || encode-for-uri(path()) || '?response_type=raw') else null" ;
        #rr:template "http://data.europa.eu/a4g/resource/ProcurementProcessInformation/{replace(replace(/TED_EXPORT/CODED_DATA_SECTION/NOTICE_DATA/NO_DOC_OJS, ' ', '-' ), '/' , '-')}/{unparsed-text('https://digest-api.ted-data.eu/api/v1/hashing/fn/uuid/' || encode-for-uri(path()) || '?response_type=raw')}" ;
        rr:class epo:ProcurementProcessInformation

        ] .
tedm:DynamicPurchaseSystemTechniqueUsage a rr:TriplesMap ;
    rml:logicalSource
        [
            rml:source "data/source.xml" ;
            rml:iterator "/TED_EXPORT/FORM_SECTION/F20_2014[1]/PROCEDURE" ;
            rml:referenceFormulation ql:XPath
        ] ;
    rr:subjectMap
        [
            rml:reference
                "if(exists(DPS)) then 'http://data.europa.eu/a4g/resource/DynamicPurchaseSystemTechniqueUsage/' || replace(replace(/TED_EXPORT/CODED_DATA_SECTION/NOTICE_DATA/NO_DOC_OJS, ' ', '-' ), '/' , '-') || '/' || unparsed-text('https://digest-api.ted-data.eu/api/v1/hashing/fn/uuid/' || encode-for-uri(path()) || '?response_type=raw') else null" ;
            rr:class epo:DynamicPurchaseSystemTechniqueUsage

        ] .
tedm:EauctionTechniqueUsage  a rr:TriplesMap ;
    rml:logicalSource
        [
            rml:source "data/source.xml" ;
            rml:iterator "/TED_EXPORT/FORM_SECTION/F20_2014[1]/PROCEDURE" ;
            rml:referenceFormulation ql:XPath
        ] ;
    rr:subjectMap
        [
            rml:reference
                "if(exists(EAUCTION_USED)) then 'http://data.europa.eu/a4g/resource/EAuctionTechniqueUsage/' || replace(replace(/TED_EXPORT/CODED_DATA_SECTION/NOTICE_DATA/NO_DOC_OJS, ' ', '-' ), '/' , '-') || '/' || unparsed-text('https://digest-api.ted-data.eu/api/v1/hashing/fn/uuid/' || encode-for-uri(path()) || '?response_type=raw') else null" ;
            rr:class epo:EAuctionTechniqueUsage

        ] .

# Section 5
#tedm:PurchaseContract a rr:TripleMap ;
#    rml:logicalSource
#        [
#            rml:source "data/source.xml" ;
#            rml:iterator "/TED_EXPORT/FORM_SECTION/F20_2014[1]/AWARD_CONTRACT" ;
#            rml:referenceFormulation ql:XPath
#        ] ;
#    rr:subjectMap
#        [
#            rr:template "http://data.europa.eu/a4g/resource/PurchaseContract/{replace(replace(/TED_EXPORT/CODED_DATA_SECTION/NOTICE_DATA/NO_DOC_OJS, ' ', '-' ), '/' , '-')}/{unparsed-text('https://digest-api.ted-data.eu/api/v1/hashing/fn/uuid/' || encode-for-uri(path()) || '?response_type=raw')}" ;
#            rr:class epo:PurchaseContract
#        ].

tedm:ContractOrganisationGroup a rr:TripleMap ;
    rml:logicalSource
        [
            rml:source "data/source.xml" ;
            rml:iterator "/TED_EXPORT/FORM_SECTION/F20_2014[1]/AWARD_CONTRACT/AWARDED_CONTRACT/CONTRACTORS" ;
            rml:referenceFormulation ql:XPath
        ] ;
    rr:subjectMap
        [
            rml:reference "if(exists(AWARDED_TO_GROUP)) then 'http://data.europa.eu/a4g/resource/ContractOrganisationGroup/' || replace(replace(/TED_EXPORT/CODED_DATA_SECTION/NOTICE_DATA/NO_DOC_OJS, ' ', '-' ), '/' , '-') || '/' || unparsed-text('https://digest-api.ted-data.eu/api/v1/hashing/fn/uuid/' || encode-for-uri(path()) || '?response_type=raw') else null" ;
            rr:class epo:OrganisationGroup

        ] .
tedm:Contract a rr:TripleMap ;
    rml:logicalSource
        [
            rml:source "data/source.xml" ;
            rml:iterator "/TED_EXPORT/FORM_SECTION/F20_2014/AWARD_CONTRACT" ;
            rml:referenceFormulation ql:XPath
        ] ;
    rr:subjectMap
        [
            rml:reference "if (exists(AWARDED_CONTRACT)) then 'http://data.europa.eu/a4g/resource/Contract/' || replace(replace(/TED_EXPORT/CODED_DATA_SECTION/NOTICE_DATA/NO_DOC_OJS, ' ', '-' ), '/' , '-') || '/' || unparsed-text('https://digest-api.ted-data.eu/api/v1/hashing/fn/uuid/' || encode-for-uri(path()) || '?response_type=raw') else null" ;
            rr:class epo:Contract

        ] ;
    rr:predicateObjectMap
        [
            rr:predicate epo:hasTitle;
            rr:objectMap
                [
                    rml:reference "TITLE";
                    rml:languageMap [
                         rml:reference "lower-case(ancestor::F20_2014/@LG)"
                    ]
                ]
        ] ;
    rr:predicateObjectMap   #specific for F3, F06, F21, F22 and perhaps others (different for F25 and F23, for example)
        [
            rr:predicate epo:hasContractConclusionDate;
            rr:objectMap
                [
                    rml:reference "AWARDED_CONTRACT/DATE_CONCLUSION_CONTRACT";
                    rr:datatype xsd:date;
                ]
        ] .
tedm:LotAwardOutcome a rr:TripleMap ;
    rml:logicalSource
        [
            rml:source "data/source.xml" ;
            rml:iterator "/TED_EXPORT/FORM_SECTION/F20_2014[1]/AWARD_CONTRACT";
            rml:referenceFormulation ql:XPath
        ];
    rr:subjectMap
        [
            rr:template "http://data.europa.eu/a4g/resource/LotAwardOutcome/{replace(replace(/TED_EXPORT/CODED_DATA_SECTION/NOTICE_DATA/NO_DOC_OJS, ' ', '-' ), '/' , '-')}/{unparsed-text('https://digest-api.ted-data.eu/api/v1/hashing/fn/uuid/' || encode-for-uri(path()) || '?response_type=raw')}" ;
            rr:class epo:LotAwardOutcome
#        ] ;
#    rr:predicateObjectMap   #specific for F25 and F23 (different for F3 and F06, for example)
#        [
#            rr:predicate epo:hasAwardDecisionDate;
#            rr:objectMap
#                [
#                    rml:reference "AWARDED_CONTRACT/DATE_CONCLUSION_CONTRACT";
#                    rr:datatype xsd:date;
#                ]
        ] .
tedm:ContractIdentifier a rr:TripleMap ;
    rml:logicalSource
        [
            rml:source "data/source.xml" ;
            rml:iterator "/TED_EXPORT/FORM_SECTION/F20_2014[1]/AWARD_CONTRACT";
            rml:referenceFormulation ql:XPath
        ];
    rr:subjectMap
        [
            rml:reference "if (exists(CONTRACT_NO) and exists(AWARDED_CONTRACT)) then 'http://data.europa.eu/a4g/resource/ContractIdentifier/' || replace(replace(/TED_EXPORT/CODED_DATA_SECTION/NOTICE_DATA/NO_DOC_OJS, ' ', '-' ), '/' , '-') || '/' || unparsed-text('https://digest-api.ted-data.eu/api/v1/hashing/fn/uuid/' || encode-for-uri(path()) || '?response_type=raw') else null" ;
            rr:class epo:Identifier
        ] .
#tedm:ContractSignatoryonContractorSide a rr:TripleMap ;
#    rml:logicalSource
#        [
#            rml:source "data/source.xml" ;
#            rml:iterator "/TED_EXPORT/FORM_SECTION/F20_2014[1]/AWARD_CONTRACT/AWARDED_CONTRACT/CONTRACTORS/CONTRACTOR" ;
#            rml:referenceFormulation ql:XPath
#        ] ;
#    rr:subjectMap
#        [
#            rr:template "http://data.europa.eu/a4g/resource/ContractSignatoryOnContractorSide/{replace(replace(/TED_EXPORT/CODED_DATA_SECTION/NOTICE_DATA/NO_DOC_OJS, ' ', '-' ), '/' , '-')}/{unparsed-text('https://digest-api.ted-data.eu/api/v1/hashing/fn/uuid/' || encode-for-uri(path()) || '?response_type=raw')}" ;
#            rr:class epo:ContractSignatoryOnContractorSide
#
#        ] .
#tedm:ContractorRole a rr:TripleMap ;
#    rml:logicalSource
#        [
#            rml:source "data/source.xml" ;
#            rml:iterator "/TED_EXPORT/FORM_SECTION/F20_2014[1]/AWARD_CONTRACT/AWARDED_CONTRACT/CONTRACTORS/CONTRACTOR" ;
#            rml:referenceFormulation ql:XPath
#        ] ;
#    rr:subjectMap
#        [
#            rr:template "http://data.europa.eu/a4g/resource/ContractorRole/{replace(replace(/TED_EXPORT/CODED_DATA_SECTION/NOTICE_DATA/NO_DOC_OJS, ' ', '-' ), '/' , '-')}/{unparsed-text('https://digest-api.ted-data.eu/api/v1/hashing/fn/uuid/' || encode-for-uri(path()) || '?response_type=raw')}" ;
#            rr:class epo:Contractor
#
#        ] .
#tedm:TenderRole a rr:TripleMap ;
#    rml:logicalSource
#        [
#            rml:source "data/source.xml" ;
#            rml:iterator "/TED_EXPORT/FORM_SECTION/F20_2014[1]/AWARD_CONTRACT/AWARDED_CONTRACT/CONTRACTORS/CONTRACTOR" ;
#            rml:referenceFormulation ql:XPath
#        ] ;
#    rr:subjectMap
#        [
#            rr:template "http://data.europa.eu/a4g/resource/TendererRole/{replace(replace(/TED_EXPORT/CODED_DATA_SECTION/NOTICE_DATA/NO_DOC_OJS, ' ', '-' ), '/' , '-')}/{unparsed-text('https://digest-api.ted-data.eu/api/v1/hashing/fn/uuid/' || encode-for-uri(path()) || '?response_type=raw')}" ;
#            rr:class epo:Tenderer
#
#        ] .
tedm:WinnerRole a rr:TripleMap ;
    rml:logicalSource
        [
            rml:source "data/source.xml" ;
            rml:iterator "/TED_EXPORT/FORM_SECTION/F20_2014[1]/AWARD_CONTRACT/AWARDED_CONTRACT/CONTRACTORS/CONTRACTOR" ;
            rml:referenceFormulation ql:XPath
        ] ;
    rr:subjectMap
        [
            rr:template "http://data.europa.eu/a4g/resource/WinnerRole/{replace(replace(/TED_EXPORT/CODED_DATA_SECTION/NOTICE_DATA/NO_DOC_OJS, ' ', '-' ), '/' , '-')}/{unparsed-text('https://digest-api.ted-data.eu/api/v1/hashing/fn/uuid/' || encode-for-uri(path()) || '?response_type=raw')}" ;
            rr:class epo:Winner

        ] .
#tedm:Business a rr:TripleMap ;
#    rml:logicalSource
#        [
#            rml:source "data/source.xml" ;
#            rml:iterator "/TED_EXPORT/FORM_SECTION/F20_2014[1]/AWARD_CONTRACT/AWARDED_CONTRACT/CONTRACTORS/CONTRACTOR" ;
#            rml:referenceFormulation ql:XPath
#        ] ;
#    rr:subjectMap
#        [
#            rr:template "http://data.europa.eu/a4g/resource/Business/{replace(replace(/TED_EXPORT/CODED_DATA_SECTION/NOTICE_DATA/NO_DOC_OJS, ' ', '-' ), '/' , '-')}/{unparsed-text('https://digest-api.ted-data.eu/api/v1/hashing/fn/uuid/' || encode-for-uri(path()) || '?response_type=raw')}" ;
#            rr:class epo:Business
#
#        ] .
tedm:ContractOrganisation a rr:TriplesMap ;
    rml:logicalSource
        [
            rml:source "data/source.xml" ;
            rml:iterator "/TED_EXPORT/FORM_SECTION/F20_2014/AWARD_CONTRACT/AWARDED_CONTRACT/CONTRACTORS/CONTRACTOR" ;
            rml:referenceFormulation ql:XPath
        ] ;
    rr:subjectMap
        [
            rr:template "http://data.europa.eu/a4g/resource/ContractOrganisation/{replace(replace(/TED_EXPORT/CODED_DATA_SECTION/NOTICE_DATA/NO_DOC_OJS, ' ', '-' ), '/' , '-')}/{unparsed-text('https://digest-api.ted-data.eu/api/v1/hashing/fn/uuid/' || encode-for-uri(path()) || '?response_type=raw')}" ;
            rr:class org:Organization

        ] ;
    rr:predicateObjectMap
        [
        rr:predicate epo:hasLegalName ;
        rr:objectMap
                [
                    rml:reference "ADDRESS_CONTRACTOR/OFFICIALNAME";
                    rml:languageMap [
                         rml:reference "lower-case(ancestor::F20_2014/@LG)"
                    ]
                ]
        ] .

tedm:ContractOrganisationIdentifier a rr:TripleMap ;
    rml:logicalSource
        [
            rml:source "data/source.xml" ;
            rml:iterator "/TED_EXPORT/FORM_SECTION/F20_2014[1]/AWARD_CONTRACT/AWARDED_CONTRACT/CONTRACTORS/CONTRACTOR";
            rml:referenceFormulation ql:XPath
        ];
    rr:subjectMap
        [
            rml:reference "if (exists(ADDRESS_CONTRACTOR/NATIONALID)) then 'http://data.europa.eu/a4g/resource/ContractOrganisationIdentifier/' || replace(replace(/TED_EXPORT/CODED_DATA_SECTION/NOTICE_DATA/NO_DOC_OJS, ' ', '-' ), '/' , '-') || '/' || unparsed-text('https://digest-api.ted-data.eu/api/v1/hashing/fn/uuid/' || encode-for-uri(path()) || '?response_type=raw') else null" ;
            rr:class epo:Identifier
        ] .
tedm:ContractContactPoint a rr:TriplesMap ;
    rml:logicalSource
        [
            rml:source "data/source.xml" ;
            rml:iterator "/TED_EXPORT/FORM_SECTION/F20_2014/AWARD_CONTRACT/AWARDED_CONTRACT/CONTRACTORS/CONTRACTOR" ;
            rml:referenceFormulation ql:XPath
        ] ;
    rr:subjectMap
        [
             rml:reference
                "if(exists(ADDRESS_CONTRACTOR/E_MAIL) or exists(ADDRESS_CONTRACTOR/FAX) or exists(ADDRESS_CONTRACTOR/PHONE) or exists(ADDRESS_CONTRACTOR/URL) or exists(ADDRESS_CONTRACTOR/CONTACT_POINT)) then 'http://data.europa.eu/a4g/resource/ContractContactPoint/' || replace(replace(/TED_EXPORT/CODED_DATA_SECTION/NOTICE_DATA/NO_DOC_OJS, ' ', '-' ), '/' , '-') || '/' || unparsed-text('https://digest-api.ted-data.eu/api/v1/hashing/fn/uuid/' || encode-for-uri(path()) || '?response_type=raw') else null" ;
            rr:class cpov:ContactPoint

        ] ;
    rr:predicateObjectMap
        [
            rr:predicate epo:hasContactName ;
            rr:objectMap
                [
                    rml:reference "ADDRESS_CONTRACTOR/CONTACT_POINT";
                    rml:languageMap [
                         rml:reference "lower-case(ancestor::F20_2014/@LG)"
                    ]
                ]
        ] .
tedm:ContractOrganisationAddress a rr:TriplesMap ;
    rml:logicalSource
        [
            rml:source "data/source.xml" ;
            rml:iterator "/TED_EXPORT/FORM_SECTION/F20_2014[1]/AWARD_CONTRACT/AWARDED_CONTRACT/CONTRACTORS/CONTRACTOR" ;
            rml:referenceFormulation ql:XPath
        ] ;
    rr:subjectMap
        [
            rr:template "http://data.europa.eu/a4g/resource/ContractOrganisationAddress/{replace(replace(/TED_EXPORT/CODED_DATA_SECTION/NOTICE_DATA/NO_DOC_OJS, ' ', '-' ), '/' , '-')}/{unparsed-text('https://digest-api.ted-data.eu/api/v1/hashing/fn/uuid/' || encode-for-uri(path()) || '?response_type=raw')}" ;
            rr:class locn:Address

        ] .
tedm:TenderAwardOutcome a rr:TripleMap ;
    rml:logicalSource
        [
            rml:source "data/source.xml" ;
            rml:iterator "/TED_EXPORT/FORM_SECTION/F20_2014[1]/AWARD_CONTRACT/AWARDED_CONTRACT" ;
            rml:referenceFormulation ql:XPath
        ] ;
    rr:subjectMap
        [
            rr:template "http://data.europa.eu/a4g/resource/TenderAwardOutcome/{replace(replace(/TED_EXPORT/CODED_DATA_SECTION/NOTICE_DATA/NO_DOC_OJS, ' ', '-' ), '/' , '-')}/{unparsed-text('https://digest-api.ted-data.eu/api/v1/hashing/fn/uuid/' || encode-for-uri(path()) || '?response_type=raw')}" ;
            rr:class epo:TenderAwardOutcome

        ] .
tedm:Tender a rr:TripleMap ;
    rml:logicalSource
        [
            rml:source "data/source.xml" ;
            rml:iterator "/TED_EXPORT/FORM_SECTION/F20_2014[1]/AWARD_CONTRACT/AWARDED_CONTRACT" ;
            rml:referenceFormulation ql:XPath
        ] ;
    rr:subjectMap
        [
            rr:template "http://data.europa.eu/a4g/resource/Tender/{replace(replace(/TED_EXPORT/CODED_DATA_SECTION/NOTICE_DATA/NO_DOC_OJS, ' ', '-' ), '/' , '-')}/{unparsed-text('https://digest-api.ted-data.eu/api/v1/hashing/fn/uuid/' || encode-for-uri(path()) || '?response_type=raw')}" ;
            rr:class epo:Tender

        ] .
tedm:LotAwardOutcomeAwardedMonetaryValue a rr:TriplesMap ;
    rml:logicalSource
        [
            rml:source "data/source.xml" ;
            rml:iterator "/TED_EXPORT/FORM_SECTION/F20_2014[1]/AWARD_CONTRACT" ;
            rml:referenceFormulation ql:XPath
        ] ;
    rr:subjectMap
        [
            rml:reference "if (exists(AWARDED_CONTRACT/VALUES/VAL_TOTAL)) then 'http://data.europa.eu/a4g/resource/LotAwardOutcomeAwardedMonetaryValue/' || replace(replace(/TED_EXPORT/CODED_DATA_SECTION/NOTICE_DATA/NO_DOC_OJS, ' ', '-' ), '/' , '-') || '/' || unparsed-text('https://digest-api.ted-data.eu/api/v1/hashing/fn/uuid/' || encode-for-uri(path()) || '?response_type=raw') else null" ;
            rr:class epo:MonetaryValue

        ] .
tedm:LotAwardOutcomeBargainMonetaryValue a rr:TriplesMap ;
    rml:logicalSource
        [
            rml:source "data/source.xml" ;
            rml:iterator "/TED_EXPORT/FORM_SECTION/F20_2014[1]/AWARD_CONTRACT" ;
            rml:referenceFormulation ql:XPath
        ] ;
    rr:subjectMap
        [
            rml:reference "if (exists(AWARDED_CONTRACT/VAL_BARGAIN_PURCHASE)) then 'http://data.europa.eu/a4g/resource/LotAwardOutcomeBargainMonetaryValue/' || replace(replace(/TED_EXPORT/CODED_DATA_SECTION/NOTICE_DATA/NO_DOC_OJS, ' ', '-' ), '/' , '-') || '/' || unparsed-text('https://digest-api.ted-data.eu/api/v1/hashing/fn/uuid/' || encode-for-uri(path()) || '?response_type=raw') else null" ;
            rr:class epo:MonetaryValue

        ] .
tedm:SubmissionStatisticalInformation a rr:TripleMap ;
    rml:logicalSource
        [
            rml:source "data/source.xml" ;
            rml:iterator "/TED_EXPORT/FORM_SECTION/F20_2014[1]/AWARD_CONTRACT/AWARDED_CONTRACT" ;
            rml:referenceFormulation ql:XPath
        ] ;
    rr:subjectMap
        [
            rr:template "http://data.europa.eu/a4g/resource/SubmissionStatisticalInformation/{replace(replace(/TED_EXPORT/CODED_DATA_SECTION/NOTICE_DATA/NO_DOC_OJS, ' ', '-' ), '/' , '-')}/{unparsed-text('https://digest-api.ted-data.eu/api/v1/hashing/fn/uuid/' || encode-for-uri(path()) || '?response_type=raw')}" ;
            rr:class epo:SubmissionStatisticalInformation

        ] .
tedm:MonetaryValueSubmissionHighest a rr:TriplesMap ;
    rml:logicalSource
        [
            rml:source "data/source.xml" ;
            rml:iterator "/TED_EXPORT/FORM_SECTION/F20_2014[1]/AWARD_CONTRACT/AWARDED_CONTRACT" ;
            rml:referenceFormulation ql:XPath
        ] ;
    rr:subjectMap
        [
            rml:reference "if (exists(VALUES/VAL_RANGE_TOTAL/HIGH)) then 'http://data.europa.eu/a4g/resource/MonetaryValueSubmissionHighest/' || replace(replace(/TED_EXPORT/CODED_DATA_SECTION/NOTICE_DATA/NO_DOC_OJS, ' ', '-' ), '/' , '-') || '/' || unparsed-text('https://digest-api.ted-data.eu/api/v1/hashing/fn/uuid/' || encode-for-uri(path()) || '?response_type=raw') else null" ;
            rr:class epo:MonetaryValue

        ] .
tedm:MonetaryValueSubmissionLowest a rr:TriplesMap ;
    rml:logicalSource
        [
            rml:source "data/source.xml" ;
            rml:iterator "/TED_EXPORT/FORM_SECTION/F20_2014[1]/AWARD_CONTRACT/AWARDED_CONTRACT" ;
            rml:referenceFormulation ql:XPath
        ] ;
    rr:subjectMap
        [
            rml:reference "if (exists(VALUES/VAL_RANGE_TOTAL/LOW)) then 'http://data.europa.eu/a4g/resource/MonetaryValueSubmissionLowest/' || replace(replace(/TED_EXPORT/CODED_DATA_SECTION/NOTICE_DATA/NO_DOC_OJS, ' ', '-' ), '/' , '-') || '/' || unparsed-text('https://digest-api.ted-data.eu/api/v1/hashing/fn/uuid/' || encode-for-uri(path()) || '?response_type=raw') else null" ;
            rr:class epo:MonetaryValue

        ] .
tedm:MainMonetaryValueLot a rr:TriplesMap ;
    rml:logicalSource
        [
            rml:source "data/source.xml" ;
            rml:iterator "/TED_EXPORT/FORM_SECTION/F20_2014[1]/OBJECT_CONTRACT/OBJECT_DESCR" ;
            rml:referenceFormulation ql:XPath
        ] ;
    rr:subjectMap
        [
            rml:reference "if (exists(VAL_OBJECT)) then 'http://data.europa.eu/a4g/resource/MainMonetaryValueLot/' || replace(replace(/TED_EXPORT/CODED_DATA_SECTION/NOTICE_DATA/NO_DOC_OJS, ' ', '-' ), '/' , '-') || '/' || unparsed-text('https://digest-api.ted-data.eu/api/v1/hashing/fn/uuid/' || encode-for-uri(path()) || '?response_type=raw') else null" ;
            rr:class epo:MonetaryValue

        ] .
tedm:MonetaryValueLot a rr:TriplesMap ;
    rml:logicalSource
        [
            rml:source "data/source.xml" ;
            rml:iterator "/TED_EXPORT/FORM_SECTION/F20_2014[1]/AWARD_CONTRACT/AWARDED_CONTRACT" ;
            rml:referenceFormulation ql:XPath
        ] ;
    rr:subjectMap
        [
            rml:reference "if (exists(VALUES/VAL_ESTIMATED_TOTAL)) then 'http://data.europa.eu/a4g/resource/MonetaryValueLot/' || replace(replace(/TED_EXPORT/CODED_DATA_SECTION/NOTICE_DATA/NO_DOC_OJS, ' ', '-' ), '/' , '-') || '/' || unparsed-text('https://digest-api.ted-data.eu/api/v1/hashing/fn/uuid/' || encode-for-uri(path()) || '?response_type=raw') else null" ;
            rr:class epo:MonetaryValue

        ] .
tedm:SubcontractingEstimate a rr:TripleMap ;
    rml:logicalSource
        [
            rml:source "data/source.xml" ;
            rml:iterator "/TED_EXPORT/FORM_SECTION/F20_2014/AWARD_CONTRACT/AWARDED_CONTRACT" ;
            rml:referenceFormulation ql:XPath
        ] ;
    rr:subjectMap
        [
            rml:reference "if (exists(LIKELY_SUBCONTRACTED)) then 'http://data.europa.eu/a4g/resource/SubcontractingEstimate/' || replace(replace(/TED_EXPORT/CODED_DATA_SECTION/NOTICE_DATA/NO_DOC_OJS, ' ', '-' ), '/' , '-') || '/' || unparsed-text('https://digest-api.ted-data.eu/api/v1/hashing/fn/uuid/' || encode-for-uri(path()) || '?response_type=raw') else null" ;
            rr:class epo:SubcontractingEstimate

        ] ;
    rr:predicateObjectMap
        [
            rr:predicate epo:hasDescription ;
            rr:objectMap
                [
                    rml:reference "INFO_ADD_SUBCONTRACTING";
                    rml:languageMap [
                         rml:reference "lower-case(ancestor::F20_2014/@LG)"
                    ]
                ]
        ] .
tedm:SubcontractingEstimatedValueMonetaryValue a rr:TriplesMap ;
    rml:logicalSource
        [
            rml:source "data/source.xml" ;
            rml:iterator "/TED_EXPORT/FORM_SECTION/F20_2014[1]/AWARD_CONTRACT/AWARDED_CONTRACT" ;
            rml:referenceFormulation ql:XPath
        ] ;
    rr:subjectMap
        [
            rml:reference "if (exists(VAL_SUBCONTRACTING)) then 'http://data.europa.eu/a4g/resource/SubcontractingEstimatedValueMonetaryValue/' || replace(replace(/TED_EXPORT/CODED_DATA_SECTION/NOTICE_DATA/NO_DOC_OJS, ' ', '-' ), '/' , '-') || '/' || unparsed-text('https://digest-api.ted-data.eu/api/v1/hashing/fn/uuid/' || encode-for-uri(path()) || '?response_type=raw') else null" ;
            rr:class epo:MonetaryValue

        ] .
#Section 6
tedm:ReviewerContactPoint a rr:TriplesMap ;
    rml:logicalSource
        [
            rml:source "data/source.xml" ;
            rml:iterator "/TED_EXPORT/FORM_SECTION/F20_2014/COMPLEMENTARY_INFO/ADDRESS_REVIEW_BODY";
            rml:referenceFormulation ql:XPath
        ] ;
    rr:subjectMap
        [
            rml:reference
                "if(exists(E_MAIL) or exists(FAX) or exists(PHONE) or exists(URL) or exists(CONTACT_POINT)) then 'http://data.europa.eu/a4g/resource/ReviewerContactPoint/' || replace(replace(/TED_EXPORT/CODED_DATA_SECTION/NOTICE_DATA/NO_DOC_OJS, ' ', '-' ), '/' , '-') || '/' || unparsed-text('https://digest-api.ted-data.eu/api/v1/hashing/fn/uuid/' || encode-for-uri(path()) || '?response_type=raw') else null" ;
            rr:class cpov:ContactPoint

        ] ;
    rr:predicateObjectMap
        [
            rr:predicate epo:hasContactName ;
            rr:objectMap
                [
                    rml:reference "CONTACT_POINT";
                    rml:languageMap [
                         rml:reference "lower-case(ancestor::F20_2014/@LG)"
                    ]
                ]
        ] .
tedm:ReviewerOrganisationAddress a rr:TriplesMap ;
    rml:logicalSource
        [
            rml:source "data/source.xml" ;
            rml:iterator "/TED_EXPORT/FORM_SECTION/F20_2014[1]/COMPLEMENTARY_INFO/ADDRESS_REVIEW_BODY";
            rml:referenceFormulation ql:XPath
        ] ;
    rr:subjectMap
        [
            rr:template "http://data.europa.eu/a4g/resource/ReviewerOrganisationAddress/{replace(replace(/TED_EXPORT/CODED_DATA_SECTION/NOTICE_DATA/NO_DOC_OJS, ' ', '-' ), '/' , '-')}/{unparsed-text('https://digest-api.ted-data.eu/api/v1/hashing/fn/uuid/' || encode-for-uri(path()) || '?response_type=raw')}" ;
            rr:class locn:Address

        ] .
tedm:Mediator a rr:TripleMap ;
    rml:logicalSource
        [
            rml:source "data/source.xml" ;
            rml:iterator "/TED_EXPORT/FORM_SECTION/F20_2014[1]/COMPLEMENTARY_INFO/ADDRESS_MEDIATION_BODY" ;
            rml:referenceFormulation ql:XPath
        ] ;
    rr:subjectMap
        [
            rr:template "http://data.europa.eu/a4g/resource/Mediator/{replace(replace(/TED_EXPORT/CODED_DATA_SECTION/NOTICE_DATA/NO_DOC_OJS, ' ', '-' ), '/' , '-')}/{unparsed-text('https://digest-api.ted-data.eu/api/v1/hashing/fn/uuid/' || encode-for-uri(path()) || '?response_type=raw')}" ;
            rr:class epo:Mediator

        ] .
tedm:MediatorOrganisation a rr:TriplesMap ;
    rml:logicalSource
        [
            rml:source "data/source.xml" ;
            rml:iterator "/TED_EXPORT/FORM_SECTION/F20_2014/COMPLEMENTARY_INFO/ADDRESS_MEDIATION_BODY" ;
            rml:referenceFormulation ql:XPath
        ] ;
    rr:subjectMap
        [
            rr:template "http://data.europa.eu/a4g/resource/MediatorOrganisation/{replace(replace(/TED_EXPORT/CODED_DATA_SECTION/NOTICE_DATA/NO_DOC_OJS, ' ', '-' ), '/' , '-')}/{unparsed-text('https://digest-api.ted-data.eu/api/v1/hashing/fn/uuid/' || encode-for-uri(path()) || '?response_type=raw')}" ;
            rr:class org:Organization

        ] ;
    rr:predicateObjectMap
        [
        rr:predicate epo:hasLegalName ;
        rr:objectMap
                [
                    rml:reference "OFFICIALNAME";
                    rml:languageMap [
                         rml:reference "lower-case(ancestor::F20_2014/@LG)"
                    ]
                ]
        ] .
tedm:MediatorOrganisationIdentifier a rr:TripleMap ;
    rml:logicalSource
        [
            rml:source "data/source.xml" ;
            rml:iterator "/TED_EXPORT/FORM_SECTION/F20_2014[1]/COMPLEMENTARY_INFO/ADDRESS_MEDIATION_BODY";
            rml:referenceFormulation ql:XPath
        ];
    rr:subjectMap
        [
            rml:reference "if (exists(NATIONALID)) then 'http://data.europa.eu/a4g/resource/MediatorOrganisationIdentifier/' || replace(replace(/TED_EXPORT/CODED_DATA_SECTION/NOTICE_DATA/NO_DOC_OJS, ' ', '-' ), '/' , '-') || '/' || unparsed-text('https://digest-api.ted-data.eu/api/v1/hashing/fn/uuid/' || encode-for-uri(path()) || '?response_type=raw') else null" ;
            rr:class epo:Identifier
        ] .
tedm:MediatorContactPoint a rr:TriplesMap ;
    rml:logicalSource
        [
            rml:source "data/source.xml" ;
            rml:iterator "/TED_EXPORT/FORM_SECTION/F20_2014/COMPLEMENTARY_INFO/ADDRESS_MEDIATION_BODY";
            rml:referenceFormulation ql:XPath
        ] ;
    rr:subjectMap
        [
            rml:reference "if(exists(E_MAIL) or exists(FAX) or exists(PHONE) or exists(URL) or exists(CONTACT_POINT)) then 'http://data.europa.eu/a4g/resource/MediatorContactPoint/' || replace(replace(/TED_EXPORT/CODED_DATA_SECTION/NOTICE_DATA/NO_DOC_OJS, ' ', '-' ), '/' , '-') || '/' || unparsed-text('https://digest-api.ted-data.eu/api/v1/hashing/fn/uuid/' || encode-for-uri(path()) || '?response_type=raw') else null" ;
            rr:class cpov:ContactPoint

        ] ;
    rr:predicateObjectMap
        [
            rr:predicate epo:hasContactName ;
            rr:objectMap
                [
                    rml:reference "CONTACT_POINT";
                    rml:languageMap [
                         rml:reference "lower-case(ancestor::F20_2014/@LG)"
                    ]
                ]
        ] .
tedm:MediatorOrganisationAddress a rr:TriplesMap ;
    rml:logicalSource
        [
            rml:source "data/source.xml" ;
            rml:iterator "/TED_EXPORT/FORM_SECTION/F20_2014[1]/COMPLEMENTARY_INFO/ADDRESS_MEDIATION_BODY";
            rml:referenceFormulation ql:XPath
        ] ;
    rr:subjectMap
        [
            rr:template "http://data.europa.eu/a4g/resource/MediatorOrganisationAddress/{replace(replace(/TED_EXPORT/CODED_DATA_SECTION/NOTICE_DATA/NO_DOC_OJS, ' ', '-' ), '/' , '-')}/{unparsed-text('https://digest-api.ted-data.eu/api/v1/hashing/fn/uuid/' || encode-for-uri(path()) || '?response_type=raw')}" ;
            rr:class locn:Address

        ] .
tedm:ReviewProcedureInformationProvider a rr:TripleMap ;
    rml:logicalSource
        [
            rml:source "data/source.xml" ;
            rml:iterator "/TED_EXPORT/FORM_SECTION/F20_2014[1]/COMPLEMENTARY_INFO/ADDRESS_REVIEW_INFO" ;
            rml:referenceFormulation ql:XPath
        ] ;
    rr:subjectMap
        [
            rr:template "http://data.europa.eu/a4g/resource/ReviewProcedureInformationProvider/{replace(replace(/TED_EXPORT/CODED_DATA_SECTION/NOTICE_DATA/NO_DOC_OJS, ' ', '-' ), '/' , '-')}/{unparsed-text('https://digest-api.ted-data.eu/api/v1/hashing/fn/uuid/' || encode-for-uri(path()) || '?response_type=raw')}" ;
            rr:class epo:ReviewProcedureInformationProvider

        ] .
tedm:ReviewProcedureInformationProviderOrganisation a rr:TriplesMap ;
    rml:logicalSource
        [
            rml:source "data/source.xml" ;
            rml:iterator "/TED_EXPORT/FORM_SECTION/F20_2014/COMPLEMENTARY_INFO/ADDRESS_REVIEW_INFO" ;
            rml:referenceFormulation ql:XPath
        ] ;
    rr:subjectMap
        [
            rr:template "http://data.europa.eu/a4g/resource/ReviewProcedureInformationProviderOrganisation/{replace(replace(/TED_EXPORT/CODED_DATA_SECTION/NOTICE_DATA/NO_DOC_OJS, ' ', '-' ), '/' , '-')}/{unparsed-text('https://digest-api.ted-data.eu/api/v1/hashing/fn/uuid/' || encode-for-uri(path()) || '?response_type=raw')}" ;
            rr:class org:Organization

        ] ;
    rr:predicateObjectMap
        [
        rr:predicate epo:hasLegalName ;
        rr:objectMap
                [
                    rml:reference "OFFICIALNAME";
                    rml:languageMap [
                         rml:reference "lower-case(ancestor::F20_2014/@LG)"
                    ]
                ]
        ] .
tedm:ReviewProcedureInformationProviderOrganisationIdentifier a rr:TripleMap ;
    rml:logicalSource
        [
            rml:source "data/source.xml" ;
            rml:iterator "/TED_EXPORT/FORM_SECTION/F20_2014[1]/COMPLEMENTARY_INFO/ADDRESS_REVIEW_INFO";
            rml:referenceFormulation ql:XPath
        ];
    rr:subjectMap
        [
            rml:reference "if (exists(NATIONALID)) then 'http://data.europa.eu/a4g/resource/ReviewProcedureInformationProviderOrganisationIdentifier/' || replace(replace(/TED_EXPORT/CODED_DATA_SECTION/NOTICE_DATA/NO_DOC_OJS, ' ', '-' ), '/' , '-') || '/' || unparsed-text('https://digest-api.ted-data.eu/api/v1/hashing/fn/uuid/' || encode-for-uri(path()) || '?response_type=raw') else null" ;
            rr:class epo:Identifier
        ] .
tedm:ReviewProcedureInformationProviderContactPoint a rr:TriplesMap ;
    rml:logicalSource
        [
            rml:source "data/source.xml" ;
            rml:iterator "/TED_EXPORT/FORM_SECTION/F20_2014/COMPLEMENTARY_INFO/ADDRESS_REVIEW_INFO";
            rml:referenceFormulation ql:XPath
        ] ;
    rr:subjectMap
        [
            rml:reference "if(exists(E_MAIL) or exists(FAX) or exists(PHONE) or exists(URL) or exists(CONTACT_POINT)) then 'http://data.europa.eu/a4g/resource/ReviewProcedureInformationProviderContactPoint/' || replace(replace(/TED_EXPORT/CODED_DATA_SECTION/NOTICE_DATA/NO_DOC_OJS, ' ', '-' ), '/' , '-') || '/' || unparsed-text('https://digest-api.ted-data.eu/api/v1/hashing/fn/uuid/' || encode-for-uri(path()) || '?response_type=raw') else null" ;
            rr:class cpov:ContactPoint

        ] ;
    rr:predicateObjectMap
        [
            rr:predicate epo:hasContactName ;
            rr:objectMap
                [
                    rml:reference "CONTACT_POINT";
                    rml:languageMap [
                         rml:reference "lower-case(ancestor::F20_2014/@LG)"
                    ]
                ]
        ] .
tedm:ReviewProcedureInformationProviderOrganisationAddress a rr:TriplesMap ;
    rml:logicalSource
        [
            rml:source "data/source.xml" ;
            rml:iterator "/TED_EXPORT/FORM_SECTION/F20_2014[1]/COMPLEMENTARY_INFO/ADDRESS_REVIEW_INFO";
            rml:referenceFormulation ql:XPath
        ] ;
    rr:subjectMap
        [
            rr:template "http://data.europa.eu/a4g/resource/ReviewProcedureInformationProviderAddress/{replace(replace(/TED_EXPORT/CODED_DATA_SECTION/NOTICE_DATA/NO_DOC_OJS, ' ', '-' ), '/' , '-')}/{unparsed-text('https://digest-api.ted-data.eu/api/v1/hashing/fn/uuid/' || encode-for-uri(path()) || '?response_type=raw')}" ;
            rr:class locn:Address

        ] .
tedm:ReviewerOrganisation a rr:TriplesMap ;
    rml:logicalSource
        [
            rml:source "data/source.xml" ;
            rml:iterator "/TED_EXPORT/FORM_SECTION/F20_2014/COMPLEMENTARY_INFO/ADDRESS_REVIEW_BODY" ;
            rml:referenceFormulation ql:XPath
        ] ;
    rr:subjectMap
        [
            rr:template "http://data.europa.eu/a4g/resource/ReviewerOrganisation/{replace(replace(/TED_EXPORT/CODED_DATA_SECTION/NOTICE_DATA/NO_DOC_OJS, ' ', '-' ), '/' , '-')}/{unparsed-text('https://digest-api.ted-data.eu/api/v1/hashing/fn/uuid/' || encode-for-uri(path()) || '?response_type=raw')}" ;
            rr:class org:Organization

        ] ;
    rr:predicateObjectMap
        [
        rr:predicate epo:hasLegalName ;
        rr:objectMap
                [
                    rml:reference "OFFICIALNAME";
                    rml:languageMap [
                         rml:reference "lower-case(ancestor::F20_2014/@LG)"
                    ]
                ]
        ] .
tedm:ReviewerOrganisationIdentifier a rr:TripleMap ;
    rml:logicalSource
        [
            rml:source "data/source.xml" ;
            rml:iterator "/TED_EXPORT/FORM_SECTION/F20_2014[1]/COMPLEMENTARY_INFO/ADDRESS_REVIEW_BODY";
            rml:referenceFormulation ql:XPath
        ];
    rr:subjectMap
        [
            rml:reference "if (exists(NATIONALID)) then 'http://data.europa.eu/a4g/resource/ReviewerOrganisationIdentifier/' || replace(replace(/TED_EXPORT/CODED_DATA_SECTION/NOTICE_DATA/NO_DOC_OJS, ' ', '-' ), '/' , '-') || '/' || unparsed-text('https://digest-api.ted-data.eu/api/v1/hashing/fn/uuid/' || encode-for-uri(path()) || '?response_type=raw') else null" ;
            rr:class epo:Identifier
        ] .
tedm:ReviewTerm a rr:TripleMap ;
    rml:logicalSource
        [
            rml:source "data/source.xml" ;
            rml:iterator "/TED_EXPORT/FORM_SECTION/F20_2014[1]/COMPLEMENTARY_INFO";
            rml:referenceFormulation ql:XPath
        ];
    rr:subjectMap
        [
            rml:reference
                "if(exists(REVIEW_PROCEDURE)) then 'http://data.europa.eu/a4g/resource/ReviewTerm/' || replace(replace(/TED_EXPORT/CODED_DATA_SECTION/NOTICE_DATA/NO_DOC_OJS, ' ', '-' ), '/' , '-') || '/' || unparsed-text('https://digest-api.ted-data.eu/api/v1/hashing/fn/uuid/' || encode-for-uri(path()) || '?response_type=raw') else null" ;
            rr:class epo:ReviewTerm
        ] .
#F25 mappings
tedm:MonetaryValueProcedure a rr:TriplesMap ;
    rml:logicalSource
        [
            rml:source "data/source.xml" ;
            rml:iterator "/TED_EXPORT/FORM_SECTION/F20_2014[1]/OBJECT_CONTRACT" ;
            rml:referenceFormulation ql:XPath
        ] ;
    rr:subjectMap
        [
            rml:reference "if (exists(VAL_ESTIMATED_TOTAL)) then 'http://data.europa.eu/a4g/resource/MonetaryValueProcedure/' || replace(replace(/TED_EXPORT/CODED_DATA_SECTION/NOTICE_DATA/NO_DOC_OJS, ' ', '-' ), '/' , '-') || '/' || unparsed-text('https://digest-api.ted-data.eu/api/v1/hashing/fn/uuid/' || encode-for-uri(path()) || '?response_type=raw') else null" ;
            rr:class epo:MonetaryValue

        ] .
tedm:AwardCriterion a rr:TripleMap ;
    rml:logicalSource
        [
            rml:source "data/source.xml" ;
            rml:iterator "/TED_EXPORT/FORM_SECTION/F20_2014/OBJECT_CONTRACT/OBJECT_DESCR/AC" ;
            rml:referenceFormulation ql:XPath
        ] ;
    rr:subjectMap
        [
            rml:reference
                "if(exists(AC_CRITERION)) then 'http://data.europa.eu/a4g/resource/AwardCriterion/' || replace(replace(/TED_EXPORT/CODED_DATA_SECTION/NOTICE_DATA/NO_DOC_OJS, ' ', '-' ), '/' , '-') || '/' || unparsed-text('https://digest-api.ted-data.eu/api/v1/hashing/fn/uuid/' || encode-for-uri(path()) || '?response_type=raw') else null" ;
            rr:class epo:AwardCriterion

        ] ;
    rr:predicateObjectMap
        [
            rr:predicate cccev:description ;
            rr:objectMap
                [
                    rml:reference "AC_CRITERION";
                    rml:languageMap [
                         rml:reference "lower-case(ancestor::F20_2014/@LG)"
                    ]
                ] ;
        ] ;
    rr:predicateObjectMap
        [
            rr:predicate cccev:weight ;
            rr:objectMap
                [
                    rml:reference "AC_WEIGHTING";
                    rml:languageMap [
                         rml:reference "lower-case(ancestor::F20_2014/@LG)"
                    ]
                ] ;
        ] .
tedm:ConcessionEstimate a rr:TripleMap ;
    rml:logicalSource
        [
            rml:source "data/source.xml" ;
            rml:iterator "/TED_EXPORT/FORM_SECTION/F20_2014[1]/AWARD_CONTRACT/AWARDED_CONTRACT" ;
            rml:referenceFormulation ql:XPath
        ] ;
    rr:subjectMap
        [
            rml:reference "if (exists(VAL_PRICE_PAYMENT) or exists(INFO_ADD_VALUE) or exists (VAL_REVENUE)) then 'http://data.europa.eu/a4g/resource/ConcessionEstimate/' || replace(replace(/TED_EXPORT/CODED_DATA_SECTION/NOTICE_DATA/NO_DOC_OJS, ' ', '-' ), '/' , '-') || '/' || unparsed-text('https://digest-api.ted-data.eu/api/v1/hashing/fn/uuid/' || encode-for-uri(path()) || '?response_type=raw') else null" ;
            rr:class epo:ConcessionEstimate

        ] .
tedm:UserConcessionRevenueMonetaryValue a rr:TriplesMap ;
    rml:logicalSource
        [
            rml:source "data/source.xml" ;
            rml:iterator "/TED_EXPORT/FORM_SECTION/F20_2014[1]/AWARD_CONTRACT/AWARDED_CONTRACT" ;
            rml:referenceFormulation ql:XPath
        ] ;
    rr:subjectMap
        [
            rml:reference "if (exists(VAL_REVENUE)) then 'http://data.europa.eu/a4g/resource/UserConcessionRevenueMonetaryValue/' || replace(replace(/TED_EXPORT/CODED_DATA_SECTION/NOTICE_DATA/NO_DOC_OJS, ' ', '-' ), '/' , '-') || '/' || unparsed-text('https://digest-api.ted-data.eu/api/v1/hashing/fn/uuid/' || encode-for-uri(path()) || '?response_type=raw') else null" ;
            rr:class epo:MonetaryValue

        ] .
tedm:BuyerConcessionRevenueMonetaryValue a rr:TriplesMap ;
    rml:logicalSource
        [
            rml:source "data/source.xml" ;
            rml:iterator "/TED_EXPORT/FORM_SECTION/F20_2014[1]/AWARD_CONTRACT/AWARDED_CONTRACT" ;
            rml:referenceFormulation ql:XPath
        ] ;
    rr:subjectMap
        [
            rml:reference "if (exists(VAL_PRICE_PAYMENT)) then 'http://data.europa.eu/a4g/resource/BuyerConcessionRevenueMonetaryValue/' || replace(replace(/TED_EXPORT/CODED_DATA_SECTION/NOTICE_DATA/NO_DOC_OJS, ' ', '-' ), '/' , '-') || '/' || unparsed-text('https://digest-api.ted-data.eu/api/v1/hashing/fn/uuid/' || encode-for-uri(path()) || '?response_type=raw') else null" ;
            rr:class epo:MonetaryValue

        ] .
tedm:Duration a rr:TriplesMap ;
    rml:logicalSource
        [
            rml:source "data/source.xml" ;
            rml:iterator "/TED_EXPORT/FORM_SECTION/F20_2014/OBJECT_CONTRACT/OBJECT_DESCR/DURATION" ;
            rml:referenceFormulation ql:XPath
        ] ;
    rr:subjectMap
        [
            rr:template "http://data.europa.eu/a4g/resource/Duration/{replace(replace(/TED_EXPORT/CODED_DATA_SECTION/NOTICE_DATA/NO_DOC_OJS, ' ', '-' ), '/' , '-')}/{unparsed-text('https://digest-api.ted-data.eu/api/v1/hashing/fn/uuid/' || encode-for-uri(path()) || '?response_type=raw')}" ;
            rr:class epo:Duration
        ] .

tedm:Period a rr:TriplesMap ;
    rml:logicalSource
        [
            rml:source "data/source.xml" ;
            rml:iterator "/TED_EXPORT/FORM_SECTION/F20_2014/OBJECT_CONTRACT/OBJECT_DESCR" ;
            rml:referenceFormulation ql:XPath
        ] ;
    rr:subjectMap
        [
            rml:reference
                "if(exists(DATE_START) or exists(DATE_END)) then 'http://data.europa.eu/a4g/resource/Period/' || replace(replace(/TED_EXPORT/CODED_DATA_SECTION/NOTICE_DATA/NO_DOC_OJS, ' ', '-' ), '/' , '-') || '/' || unparsed-text('https://digest-api.ted-data.eu/api/v1/hashing/fn/uuid/' || encode-for-uri(path()) || '?response_type=raw') else null" ;
            rr:class epo:Period
        ] .

#F22 TriplesMap
tedm:AccessTerm  a rr:TriplesMap ;
    rml:logicalSource
        [
            rml:source "data/source.xml" ;
            rml:iterator "/TED_EXPORT/FORM_SECTION/F20_2014/CONTRACTING_BODY" ;
            rml:referenceFormulation ql:XPath
        ] ;
    rr:subjectMap
        [
            rml:reference
                "if(exists(DOCUMENT_FULL) or exists(DOCUMENT_RESTRICTED) or exists(URL_DOCUMENT)) then 'http://data.europa.eu/a4g/resource/AccessTerm/' || replace(replace(/TED_EXPORT/CODED_DATA_SECTION/NOTICE_DATA/NO_DOC_OJS, ' ', '-' ), '/' , '-') || '/' || unparsed-text('https://digest-api.ted-data.eu/api/v1/hashing/fn/uuid/' || encode-for-uri(path()) || '?response_type=raw') else null" ;
            rr:class epo:AccessTerm
        ] .
tedm:OrganisationChannel a rr:TriplesMap ;
    rr:subjectMap
        [
            rr:template "http://data.europa.eu/a4g/resource/Channel/{replace(replace(/TED_EXPORT/CODED_DATA_SECTION/NOTICE_DATA/NO_DOC_OJS, ' ', '-' ), '/' , '-')}/{unparsed-text('https://digest-api.ted-data.eu/api/v1/hashing/fn/uuid/' || encode-for-uri(path()) || '?response_type=raw')}" ;
            rr:class epo:Channel

        ] ;
    rml:logicalSource
        [
            rml:source "data/source.xml" ;
            rml:iterator "/TED_EXPORT/FORM_SECTION/F20_2014[1]/CONTRACTING_BODY/URL_TOOL" ;
            rml:referenceFormulation ql:XPath
        ] .
tedm:ProcurementProcedureInformationProvider  a rr:TriplesMap ;
    rml:logicalSource
        [
            rml:source "data/source.xml" ;
            rml:iterator "/TED_EXPORT/FORM_SECTION/F20_2014/CONTRACTING_BODY/ADDRESS_FURTHER_INFO" ;
            rml:referenceFormulation ql:XPath
        ] ;
    rr:subjectMap
        [
            rr:template "http://data.europa.eu/a4g/resource/ProcurementProcedureInformationProvider/{replace(replace(/TED_EXPORT/CODED_DATA_SECTION/NOTICE_DATA/NO_DOC_OJS, ' ', '-' ), '/' , '-')}/{unparsed-text('https://digest-api.ted-data.eu/api/v1/hashing/fn/uuid/' || encode-for-uri(path()) || '?response_type=raw')}" ;
            rr:class epo:ProcurementProcedureInformationProvider
        ] .
tedm:InformationProviderProfile a rr:TripleMap ;
    rr:subjectMap
        [
            rr:template "http://data.europa.eu/a4g/resource/InformationProviderProfile/{replace(replace(/TED_EXPORT/CODED_DATA_SECTION/NOTICE_DATA/NO_DOC_OJS, ' ', '-' ), '/' , '-')}/{unparsed-text('https://digest-api.ted-data.eu/api/v1/hashing/fn/uuid/' || encode-for-uri(path()) || '?response_type=raw')}" ;
            rr:class epo:BuyerProfile
        ] ;
    rml:logicalSource
        [
            rml:source "data/source.xml" ;
            rml:iterator "/TED_EXPORT/FORM_SECTION/F20_2014[1]/CONTRACTING_BODY/ADDRESS_FURTHER_INFO/URL_BUYER";
            rml:referenceFormulation ql:XPath
        ].

tedm:InformationProviderOrganisation a rr:TripleMap ;
    rr:subjectMap
        [
            rr:template "http://data.europa.eu/a4g/resource/InformationProviderOrganisation/{replace(replace(/TED_EXPORT/CODED_DATA_SECTION/NOTICE_DATA/NO_DOC_OJS, ' ', '-' ), '/' , '-')}/{unparsed-text('https://digest-api.ted-data.eu/api/v1/hashing/fn/uuid/' || encode-for-uri(path()) || '?response_type=raw')}" ;
            rr:class org:Organization
        ] ;
    rml:logicalSource
    [
        rml:source "data/source.xml" ;
        rml:iterator "/TED_EXPORT/FORM_SECTION/F20_2014/CONTRACTING_BODY/ADDRESS_FURTHER_INFO" ;
        rml:referenceFormulation ql:XPath
    ] ;
    rr:predicateObjectMap
        [
            rr:predicate epo:hasLegalName ;
            rr:objectMap
                [
                    rml:reference "OFFICIALNAME";
                    rml:languageMap [
                         rml:reference "lower-case(ancestor::F20_2014/@LG)"
                    ]
                ] ;
        ] .

tedm:InformationProviderOrganisationIdentifier a rr:TripleMap ;
    rr:subjectMap
        [
            rml:reference "if (exists(NATIONALID)) then 'http://data.europa.eu/a4g/resource/InformationProviderOrganisationIdentifier/' || replace(replace(/TED_EXPORT/CODED_DATA_SECTION/NOTICE_DATA/NO_DOC_OJS, ' ', '-' ), '/' , '-') || '/' || unparsed-text('https://digest-api.ted-data.eu/api/v1/hashing/fn/uuid/' || encode-for-uri(path()) || '?response_type=raw') else null" ;
            rr:class epo:Identifier
        ] ;
    rml:logicalSource
        [
            rml:source "data/source.xml" ;
            rml:iterator "/TED_EXPORT/FORM_SECTION/F20_2014[1]/CONTRACTING_BODY/ADDRESS_FURTHER_INFO";
            rml:referenceFormulation ql:XPath
        ].

tedm:InformationProviderContactPoint a rr:TriplesMap ;
    rr:subjectMap
        [
            rml:reference "if(exists(E_MAIL) or exists(FAX) or exists(PHONE) or exists(URL_GENERAL) or exists(CONTACT_POINT)) then 'http://data.europa.eu/a4g/resource/InformationProviderContactPoint/' || replace(replace(/TED_EXPORT/CODED_DATA_SECTION/NOTICE_DATA/NO_DOC_OJS, ' ', '-' ), '/' , '-') || '/' || unparsed-text('https://digest-api.ted-data.eu/api/v1/hashing/fn/uuid/' || encode-for-uri(path()) || '?response_type=raw') else null" ;
            rr:class cpov:ContactPoint

        ] ;
    rml:logicalSource
        [
            rml:source "data/source.xml" ;
            rml:iterator "/TED_EXPORT/FORM_SECTION/F20_2014/CONTRACTING_BODY/ADDRESS_FURTHER_INFO" ;
            rml:referenceFormulation ql:XPath
        ] ;
    rr:predicateObjectMap
        [
            rr:predicate epo:hasContactName ;
            rr:objectMap
                [
                    rml:reference "CONTACT_POINT";
                    rml:languageMap [
                         rml:reference "lower-case(ancestor::F20_2014/@LG)"
                    ]
                ]
        ] .

tedm:InformationProviderOrganisationAddress  a rr:TriplesMap ;
    rr:subjectMap
        [
            rr:template "http://data.europa.eu/a4g/resource/InformationProviderOrganisationAddress/{replace(replace(/TED_EXPORT/CODED_DATA_SECTION/NOTICE_DATA/NO_DOC_OJS, ' ', '-' ), '/' , '-')}/{unparsed-text('https://digest-api.ted-data.eu/api/v1/hashing/fn/uuid/' || encode-for-uri(path()) || '?response_type=raw')}" ;
            rr:class locn:Address

        ] ;
    rml:logicalSource
        [
            rml:source "data/source.xml" ;
            rml:iterator "/TED_EXPORT/FORM_SECTION/F20_2014[1]/CONTRACTING_BODY/ADDRESS_FURTHER_INFO" ;
            rml:referenceFormulation ql:XPath
        ] .

tedm:MultipleStageProcedureTerm a rr:TriplesMap ;
    rr:subjectMap
        [
            rml:reference "if(exists(QS/INDEFINITE_DURATION) or exists(QS/DATE_START) or exists(QS/DATE_END) or exists(RENEWAL) or exists(RENEWAL_DESC)) then 'http://data.europa.eu/a4g/resource/MultipleStageProcedureTerm/' || replace(replace(/TED_EXPORT/CODED_DATA_SECTION/NOTICE_DATA/NO_DOC_OJS, ' ', '-' ), '/' , '-') || '/' || unparsed-text('https://digest-api.ted-data.eu/api/v1/hashing/fn/uuid/' || encode-for-uri(path()) || '?response_type=raw') else null" ;
            rr:class epo:MultipleStageProcedureTerm

        ] ;
    rml:logicalSource
        [
            rml:source "data/source.xml" ;
            rml:iterator "/TED_EXPORT/FORM_SECTION/F20_2014/OBJECT_CONTRACT/OBJECT_DESCR" ;
            rml:referenceFormulation ql:XPath
        ] .
tedm:MultipleStageProcedurePeriod a rr:TriplesMap ;
    rml:logicalSource
        [
            rml:source "data/source.xml" ;
            rml:iterator "/TED_EXPORT/FORM_SECTION/F20_2014/OBJECT_CONTRACT/OBJECT_DESCR" ;
            rml:referenceFormulation ql:XPath
        ] ;
    rr:subjectMap
        [
            rml:reference
                "if(exists(QS/DATE_START) or exists(QS/DATE_END)) then 'http://data.europa.eu/a4g/resource/MultipleStageProcedurePeriod/' || replace(replace(/TED_EXPORT/CODED_DATA_SECTION/NOTICE_DATA/NO_DOC_OJS, ' ', '-' ), '/' , '-') || '/' || unparsed-text('https://digest-api.ted-data.eu/api/v1/hashing/fn/uuid/' || encode-for-uri(path()) || '?response_type=raw') else null" ;
            rr:class epo:Period

        ] .
tedm:ProcedureTerm a rr:TriplesMap ;
    rr:subjectMap
        [
            rml:reference
                "if(exists(../PROCEDURE/URL_NATIONAL_PROCEDURE) or exists(../OBJECT_CONTRACT/LOT_DIVISION)) then 'http://data.europa.eu/a4g/resource/ProcedureTerm/' || replace(replace(/TED_EXPORT/CODED_DATA_SECTION/NOTICE_DATA/NO_DOC_OJS, ' ', '-' ), '/' , '-') || '/' || unparsed-text('https://digest-api.ted-data.eu/api/v1/hashing/fn/uuid/' || encode-for-uri(path()) || '?response_type=raw') else null" ;
            rr:class epo:ProcedureTerm
        ] ;
    rml:logicalSource
        [
            rml:source "data/source.xml" ;
            rml:iterator "/TED_EXPORT/FORM_SECTION/F20_2014/OBJECT_CONTRACT" ;
            rml:referenceFormulation ql:XPath
        ] .
tedm:SubmissionTerm a rr:TriplesMap ;
    rr:subjectMap
        [
            rml:reference
                "if(exists(DATE_RECEIPT_TENDERS) or exists(TIME_RECEIPT_TENDERS)) then 'http://data.europa.eu/a4g/resource/SubmissionTerm/' || replace(replace(/TED_EXPORT/CODED_DATA_SECTION/NOTICE_DATA/NO_DOC_OJS, ' ', '-' ), '/' , '-') || '/' || unparsed-text('https://digest-api.ted-data.eu/api/v1/hashing/fn/uuid/' || encode-for-uri(path()) || '?response_type=raw') else null" ;
            rr:class epo:SubmissionTerm
        ] ;
    rml:logicalSource
        [
            rml:source "data/source.xml" ;
            rml:iterator "/TED_EXPORT/FORM_SECTION/F20_2014/PROCEDURE" ;
            rml:referenceFormulation ql:XPath
        ] .
#tedm:MultipleStageProcedureDuration a rr:TriplesMap ;
#    rml:logicalSource
#        [
#            rml:source "data/source.xml" ;
#            rml:iterator "/TED_EXPORT/FORM_SECTION/F25_2014/OBJECT_CONTRACT/OBJECT_DESCR" ;
#            rml:referenceFormulation ql:XPath
#        ] ;
#    rr:subjectMap
#        [
#            rml:reference
#                "if(exists(QS/INDEFINITE_DURATION)) then 'http://data.europa.eu/a4g/resource/MultipleStageProcedureDuration/' || replace(replace(/TED_EXPORT/CODED_DATA_SECTION/NOTICE_DATA/NO_DOC_OJS, ' ', '-' ), '/' , '-') || '/' || unparsed-text('https://digest-api.ted-data.eu/api/v1/hashing/fn/uuid/' || encode-for-uri(path()) || '?response_type=raw') else null" ;
#                rr:class epo:Duration
#
#        ] .

#F20 TripleMaps - mostly Section 7
tedm:ProcedureModification a rr:TriplesMap ;
    rr:subjectMap
        [
            rr:template "http://data.europa.eu/a4g/resource/ProcedureModification/{replace(replace(/TED_EXPORT/CODED_DATA_SECTION/NOTICE_DATA/NO_DOC_OJS, ' ', '-' ), '/' , '-')}/{unparsed-text('https://digest-api.ted-data.eu/api/v1/hashing/fn/uuid/' || encode-for-uri(path()) || '?response_type=raw')}" ;
            rr:class epo:Procedure
        ] ;
    rml:logicalSource
        [
            rml:source "data/source.xml" ;
            rml:iterator "/TED_EXPORT/FORM_SECTION/F20_2014/MODIFICATIONS_CONTRACT/DESCRIPTION_PROCUREMENT" ;
            rml:referenceFormulation ql:XPath
        ] .
tedm:ProcedurePurposeModification a rr:TriplesMap ;
    rml:logicalSource
        [
            rml:source "data/source.xml" ;
            rml:iterator "/TED_EXPORT/FORM_SECTION/F20_2014[1]/MODIFICATIONS_CONTRACT/DESCRIPTION_PROCUREMENT" ;
            rml:referenceFormulation ql:XPath
        ] ;
    rr:subjectMap
        [
            rr:template "http://data.europa.eu/a4g/resource/ProcedurePurposeModification/{replace(replace(/TED_EXPORT/CODED_DATA_SECTION/NOTICE_DATA/NO_DOC_OJS, ' ', '-' ), '/' , '-')}/{unparsed-text('https://digest-api.ted-data.eu/api/v1/hashing/fn/uuid/' || encode-for-uri(path()) || '?response_type=raw')}" ;
            rr:class epo:Purpose
        ] .
tedm:LotModification a rr:TriplesMap ;
    rml:logicalSource
        [
            rml:source "data/source.xml" ;
            rml:iterator "/TED_EXPORT/FORM_SECTION/F20_2014/MODIFICATIONS_CONTRACT/DESCRIPTION_PROCUREMENT" ;
            rml:referenceFormulation ql:XPath
        ] ;
    rr:subjectMap
        [
            rr:template "http://data.europa.eu/a4g/resource/LotModification/{replace(replace(/TED_EXPORT/CODED_DATA_SECTION/NOTICE_DATA/NO_DOC_OJS, ' ', '-' ), '/' , '-')}/{unparsed-text('https://digest-api.ted-data.eu/api/v1/hashing/fn/uuid/' || encode-for-uri(path()) || '?response_type=raw')}" ;
            rr:class epo:Lot

        ] ;
    rr:predicateObjectMap
        [
            rr:predicate epo:hasDescription ;
            rr:objectMap
                [
                    rml:reference "SHORT_DESCR";
                    rml:languageMap [
                         rml:reference "lower-case(ancestor::F20_2014/@LG)"
                    ]
                ] ;
        ] .

tedm:ContractModification a rr:TriplesMap ;
    rml:logicalSource
        [
            rml:source "data/source.xml" ;
            rml:iterator "/TED_EXPORT/FORM_SECTION/F20_2014[1]/MODIFICATIONS_CONTRACT/INFO_MODIFICATIONS" ;
            rml:referenceFormulation ql:XPath
        ] ;
    rr:subjectMap
        [
            rml:reference
                "if(exists(.)) then 'http://data.europa.eu/a4g/resource/ContractModification/' || replace(replace(/TED_EXPORT/CODED_DATA_SECTION/NOTICE_DATA/NO_DOC_OJS, ' ', '-' ), '/' , '-') || '/' || unparsed-text('https://digest-api.ted-data.eu/api/v1/hashing/fn/uuid/' || encode-for-uri(../path()) || '?response_type=raw') else null" ;
            rr:class epo:ContractModification

        ] .

tedm:ElementModificationDescription a rr:TriplesMap ;
    rml:logicalSource
        [
            rml:source "data/source.xml" ;
            rml:iterator "/TED_EXPORT/FORM_SECTION/F20_2014[1]/MODIFICATIONS_CONTRACT/INFO_MODIFICATIONS" ;
            rml:referenceFormulation ql:XPath
        ] ;
    rr:subjectMap
        [
            rml:reference
                "if(exists(.)) then 'http://data.europa.eu/a4g/resource/ElementModificationDescription/' || replace(replace(/TED_EXPORT/CODED_DATA_SECTION/NOTICE_DATA/NO_DOC_OJS, ' ', '-' ), '/' , '-') || '/' || unparsed-text('https://digest-api.ted-data.eu/api/v1/hashing/fn/uuid/' || encode-for-uri(../path()) || '?response_type=raw') else null" ;
            rr:class epo:ElementModificationDescription

        ] .

tedm:LotPurposeModification a rr:TriplesMap ;
    rml:logicalSource
        [
            rml:source "data/source.xml" ;
            rml:iterator "/TED_EXPORT/FORM_SECTION/F20_2014[1]/MODIFICATIONS_CONTRACT/DESCRIPTION_PROCUREMENT/CPV_ADDITIONAL" ;
            rml:referenceFormulation ql:XPath
        ] ;
    rr:subjectMap
        [
            rml:reference
                "if(exists(.)) then 'http://data.europa.eu/a4g/resource/LotPurposeModification/' || replace(replace(/TED_EXPORT/CODED_DATA_SECTION/NOTICE_DATA/NO_DOC_OJS, ' ', '-' ), '/' , '-') || '/' || unparsed-text('https://digest-api.ted-data.eu/api/v1/hashing/fn/uuid/' || encode-for-uri(../path()) || '?response_type=raw') else null" ;
            rr:class epo:Purpose

        ] .
tedm:ContractTermModification a rr:TriplesMap ;
    rml:logicalSource
        [
            rml:source "data/source.xml" ;
            rml:iterator "/TED_EXPORT/FORM_SECTION/F20_2014/MODIFICATIONS_CONTRACT/DESCRIPTION_PROCUREMENT" ;
            rml:referenceFormulation ql:XPath
        ] ;
    rr:subjectMap
        [
            rr:template "http://data.europa.eu/a4g/resource/ContractTermModification/{replace(replace(/TED_EXPORT/CODED_DATA_SECTION/NOTICE_DATA/NO_DOC_OJS, ' ', '-' ), '/' , '-')}/{unparsed-text('https://digest-api.ted-data.eu/api/v1/hashing/fn/uuid/' || encode-for-uri(path()) || '?response_type=raw')}" ;
            rr:class epo:ContractTerm
        ] .
tedm:ContractTermLocationModification a rr:TriplesMap ;
    rml:logicalSource
        [
            rml:source "data/source.xml" ;
            rml:iterator "/TED_EXPORT/FORM_SECTION/F20_2014[1]/MODIFICATIONS_CONTRACT/DESCRIPTION_PROCUREMENT" ;
            rml:referenceFormulation ql:XPath
        ] ;
    rr:subjectMap
        [
            rr:template "http://data.europa.eu/a4g/resource/ContractTermLocationModification/{replace(replace(/TED_EXPORT/CODED_DATA_SECTION/NOTICE_DATA/NO_DOC_OJS, ' ', '-' ), '/' , '-')}/{unparsed-text('https://digest-api.ted-data.eu/api/v1/hashing/fn/uuid/' || encode-for-uri(path()) || '?response_type=raw')}" ;
            rr:class dct:Location

        ] .
tedm:ContractTermLocationAddressModification a rr:TriplesMap ;
    rml:logicalSource
        [
            rml:source "data/source.xml" ;
            rml:iterator "/TED_EXPORT/FORM_SECTION/F20_2014/MODIFICATIONS_CONTRACT/DESCRIPTION_PROCUREMENT" ;
            rml:referenceFormulation ql:XPath
        ] ;
    rr:subjectMap
        [
            rml:reference
                "if(exists(MAIN_SITE)) then 'http://data.europa.eu/a4g/resource/ContractTermLocationAddressModification/' || replace(replace(/TED_EXPORT/CODED_DATA_SECTION/NOTICE_DATA/NO_DOC_OJS, ' ', '-' ), '/' , '-') || '/' || unparsed-text('https://digest-api.ted-data.eu/api/v1/hashing/fn/uuid/' || encode-for-uri(path()) || '?response_type=raw') else null" ;
            rr:class locn:Address

        ] ;
    rr:predicateObjectMap
        [
            rr:predicate locn:fullAddress ;
            rr:objectMap
                 [
                    rml:reference "MAIN_SITE";
                    rml:languageMap [
                         rml:reference "lower-case(ancestor::F20_2014/@LG)"
                    ]
                ] ;
        ] .
tedm:DurationModification a rr:TriplesMap ;
    rml:logicalSource
        [
            rml:source "data/source.xml" ;
            rml:iterator "/TED_EXPORT/FORM_SECTION/F20_2014/MODIFICATIONS_CONTRACT/DESCRIPTION_PROCUREMENT/DURATION" ;
            rml:referenceFormulation ql:XPath
        ] ;
    rr:subjectMap
        [
            rr:template "http://data.europa.eu/a4g/resource/DurationModification/{replace(replace(/TED_EXPORT/CODED_DATA_SECTION/NOTICE_DATA/NO_DOC_OJS, ' ', '-' ), '/' , '-')}/{unparsed-text('https://digest-api.ted-data.eu/api/v1/hashing/fn/uuid/' || encode-for-uri(path()) || '?response_type=raw')}" ;
            rr:class epo:Duration
        ] .
tedm:PeriodModification a rr:TriplesMap ;
    rml:logicalSource
        [
            rml:source "data/source.xml" ;
            rml:iterator "/TED_EXPORT/FORM_SECTION/F20_2014/MODIFICATIONS_CONTRACT/DESCRIPTION_PROCUREMENT" ;
            rml:referenceFormulation ql:XPath
        ] ;
    rr:subjectMap
        [
            rml:reference
                "if(exists(DATE_START) or exists(DATE_END)) then 'http://data.europa.eu/a4g/resource/PeriodModification/' || replace(replace(/TED_EXPORT/CODED_DATA_SECTION/NOTICE_DATA/NO_DOC_OJS, ' ', '-' ), '/' , '-') || '/' || unparsed-text('https://digest-api.ted-data.eu/api/v1/hashing/fn/uuid/' || encode-for-uri(path()) || '?response_type=raw') else null" ;
            rr:class epo:Period
        ] .

# controlled values
tedm:contractNature  a rr:TriplesMap ;
    rml:logicalSource
        [
            rml:source "transformation/resources/contract_nature.json" ;
            rml:iterator "$.results.bindings[*]" ;
            rml:referenceFormulation ql:JSONPath
        ] ;
    rr:subjectMap
        [
            rml:reference
                "conceptURI.value" ;
        ] .
tedm:cpvsuppl a rr:TriplesMap ;
    rml:logicalSource
        [
            rml:source "transformation/resources/cpvsuppl.json" ;
            rml:iterator "$.results.bindings[*]" ;
            rml:referenceFormulation ql:JSONPath
        ] ;
    rr:subjectMap
        [
            rml:reference
                "conceptURI.value" ;
        ] .
tedm:cpv a rr:TriplesMap ;
    rml:logicalSource
        [
            rml:source "transformation/resources/cpv.json" ;
            rml:iterator "$.results.bindings[*]" ;
            rml:referenceFormulation ql:JSONPath
        ] ;
    rr:subjectMap
        [
            rml:reference
                "conceptURI.value" ;
        ] .
#not needed for forms F06,F20,F20
tedm:buyerType a rr:TriplesMap ;
    rml:logicalSource
        [
            rml:source "transformation/resources/buyer_legal_type.csv" ;
            rml:referenceFormulation ql:CSV
        ] ;
    rr:subjectMap
        [
            rml:reference
                "conceptURI" ;
        ] .
tedm:currency a rr:TriplesMap ;
    rml:logicalSource
        [
            rml:source "transformation/resources/currency.json" ;
            rml:iterator "$.results.bindings[*]" ;
            rml:referenceFormulation ql:JSONPath
        ] ;
    rr:subjectMap
        [
            rml:reference
                "conceptURI.value" ;
        ] .
#not needed for forms F20
tedm:mainActivity a rr:TriplesMap ;
    rml:logicalSource
        [
            rml:source "transformation/resources/main_activity.csv" ;
            rml:referenceFormulation ql:CSV
        ] ;
    rr:subjectMap
        [
            rml:reference
                "conceptURI" ;
        ] .

tedm:legalBasis a rr:TriplesMap ;
    rml:logicalSource
        [
            rml:source "transformation/resources/legal_basis.json" ;
            rml:iterator "$.results.bindings[*]" ;
            rml:referenceFormulation ql:JSONPath
        ] ;
    rr:subjectMap
        [
            rml:reference
                "conceptURI.value" ;
        ] .

tedm:nuts a rr:TriplesMap ;
    rml:logicalSource
        [
            rml:source "transformation/resources/nuts.json" ;
            rml:iterator "$.results.bindings[*]" ;
            rml:referenceFormulation ql:JSONPath
        ] ;
    rr:subjectMap
        [
            rml:reference
                "conceptURI.value" ;
        ] .
tedm:country a rr:TriplesMap ;
    rml:logicalSource
        [
            rml:source "transformation/resources/country.json" ;
            rml:iterator "$.results.bindings[*]" ;
            rml:referenceFormulation ql:JSONPath
        ] ;
    rr:subjectMap
        [
            rml:reference
                "conceptURI.value" ;
        ] .

tedm:FrameworkAgreementTermLot a rr:TriplesMap ;
    rml:logicalSource
        [
            rml:source "data/source.xml" ;
            rml:iterator "/TED_EXPORT/FORM_SECTION/F20_2014[1]/MODIFICATIONS_CONTRACT/DESCRIPTION_PROCUREMENT" ;
            rml:referenceFormulation ql:XPath
        ] ;
    rr:subjectMap
        [
            rml:reference
                "if(exists(JUSTIFICATION)) then 'http://data.europa.eu/a4g/resource/FrameworkAgreementTerm/' || replace(replace(/TED_EXPORT/CODED_DATA_SECTION/NOTICE_DATA/NO_DOC_OJS, ' ', '-' ), '/' , '-') || '/' || unparsed-text('https://digest-api.ted-data.eu/api/v1/hashing/fn/uuid/' || encode-for-uri(path()) || '?response_type=raw') else null" ;
            rr:class epo:FrameworkAgreementTerm
        ] .

tedm:ContractorOrganisationModification a rr:TriplesMap ;
    rml:logicalSource
        [
            rml:source "data/source.xml" ;
            rml:iterator "/TED_EXPORT/FORM_SECTION/F20_2014/MODIFICATIONS_CONTRACT/DESCRIPTION_PROCUREMENT/CONTRACTORS/CONTRACTOR" ;
            rml:referenceFormulation ql:XPath
        ] ;
    rr:subjectMap
        [
            rr:template "http://data.europa.eu/a4g/resource/ContractOrganisationModification/{replace(replace(/TED_EXPORT/CODED_DATA_SECTION/NOTICE_DATA/NO_DOC_OJS, ' ', '-' ), '/' , '-')}/{unparsed-text('https://digest-api.ted-data.eu/api/v1/hashing/fn/uuid/' || encode-for-uri(path()) || '?response_type=raw')}" ;
            rr:class org:Organization

        ] ;
    rr:predicateObjectMap
        [
        rr:predicate epo:hasLegalName ;
        rr:objectMap
                [
                    rml:reference "ADDRESS_CONTRACTOR/OFFICIALNAME";
                    rml:languageMap [
                         rml:reference "lower-case(ancestor::F20_2014/@LG)"
                    ]
                ]
        ] .

tedm:ContractorOrganisationIdentifierModification a rr:TripleMap ;
    rml:logicalSource
        [
            rml:source "data/source.xml" ;
            rml:iterator "/TED_EXPORT/FORM_SECTION/F20_2014[1]/MODIFICATIONS_CONTRACT/DESCRIPTION_PROCUREMENT/CONTRACTORS/CONTRACTOR";
            rml:referenceFormulation ql:XPath
        ];
    rr:subjectMap
        [
            rml:reference "if (exists(ADDRESS_CONTRACTOR/NATIONALID)) then 'http://data.europa.eu/a4g/resource/ContractOrganisationIdentifierModification/' || replace(replace(/TED_EXPORT/CODED_DATA_SECTION/NOTICE_DATA/NO_DOC_OJS, ' ', '-' ), '/' , '-') || '/' || unparsed-text('https://digest-api.ted-data.eu/api/v1/hashing/fn/uuid/' || encode-for-uri(path()) || '?response_type=raw') else null" ;
            rr:class epo:Identifier
        ] .

tedm:ContractorContactPointModification a rr:TriplesMap ;
    rml:logicalSource
        [
            rml:source "data/source.xml" ;
            rml:iterator "/TED_EXPORT/FORM_SECTION/F20_2014/MODIFICATIONS_CONTRACT/DESCRIPTION_PROCUREMENT/CONTRACTORS/CONTRACTOR" ;
            rml:referenceFormulation ql:XPath
        ] ;
    rr:subjectMap
        [
             rml:reference
                "if(exists(ADDRESS_CONTRACTOR/E_MAIL) or exists(ADDRESS_CONTRACTOR/FAX) or exists(ADDRESS_CONTRACTOR/PHONE) or exists(ADDRESS_CONTRACTOR/URL) or exists(ADDRESS_CONTRACTOR/CONTACT_POINT)) then 'http://data.europa.eu/a4g/resource/ContractContactPoint/' || replace(replace(/TED_EXPORT/CODED_DATA_SECTION/NOTICE_DATA/NO_DOC_OJS, ' ', '-' ), '/' , '-') || '/' || unparsed-text('https://digest-api.ted-data.eu/api/v1/hashing/fn/uuid/' || encode-for-uri(path()) || '?response_type=raw') else null" ;
            rr:class cpov:ContactPoint

        ] ;
    rr:predicateObjectMap
        [
            rr:predicate epo:hasContactName ;
            rr:objectMap
                [
                    rml:reference "ADDRESS_CONTRACTOR/CONTACT_POINT";
                    rml:languageMap [
                         rml:reference "lower-case(ancestor::F20_2014/@LG)"
                    ]
                ]
        ] .

tedm:ContractorOrganisationAddressModification a rr:TriplesMap ;
    rml:logicalSource
        [
            rml:source "data/source.xml" ;
            rml:iterator "/TED_EXPORT/FORM_SECTION/F20_2014[1]/MODIFICATIONS_CONTRACT/DESCRIPTION_PROCUREMENT/CONTRACTORS/CONTRACTOR" ;
            rml:referenceFormulation ql:XPath
        ] ;
    rr:subjectMap
        [
            rr:template "http://data.europa.eu/a4g/resource/ContractOrganisationAddressModification/{replace(replace(/TED_EXPORT/CODED_DATA_SECTION/NOTICE_DATA/NO_DOC_OJS, ' ', '-' ), '/' , '-')}/{unparsed-text('https://digest-api.ted-data.eu/api/v1/hashing/fn/uuid/' || encode-for-uri(path()) || '?response_type=raw')}" ;
            rr:class locn:Address

        ] .