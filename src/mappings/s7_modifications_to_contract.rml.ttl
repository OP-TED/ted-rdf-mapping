#--- s7_modifications_to_contract.rml.ttl ---
@prefix owl: <http://www.w3.org/2002/07/owl#> .
@prefix rdfs: <http://www.w3.org/2000/01/rdf-schema#> .
@prefix xsd: <http://www.w3.org/2001/XMLSchema#> .
@prefix skos: <http://www.w3.org/2004/02/skos/core#> .
@prefix rr: <http://www.w3.org/ns/r2rml#> .
@prefix rml: <http://semweb.mmlab.be/ns/rml#> .
@prefix dct: <http://purl.org/dc/terms/> .
@prefix tedm: <http://data.europa.eu/a4g/mapping/sf-rml/> .
@prefix epo: <http://data.europa.eu/a4g/ontology#> .

tedm:modifications_to_contract
  a owl:Ontology ;
  owl:imports dct:, <http://www.w3.org/2004/02/skos/core> ;
  dct:description """
        This module provides the mapping definitions for the ..."""@en ;
  rdfs:label "TED-SWS mapping of "@en ;
  dct:date "2022-10-24"^^xsd:date .

tedm:ProcedureModification a rr:TriplesMap ;
    rr:predicateObjectMap
        [
            rr:predicate epo:containsModificationsOn;
            rr:objectMap
                [
                    rr:parentTriplesMap tedm:Procedure;
                    rr:joinCondition [
                        rr:child "unparsed-text('https://digest-api.ted-data.eu/api/v1/hashing/fn/uuid/' || encode-for-uri(path(../..)) || '?response_type=raw')";
                        rr:parent "unparsed-text('https://digest-api.ted-data.eu/api/v1/hashing/fn/uuid/' || encode-for-uri(path(..)) || '?response_type=raw')";
                    ];
                ] ;
        ] ;
    rr:predicateObjectMap
        [
            rr:predicate epo:hasOverallPurpose ;
            rr:objectMap
                [
                    rr:parentTriplesMap tedm:ProcedurePurposeModification
                ] ;
        ] .

tedm:ProcedurePurposeModification a rr:TriplesMap ;
    rr:predicateObjectMap
        [
            rr:predicate epo:hasMainClassification ;
            rr:objectMap
                [
                    rr:parentTriplesMap tedm:cpvsuppl;
                    rr:joinCondition [
                        rr:child "CPV_MAIN/CPV_SUPPLEMENTARY_CODE/@CODE";
                        rr:parent "code.value";
                    ];
                ] ;

        ] ;
    rr:predicateObjectMap
        [
            rr:predicate epo:hasMainClassification ;
            rr:objectMap
                [
                    rr:parentTriplesMap tedm:cpv;
                    rr:joinCondition [
                        rr:child "CPV_MAIN/CPV_CODE/@CODE";
                        rr:parent "code.value";
                    ];
                ] ;
        ] .
